/*! For license information please see module.js.LICENSE.txt */
define(["@emotion/css","@grafana/data","@grafana/runtime","@grafana/ui","lodash","react","react-dom","react-redux","react-router-dom","redux","rxjs"],((e,t,n,r,a,i,o,s,l,c,u)=>(()=>{var d={308:(e,t,n)=>{"use strict";let r;n.d(t,{Ay:()=>k,R1:()=>E}),e=n.hmd(e);const a=new Array(128).fill(void 0);function i(e){return a[e]}a.push(void 0,null,!0,!1);let o=0,s=null;function l(){return null!==s&&0!==s.byteLength||(s=new Uint8Array(r.memory.buffer)),s}const c="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},u="function"==typeof c.encodeInto?function(e,t){return c.encodeInto(e,t)}:function(e,t){const n=c.encode(e);return t.set(n),{read:e.length,written:n.length}};function d(e,t,n){if(void 0===n){const n=c.encode(e),r=t(n.length,1)>>>0;return l().subarray(r,r+n.length).set(n),o=n.length,r}let r=e.length,a=t(r,1)>>>0;const i=l();let s=0;for(;s<r;s++){const t=e.charCodeAt(s);if(t>127)break;i[a+s]=t}if(s!==r){0!==s&&(e=e.slice(s)),a=n(a,r,r=s+3*e.length,1)>>>0;const t=l().subarray(a+s,a+r);s+=u(e,t).written,a=n(a,r,s,1)>>>0}return o=s,a}function p(e){return null==e}let f=null;function h(){return null!==f&&0!==f.byteLength||(f=new Int32Array(r.memory.buffer)),f}let g=a.length;function m(e){const t=i(e);return function(e){e<132||(a[e]=g,g=e)}(e),t}function b(e){g===a.length&&a.push(a.length+1);const t=g;return g=a[t],a[t]=e,t}const v="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};function y(e,t){return e>>>=0,v.decode(l().subarray(e,e+t))}"undefined"!=typeof TextDecoder&&v.decode();let w=null;let S=null;function x(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let n="[";t>0&&(n+=x(e[0]));for(let r=1;r<t;r++)n+=", "+x(e[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(!(n.length>1))return toString.call(e);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(e)+")"}catch(e){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}let O=null;function _(e,t){try{return e.apply(this,t)}catch(e){r.__wbindgen_exn_store(b(e))}}"undefined"==typeof FinalizationRegistry||new FinalizationRegistry((e=>r.__wbg_autoets_free(e>>>0)));const C="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>r.__wbg_changepointdetector_free(e>>>0)));class E{static __wrap(e){e>>>=0;const t=Object.create(E.prototype);return t.__wbg_ptr=e,C.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,C.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_changepointdetector_free(e)}static normalGamma(e){try{const a=r.__wbindgen_add_to_stack_pointer(-16);r.changepointdetector_normalGamma(a,p(e)?0:b(e));var t=h()[a/4+0],n=h()[a/4+1];if(h()[a/4+2])throw m(n);return E.__wrap(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}static defaultArgpcp(e){try{const a=r.__wbindgen_add_to_stack_pointer(-16);r.changepointdetector_defaultArgpcp(a,p(e)?0:b(e));var t=h()[a/4+0],n=h()[a/4+1];if(h()[a/4+2])throw m(n);return E.__wrap(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}detectChangepoints(e){return m(r.changepointdetector_detectChangepoints(this.__wbg_ptr,b(e)))}}function P(){const t={wbg:{}};return t.wbg.__wbindgen_string_get=function(e,t){const n=i(t),a="string"==typeof n?n:void 0;var s=p(a)?0:d(a,r.__wbindgen_malloc,r.__wbindgen_realloc),l=o;h()[e/4+1]=l,h()[e/4+0]=s},t.wbg.__wbindgen_object_drop_ref=function(e){m(e)},t.wbg.__wbindgen_is_bigint=function(e){return"bigint"==typeof i(e)},t.wbg.__wbindgen_bigint_from_u64=function(e){return b(BigInt.asUintN(64,e))},t.wbg.__wbindgen_jsval_eq=function(e,t){return i(e)===i(t)},t.wbg.__wbindgen_error_new=function(e,t){return b(new Error(y(e,t)))},t.wbg.__wbindgen_boolean_get=function(e){const t=i(e);return"boolean"==typeof t?t?1:0:2},t.wbg.__wbindgen_is_string=function(e){return"string"==typeof i(e)},t.wbg.__wbindgen_number_get=function(e,t){const n=i(t),a="number"==typeof n?n:void 0;(null!==w&&0!==w.byteLength||(w=new Float64Array(r.memory.buffer)),w)[e/8+1]=p(a)?0:a,h()[e/4+0]=!p(a)},t.wbg.__wbindgen_is_object=function(e){const t=i(e);return"object"==typeof t&&null!==t},t.wbg.__wbindgen_is_undefined=function(e){return void 0===i(e)},t.wbg.__wbindgen_in=function(e,t){return i(e)in i(t)},t.wbg.__wbindgen_object_clone_ref=function(e){return b(i(e))},t.wbg.__wbindgen_string_new=function(e,t){return b(y(e,t))},t.wbg.__wbg_new_abda76e883ba8a5f=function(){return b(new Error)},t.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const n=d(i(t).stack,r.__wbindgen_malloc,r.__wbindgen_realloc),a=o;h()[e/4+1]=a,h()[e/4+0]=n},t.wbg.__wbg_error_f851667af71bcfc6=function(e,t){let n,a;try{n=e,a=t,console.error(y(e,t))}finally{r.__wbindgen_free(n,a,1)}},t.wbg.__wbg_crypto_1d1f22824a6a080c=function(e){return b(i(e).crypto)},t.wbg.__wbg_process_4a72847cc503995b=function(e){return b(i(e).process)},t.wbg.__wbg_versions_f686565e586dd935=function(e){return b(i(e).versions)},t.wbg.__wbg_node_104a2ff8d6ea03a2=function(e){return b(i(e).node)},t.wbg.__wbg_require_cca90b1a94a0255b=function(){return _((function(){return b(e.require)}),arguments)},t.wbg.__wbindgen_is_function=function(e){return"function"==typeof i(e)},t.wbg.__wbg_msCrypto_eb05e62b530a1508=function(e){return b(i(e).msCrypto)},t.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return _((function(e,t){i(e).randomFillSync(m(t))}),arguments)},t.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return _((function(e,t){i(e).getRandomValues(i(t))}),arguments)},t.wbg.__wbindgen_jsval_loose_eq=function(e,t){return i(e)==i(t)},t.wbg.__wbindgen_as_number=function(e){return+i(e)},t.wbg.__wbindgen_number_new=function(e){return b(e)},t.wbg.__wbg_getwithrefkey_edc2c8960f0f1191=function(e,t){return b(i(e)[i(t)])},t.wbg.__wbg_set_f975102236d3c502=function(e,t,n){i(e)[m(t)]=m(n)},t.wbg.__wbg_String_b9412f8799faab3e=function(e,t){const n=d(String(i(t)),r.__wbindgen_malloc,r.__wbindgen_realloc),a=o;h()[e/4+1]=a,h()[e/4+0]=n},t.wbg.__wbg_get_bd8e338fbd5f5cc8=function(e,t){return b(i(e)[t>>>0])},t.wbg.__wbg_length_cd7af8117672b8b8=function(e){return i(e).length},t.wbg.__wbg_new_16b304a2cfa7ff4a=function(){return b(new Array)},t.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(e,t){return b(new Function(y(e,t)))},t.wbg.__wbg_call_27c0f87801dedf93=function(){return _((function(e,t){return b(i(e).call(i(t)))}),arguments)},t.wbg.__wbg_new_72fb9a18b5ae2624=function(){return b(new Object)},t.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return _((function(){return b(self.self)}),arguments)},t.wbg.__wbg_window_c6fb939a7f436783=function(){return _((function(){return b(window.window)}),arguments)},t.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return _((function(){return b(globalThis.globalThis)}),arguments)},t.wbg.__wbg_global_207b558942527489=function(){return _((function(){return b(n.g.global)}),arguments)},t.wbg.__wbg_set_d4638f722068f043=function(e,t,n){i(e)[t>>>0]=m(n)},t.wbg.__wbg_instanceof_ArrayBuffer_836825be07d4c9d2=function(e){let t;try{t=i(e)instanceof ArrayBuffer}catch(e){t=!1}return t},t.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return _((function(e,t,n){return b(i(e).call(i(t),i(n)))}),arguments)},t.wbg.__wbg_isSafeInteger_f7b04ef02296c4d2=function(e){return Number.isSafeInteger(i(e))},t.wbg.__wbg_entries_95cc2c823b285a09=function(e){return b(Object.entries(i(e)))},t.wbg.__wbg_buffer_12d079cc21e14bdb=function(e){return b(i(e).buffer)},t.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(e,t,n){return b(new Uint8Array(i(e),t>>>0,n>>>0))},t.wbg.__wbg_new_63b92bc8671ed464=function(e){return b(new Uint8Array(i(e)))},t.wbg.__wbg_set_a47bac70306a19a7=function(e,t,n){i(e).set(i(t),n>>>0)},t.wbg.__wbg_length_c20a40f15020d68a=function(e){return i(e).length},t.wbg.__wbg_new_5e4931c0e7b0d773=function(e){return b(new Float64Array(i(e)))},t.wbg.__wbg_set_cb4cf3c3a46bcdd2=function(e,t,n){i(e).set(i(t),n>>>0)},t.wbg.__wbg_length_0382220548385255=function(e){return i(e).length},t.wbg.__wbg_instanceof_Uint8Array_2b3bbecd033d19f6=function(e){let t;try{t=i(e)instanceof Uint8Array}catch(e){t=!1}return t},t.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(e){return b(new Uint8Array(e>>>0))},t.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(e,t,n){return b(i(e).subarray(t>>>0,n>>>0))},t.wbg.__wbindgen_bigint_get_as_i64=function(e,t){const n=i(t),a="bigint"==typeof n?n:void 0;(null!==S&&0!==S.byteLength||(S=new BigInt64Array(r.memory.buffer)),S)[e/8+1]=p(a)?BigInt(0):a,h()[e/4+0]=!p(a)},t.wbg.__wbindgen_debug_string=function(e,t){const n=d(x(i(t)),r.__wbindgen_malloc,r.__wbindgen_realloc),a=o;h()[e/4+1]=a,h()[e/4+0]=n},t.wbg.__wbindgen_throw=function(e,t){throw new Error(y(e,t))},t.wbg.__wbindgen_memory=function(){return b(r.memory)},t}async function D(e){if(void 0!==r)return r;void 0===e&&(e=new URL(n(294),n.b));const t=P();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:a,module:i}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return function(e,t){return r=e.exports,D.__wbindgen_wasm_module=t,S=null,w=null,f=null,O=null,s=null,r.__wbindgen_start(),r}(a,i)}"undefined"==typeof FinalizationRegistry||new FinalizationRegistry((e=>r.__wbg_loadedoutlierdetector_free(e>>>0))),"undefined"==typeof FinalizationRegistry||new FinalizationRegistry((e=>r.__wbg_mstl_free(e>>>0))),"undefined"==typeof FinalizationRegistry||new FinalizationRegistry((e=>r.__wbg_outlierdetector_free(e>>>0)));const k=D},567:(e,t,n)=>{var r;!function(){"use strict";var a=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:a,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:a&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:a&&!!window.screen};void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},486:(e,t,n)=>{"use strict";var r=n(271),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var a=f(n);a&&a!==h&&e(t,a,r)}var o=u(n);d&&(o=o.concat(d(n)));for(var s=l(t),g=l(n),m=0;m<o.length;++m){var b=o[m];if(!(i[b]||r&&r[b]||g&&g[b]||s&&s[b])){var v=p(n,b);try{c(t,b,v)}catch(e){}}}}return t}},842:(e,t,n)=>{e=n.nmd(e);var r="__lodash_hash_undefined__",a=1,i=2,o=9007199254740991,s="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",p="[object Error]",f="[object Function]",h="[object GeneratorFunction]",g="[object Map]",m="[object Number]",b="[object Null]",v="[object Object]",y="[object Promise]",w="[object Proxy]",S="[object RegExp]",x="[object Set]",O="[object String]",_="[object Undefined]",C="[object WeakMap]",E="[object ArrayBuffer]",P="[object DataView]",D=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,T={};T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T[s]=T[l]=T[E]=T[u]=T[P]=T[d]=T[p]=T[f]=T[g]=T[m]=T[v]=T[S]=T[x]=T[O]=T[C]=!1;var R="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,j="object"==typeof self&&self&&self.Object===Object&&self,I=R||j||Function("return this")(),A=t&&!t.nodeType&&t,L=A&&e&&!e.nodeType&&e,N=L&&L.exports===A,F=N&&R.process,M=function(){try{return F&&F.binding&&F.binding("util")}catch(e){}}(),B=M&&M.isTypedArray;function V(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function z(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function W(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var H,$,U,G=Array.prototype,q=Function.prototype,Q=Object.prototype,Y=I["__core-js_shared__"],K=q.toString,X=Q.hasOwnProperty,Z=(H=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",J=Q.toString,ee=RegExp("^"+K.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=N?I.Buffer:void 0,ne=I.Symbol,re=I.Uint8Array,ae=Q.propertyIsEnumerable,ie=G.splice,oe=ne?ne.toStringTag:void 0,se=Object.getOwnPropertySymbols,le=te?te.isBuffer:void 0,ce=($=Object.keys,U=Object,function(e){return $(U(e))}),ue=Le(I,"DataView"),de=Le(I,"Map"),pe=Le(I,"Promise"),fe=Le(I,"Set"),he=Le(I,"WeakMap"),ge=Le(Object,"create"),me=Be(ue),be=Be(de),ve=Be(pe),ye=Be(fe),we=Be(he),Se=ne?ne.prototype:void 0,xe=Se?Se.valueOf:void 0;function Oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ce(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ee(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ce;++t<n;)this.add(e[t])}function Pe(e){var t=this.__data__=new _e(e);this.size=t.size}function De(e,t){for(var n=e.length;n--;)if(Ve(e[n][0],t))return n;return-1}function ke(e){return null==e?void 0===e?_:b:oe&&oe in Object(e)?function(e){var t=X.call(e,oe),n=e[oe];try{e[oe]=void 0;var r=!0}catch(e){}var a=J.call(e);return r&&(t?e[oe]=n:delete e[oe]),a}(e):function(e){return J.call(e)}(e)}function Te(e){return qe(e)&&ke(e)==s}function Re(e,t,n,r,o){return e===t||(null==e||null==t||!qe(e)&&!qe(t)?e!=e&&t!=t:function(e,t,n,r,o,c){var f=We(e),h=We(t),b=f?l:Fe(e),y=h?l:Fe(t),w=(b=b==s?v:b)==v,_=(y=y==s?v:y)==v,C=b==y;if(C&&He(e)){if(!He(t))return!1;f=!0,w=!1}if(C&&!w)return c||(c=new Pe),f||Qe(e)?je(e,t,n,r,o,c):function(e,t,n,r,o,s,l){switch(n){case P:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case E:return!(e.byteLength!=t.byteLength||!s(new re(e),new re(t)));case u:case d:case m:return Ve(+e,+t);case p:return e.name==t.name&&e.message==t.message;case S:case O:return e==t+"";case g:var c=z;case x:var f=r&a;if(c||(c=W),e.size!=t.size&&!f)return!1;var h=l.get(e);if(h)return h==t;r|=i,l.set(e,t);var b=je(c(e),c(t),r,o,s,l);return l.delete(e),b;case"[object Symbol]":if(xe)return xe.call(e)==xe.call(t)}return!1}(e,t,b,n,r,o,c);if(!(n&a)){var D=w&&X.call(e,"__wrapped__"),k=_&&X.call(t,"__wrapped__");if(D||k){var T=D?e.value():e,R=k?t.value():t;return c||(c=new Pe),o(T,R,n,r,c)}}return!!C&&(c||(c=new Pe),function(e,t,n,r,i,o){var s=n&a,l=Ie(e),c=l.length;if(c!=Ie(t).length&&!s)return!1;for(var u=c;u--;){var d=l[u];if(!(s?d in t:X.call(t,d)))return!1}var p=o.get(e);if(p&&o.get(t))return p==t;var f=!0;o.set(e,t),o.set(t,e);for(var h=s;++u<c;){var g=e[d=l[u]],m=t[d];if(r)var b=s?r(m,g,d,t,e,o):r(g,m,d,e,t,o);if(!(void 0===b?g===m||i(g,m,n,r,o):b)){f=!1;break}h||(h="constructor"==d)}if(f&&!h){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,o,c))}(e,t,n,r,Re,o))}function je(e,t,n,r,o,s){var l=n&a,c=e.length,u=t.length;if(c!=u&&!(l&&u>c))return!1;var d=s.get(e);if(d&&s.get(t))return d==t;var p=-1,f=!0,h=n&i?new Ee:void 0;for(s.set(e,t),s.set(t,e);++p<c;){var g=e[p],m=t[p];if(r)var b=l?r(m,g,p,t,e,s):r(g,m,p,e,t,s);if(void 0!==b){if(b)continue;f=!1;break}if(h){if(!V(t,(function(e,t){if(a=t,!h.has(a)&&(g===e||o(g,e,n,r,s)))return h.push(t);var a}))){f=!1;break}}else if(g!==m&&!o(g,m,n,r,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function Ie(e){return function(e,t,n){var r=t(e);return We(e)?r:function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}(r,n(e))}(e,Ye,Ne)}function Ae(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function Le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ge(e)||function(e){return!!Z&&Z in e}(e))&&($e(e)?ee:D).test(Be(e))}(n)?n:void 0}Oe.prototype.clear=function(){this.__data__=ge?ge(null):{},this.size=0},Oe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Oe.prototype.get=function(e){var t=this.__data__;if(ge){var n=t[e];return n===r?void 0:n}return X.call(t,e)?t[e]:void 0},Oe.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:X.call(t,e)},Oe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ge&&void 0===t?r:t,this},_e.prototype.clear=function(){this.__data__=[],this.size=0},_e.prototype.delete=function(e){var t=this.__data__,n=De(t,e);return!(n<0||(n==t.length-1?t.pop():ie.call(t,n,1),--this.size,0))},_e.prototype.get=function(e){var t=this.__data__,n=De(t,e);return n<0?void 0:t[n][1]},_e.prototype.has=function(e){return De(this.__data__,e)>-1},_e.prototype.set=function(e,t){var n=this.__data__,r=De(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Ce.prototype.clear=function(){this.size=0,this.__data__={hash:new Oe,map:new(de||_e),string:new Oe}},Ce.prototype.delete=function(e){var t=Ae(this,e).delete(e);return this.size-=t?1:0,t},Ce.prototype.get=function(e){return Ae(this,e).get(e)},Ce.prototype.has=function(e){return Ae(this,e).has(e)},Ce.prototype.set=function(e,t){var n=Ae(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ee.prototype.add=Ee.prototype.push=function(e){return this.__data__.set(e,r),this},Ee.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.clear=function(){this.__data__=new _e,this.size=0},Pe.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Pe.prototype.get=function(e){return this.__data__.get(e)},Pe.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof _e){var r=n.__data__;if(!de||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ce(r)}return n.set(e,t),this.size=n.size,this};var Ne=se?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var r=-1,a=null==t?0:t.length,i=0,o=[];++r<a;){var s=t[r];l=s,ae.call(e,l)&&(o[i++]=s)}var l;return o}(se(e)))}:function(){return[]},Fe=ke;function Me(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||k.test(e))&&e>-1&&e%1==0&&e<t}function Be(e){if(null!=e){try{return K.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ve(e,t){return e===t||e!=e&&t!=t}(ue&&Fe(new ue(new ArrayBuffer(1)))!=P||de&&Fe(new de)!=g||pe&&Fe(pe.resolve())!=y||fe&&Fe(new fe)!=x||he&&Fe(new he)!=C)&&(Fe=function(e){var t=ke(e),n=t==v?e.constructor:void 0,r=n?Be(n):"";if(r)switch(r){case me:return P;case be:return g;case ve:return y;case ye:return x;case we:return C}return t});var ze=Te(function(){return arguments}())?Te:function(e){return qe(e)&&X.call(e,"callee")&&!ae.call(e,"callee")},We=Array.isArray,He=le||function(){return!1};function $e(e){if(!Ge(e))return!1;var t=ke(e);return t==f||t==h||t==c||t==w}function Ue(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Ge(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qe(e){return null!=e&&"object"==typeof e}var Qe=B?function(e){return function(t){return e(t)}}(B):function(e){return qe(e)&&Ue(e.length)&&!!T[ke(e)]};function Ye(e){return null!=(t=e)&&Ue(t.length)&&!$e(t)?function(e,t){var n=We(e),r=!n&&ze(e),a=!n&&!r&&He(e),i=!n&&!r&&!a&&Qe(e),o=n||r||a||i,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!X.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Me(c,l))||s.push(c);return s}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||Q))return ce(e);var t,n,r=[];for(var a in Object(e))X.call(e,a)&&"constructor"!=a&&r.push(a);return r}(e);var t}e.exports=function(e,t){return Re(e,t)}},362:(e,t,n)=>{"use strict";var r=n(441);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},688:(e,t,n)=>{e.exports=n(362)()},441:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},111:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(959)),a=p(n(688)),i=p(n(398)),o=p(n(262)),s=n(837),l=n(402),c=n(732),u=p(n(60)),d=p(n(988));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends r.Component{static getDerivedStateFromProps(e,t){let{position:n}=e,{prevPropsPosition:r}=t;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:{...n}})}constructor(e){super(e),g(this,"onDragStart",((e,t)=>{if((0,d.default)("Draggable: onDragStart: %j",t),!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})})),g(this,"onDrag",((e,t)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",t);const n=(0,l.createDraggableData)(this,t),r={x:n.x,y:n.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=r;r.x+=this.state.slackX,r.y+=this.state.slackY;const[a,i]=(0,l.getBoundPosition)(this,r.x,r.y);r.x=a,r.y=i,r.slackX=this.state.slackX+(e-r.x),r.slackY=this.state.slackY+(t-r.y),n.x=r.x,n.y=r.y,n.deltaX=r.x-this.state.x,n.deltaY=r.y-this.state.y}if(!1===this.props.onDrag(e,n))return!1;this.setState(r)})),g(this,"onDragStop",((e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,d.default)("Draggable: onDragStop: %j",t);const n={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;n.x=e,n.y=t}this.setState(n)})),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:i.default.findDOMNode(this)}render(){const{axis:e,bounds:t,children:n,defaultPosition:a,defaultClassName:i,defaultClassNameDragging:c,defaultClassNameDragged:d,position:p,positionOffset:f,scale:g,...m}=this.props;let b={},v=null;const y=!Boolean(p)||this.state.dragging,w=p||a,S={x:(0,l.canDragX)(this)&&y?this.state.x:w.x,y:(0,l.canDragY)(this)&&y?this.state.y:w.y};this.state.isElementSVG?v=(0,s.createSVGTransform)(S,f):b=(0,s.createCSSTransform)(S,f);const x=(0,o.default)(n.props.className||"",i,{[c]:this.state.dragging,[d]:this.state.dragged});return r.createElement(u.default,h({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(n),{className:x,style:{...n.props.style,...b},transform:v}))}}t.default=m,g(m,"displayName","Draggable"),g(m,"propTypes",{...u.default.propTypes,axis:a.default.oneOf(["both","x","y","none"]),bounds:a.default.oneOfType([a.default.shape({left:a.default.number,right:a.default.number,top:a.default.number,bottom:a.default.number}),a.default.string,a.default.oneOf([!1])]),defaultClassName:a.default.string,defaultClassNameDragging:a.default.string,defaultClassNameDragged:a.default.string,defaultPosition:a.default.shape({x:a.default.number,y:a.default.number}),positionOffset:a.default.shape({x:a.default.oneOfType([a.default.number,a.default.string]),y:a.default.oneOfType([a.default.number,a.default.string])}),position:a.default.shape({x:a.default.number,y:a.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),g(m,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},60:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(959)),a=u(n(688)),i=u(n(398)),o=n(837),s=n(402),l=n(732),c=u(n(988));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f={start:"touchstart",move:"touchmove",stop:"touchend"},h={start:"mousedown",move:"mousemove",stop:"mouseup"};let g=h;class m extends r.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",(e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=t;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,o.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,o.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();const r=(0,o.getTouchIdentifier)(e);this.touchIdentifier=r;const a=(0,s.getControlPosition)(e,r,this);if(null==a)return;const{x:i,y:l}=a,u=(0,s.createCoreData)(this,i,l);(0,c.default)("DraggableCore: handleDragStart: %j",u),(0,c.default)("calling",this.props.onStart),!1!==this.props.onStart(e,u)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,o.addUserSelectStyles)(n),this.dragging=!0,this.lastX=i,this.lastY=l,(0,o.addEvent)(n,g.move,this.handleDrag),(0,o.addEvent)(n,g.stop,this.handleDragStop))})),p(this,"handleDrag",(e=>{const t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:r}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX,t=r-this.lastY;if([e,t]=(0,s.snapToGrid)(this.props.grid,e,t),!e&&!t)return;n=this.lastX+e,r=this.lastY+t}const a=(0,s.createCoreData)(this,n,r);if((0,c.default)("DraggableCore: handleDrag: %j",a),!1!==this.props.onDrag(e,a)&&!1!==this.mounted)this.lastX=n,this.lastY=r;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(e){const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}})),p(this,"handleDragStop",(e=>{if(!this.dragging)return;const t=(0,s.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:r}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX||0,t=r-this.lastY||0;[e,t]=(0,s.snapToGrid)(this.props.grid,e,t),n=this.lastX+e,r=this.lastY+t}const a=(0,s.createCoreData)(this,n,r);if(!1===this.props.onStop(e,a)||!1===this.mounted)return!1;const i=this.findDOMNode();i&&this.props.enableUserSelectHack&&(0,o.removeUserSelectStyles)(i.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,i&&((0,c.default)("DraggableCore: Removing handlers"),(0,o.removeEvent)(i.ownerDocument,g.move,this.handleDrag),(0,o.removeEvent)(i.ownerDocument,g.stop,this.handleDragStop))})),p(this,"onMouseDown",(e=>(g=h,this.handleDragStart(e)))),p(this,"onMouseUp",(e=>(g=h,this.handleDragStop(e)))),p(this,"onTouchStart",(e=>(g=f,this.handleDragStart(e)))),p(this,"onTouchEnd",(e=>(g=f,this.handleDragStop(e))))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,o.addEvent)(e,f.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,o.removeEvent)(t,h.move,this.handleDrag),(0,o.removeEvent)(t,f.move,this.handleDrag),(0,o.removeEvent)(t,h.stop,this.handleDragStop),(0,o.removeEvent)(t,f.stop,this.handleDragStop),(0,o.removeEvent)(e,f.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,o.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:i.default.findDOMNode(this)}render(){return r.cloneElement(r.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=m,p(m,"displayName","DraggableCore"),p(m,"propTypes",{allowAnyClick:a.default.bool,children:a.default.node.isRequired,disabled:a.default.bool,enableUserSelectHack:a.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:a.default.arrayOf(a.default.number),handle:a.default.string,cancel:a.default.string,nodeRef:a.default.object,onStart:a.default.func,onDrag:a.default.func,onStop:a.default.func,onMouseDown:a.default.func,scale:a.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),p(m,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},230:(e,t,n)=>{"use strict";const{default:r,DraggableCore:a}=n(111);e.exports=r,e.exports.default=r,e.exports.DraggableCore=a},837:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=c,t.addEvent=function(e,t,n,r){if(!e)return;const a={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,a):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&c(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){const n=l(e,t,"px");return{[(0,a.browserPrefixToKey)("transform",a.default)]:n}},t.createSVGTransform=function(e,t){return l(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,r.findInArray)(e.targetTouches,(e=>t===e.identifier))||e.changedTouches&&(0,r.findInArray)(e.changedTouches,(e=>t===e.identifier))},t.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},t.getTranslation=l,t.innerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,r.int)(n.paddingTop),t-=(0,r.int)(n.paddingBottom),t},t.innerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,r.int)(n.paddingLeft),t-=(0,r.int)(n.paddingRight),t},t.matchesSelector=s,t.matchesSelectorAndParentsTo=function(e,t,n){let r=e;do{if(s(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},t.offsetXYFromParent=function(e,t,n){const r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-r.left)/n,y:(e.clientY+t.scrollTop-r.top)/n}},t.outerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,r.int)(n.borderTopWidth),t+=(0,r.int)(n.borderBottomWidth),t},t.outerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,r.int)(n.borderLeftWidth),t+=(0,r.int)(n.borderRightWidth),t},t.removeClassName=u,t.removeEvent=function(e,t,n,r){if(!e)return;const a={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,a):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(e)try{if(e.body&&u(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var r=n(732),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(n(350));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}let o="";function s(e,t){return o||(o=(0,r.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,r.isFunction)(e[t])}))),!!(0,r.isFunction)(e[o])&&e[o](t)}function l(e,t,n){let{x:r,y:a}=e,i="translate(".concat(r).concat(n,",").concat(a).concat(n,")");if(t){const e="".concat("string"==typeof t.x?t.x:t.x+n),r="".concat("string"==typeof t.y?t.y:t.y+n);i="translate(".concat(e,", ").concat(r,")")+i}return i}function c(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function u(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},350:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=a,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=r;const n=["Moz","Webkit","O","ms"];function r(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";const r=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!r)return"";if(t in r)return"";for(let e=0;e<n.length;e++)if(a(t,n[e])in r)return n[e];return""}function a(e,t){return t?"".concat(t).concat(function(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}t.default=r()},988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}},402:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){const a=!(0,r.isNum)(e.lastX),o=i(e);return a?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:o,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}},t.createDraggableData=function(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:o}=e.props;o="string"==typeof o?o:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(o);const s=i(e);if("string"==typeof o){const{ownerDocument:e}=s,t=e.defaultView;let n;if(n="parent"===o?s.parentNode:e.querySelector(o),!(n instanceof t.HTMLElement))throw new Error('Bounds selector "'+o+'" could not find an element.');const i=n,l=t.getComputedStyle(s),c=t.getComputedStyle(i);o={left:-s.offsetLeft+(0,r.int)(c.paddingLeft)+(0,r.int)(l.marginLeft),top:-s.offsetTop+(0,r.int)(c.paddingTop)+(0,r.int)(l.marginTop),right:(0,a.innerWidth)(i)-(0,a.outerWidth)(s)-s.offsetLeft+(0,r.int)(c.paddingRight)-(0,r.int)(l.marginRight),bottom:(0,a.innerHeight)(i)-(0,a.outerHeight)(s)-s.offsetTop+(0,r.int)(c.paddingBottom)-(0,r.int)(l.marginBottom)}}return(0,r.isNum)(o.right)&&(t=Math.min(t,o.right)),(0,r.isNum)(o.bottom)&&(n=Math.min(n,o.bottom)),(0,r.isNum)(o.left)&&(t=Math.max(t,o.left)),(0,r.isNum)(o.top)&&(n=Math.max(n,o.top)),[t,n]},t.getControlPosition=function(e,t,n){const r="number"==typeof t?(0,a.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;const o=i(n),s=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,a.offsetXYFromParent)(r||e,s,n.props.scale)},t.snapToGrid=function(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]};var r=n(732),a=n(837);function i(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},732:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},262:(e,t,n)=>{"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}n.r(t),n.d(t,{clsx:()=>a,default:()=>i});const i=a},100:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=p(n(959)),i=p(n(688)),o=n(230),s=n(936),l=n(414),c=n(906),u=n(222),d=p(n(256));function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(f,e);var t,n,i,u,p=(i=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(i);if(u){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,e)});function f(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(b(e=p.call.apply(p,[this].concat(n))),"state",{resizing:null,dragging:null,className:""}),y(b(e),"elementRef",a.default.createRef()),y(b(e),"onDragStart",(function(t,n){var r=n.node,a=e.props,i=a.onDragStart,o=a.transformScale;if(i){var s={top:0,left:0},l=r.offsetParent;if(l){var u=l.getBoundingClientRect(),d=r.getBoundingClientRect(),p=d.left/o,f=u.left/o,h=d.top/o,g=u.top/o;s.left=p-f+l.scrollLeft,s.top=h-g+l.scrollTop,e.setState({dragging:s});var m=(0,c.calcXY)(e.getPositionParams(),s.top,s.left,e.props.w,e.props.h),v=m.x,y=m.y;return i.call(b(e),e.props.i,v,y,{e:t,node:r,newPosition:s})}}})),y(b(e),"onDrag",(function(t,n){var r=n.node,a=n.deltaX,i=n.deltaY,o=e.props.onDrag;if(o){if(!e.state.dragging)throw new Error("onDrag called before onDragStart.");var s=e.state.dragging.top+i,l=e.state.dragging.left+a,u=e.props,d=u.isBounded,p=u.i,f=u.w,h=u.h,g=u.containerWidth,m=e.getPositionParams();if(d){var v=r.offsetParent;if(v){var y=e.props,w=y.margin,S=y.rowHeight,x=v.clientHeight-(0,c.calcGridItemWHPx)(h,S,w[1]);s=(0,c.clamp)(s,0,x);var O=(0,c.calcGridColWidth)(m),_=g-(0,c.calcGridItemWHPx)(f,O,w[0]);l=(0,c.clamp)(l,0,_)}}var C={top:s,left:l};e.setState({dragging:C});var E=(0,c.calcXY)(m,s,l,f,h),P=E.x,D=E.y;return o.call(b(e),p,P,D,{e:t,node:r,newPosition:C})}})),y(b(e),"onDragStop",(function(t,n){var r=n.node,a=e.props.onDragStop;if(a){if(!e.state.dragging)throw new Error("onDragEnd called before onDragStart.");var i=e.props,o=i.w,s=i.h,l=i.i,u=e.state.dragging,d=u.left,p=u.top,f={top:p,left:d};e.setState({dragging:null});var h=(0,c.calcXY)(e.getPositionParams(),p,d,o,s),g=h.x,m=h.y;return a.call(b(e),l,g,m,{e:t,node:r,newPosition:f})}})),y(b(e),"onResizeStop",(function(t,n){e.onResizeHandler(t,n,"onResizeStop")})),y(b(e),"onResizeStart",(function(t,n){e.onResizeHandler(t,n,"onResizeStart")})),y(b(e),"onResize",(function(t,n){e.onResizeHandler(t,n,"onResize")})),e}return t=f,n=[{key:"shouldComponentUpdate",value:function(e,t){if(this.props.children!==e.children)return!0;if(this.props.droppingPosition!==e.droppingPosition)return!0;var n=(0,c.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),r=(0,c.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,t);return!(0,l.fastPositionEqual)(n,r)||this.props.useCSSTransforms!==e.useCSSTransforms}},{key:"componentDidMount",value:function(){this.moveDroppingItem({})}},{key:"componentDidUpdate",value:function(e){this.moveDroppingItem(e)}},{key:"moveDroppingItem",value:function(e){var t=this.props.droppingPosition;if(t){var n=this.elementRef.current;if(n){var r=e.droppingPosition||{left:0,top:0},a=this.state.dragging,i=a&&t.left!==r.left||t.top!==r.top;if(a){if(i){var o=t.left-a.left,s=t.top-a.top;this.onDrag(t.e,{node:n,deltaX:o,deltaY:s})}}else this.onDragStart(t.e,{node:n,deltaX:t.left,deltaY:t.top})}}}},{key:"getPositionParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}},{key:"createStyle",value:function(e){var t,n=this.props,r=n.usePercentages,a=n.containerWidth;return n.useCSSTransforms?t=(0,l.setTransform)(e):(t=(0,l.setTopLeft)(e),r&&(t.left=(0,l.perc)(e.left/a),t.width=(0,l.perc)(e.width/a))),t}},{key:"mixinDraggable",value:function(e,t){return a.default.createElement(o.DraggableCore,{disabled:!t,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}},{key:"mixinResizable",value:function(e,t,n){var r=this.props,i=r.cols,o=r.x,l=r.minW,u=r.minH,d=r.maxW,p=r.maxH,f=r.transformScale,h=r.resizeHandles,g=r.resizeHandle,m=this.getPositionParams(),b=(0,c.calcGridItemPosition)(m,0,0,i-o,0).width,v=(0,c.calcGridItemPosition)(m,0,0,l,u),y=(0,c.calcGridItemPosition)(m,0,0,d,p),w=[v.width,v.height],S=[Math.min(y.width,b),Math.min(y.height,1/0)];return a.default.createElement(s.Resizable,{draggableOpts:{disabled:!n},className:n?void 0:"react-resizable-hide",width:t.width,height:t.height,minConstraints:w,maxConstraints:S,onResizeStop:this.onResizeStop,onResizeStart:this.onResizeStart,onResize:this.onResize,transformScale:f,resizeHandles:h,handle:g},e)}},{key:"onResizeHandler",value:function(e,t,n){var r=t.node,a=t.size,i=this.props[n];if(i){var o=this.props,s=o.cols,l=o.x,u=o.y,d=o.i,p=o.maxH,f=o.minH,h=this.props,g=h.minW,m=h.maxW,b=(0,c.calcWH)(this.getPositionParams(),a.width,a.height,l,u),v=b.w,y=b.h;g=Math.max(g,1),m=Math.min(m,s-l),v=(0,c.clamp)(v,g,m),y=(0,c.clamp)(y,f,p),this.setState({resizing:"onResizeStop"===n?null:a}),i.call(this,d,v,y,{e,node:r,size:a})}}},{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,r=e.w,i=e.h,o=e.isDraggable,s=e.isResizable,l=e.droppingPosition,u=e.useCSSTransforms,p=(0,c.calcGridItemPosition)(this.getPositionParams(),t,n,r,i,this.state),f=a.default.Children.only(this.props.children),g=a.default.cloneElement(f,{ref:this.elementRef,className:(0,d.default)("react-grid-item",f.props.className,this.props.className,{static:this.props.static,resizing:Boolean(this.state.resizing),"react-draggable":o,"react-draggable-dragging":Boolean(this.state.dragging),dropping:Boolean(l),cssTransforms:u}),style:h(h(h({},this.props.style),f.props.style),this.createStyle(p))});return g=this.mixinResizable(g,p,s),this.mixinDraggable(g,o)}}],n&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.default.Component);t.default=w,y(w,"propTypes",{children:i.default.element,cols:i.default.number.isRequired,containerWidth:i.default.number.isRequired,rowHeight:i.default.number.isRequired,margin:i.default.array.isRequired,maxRows:i.default.number.isRequired,containerPadding:i.default.array.isRequired,x:i.default.number.isRequired,y:i.default.number.isRequired,w:i.default.number.isRequired,h:i.default.number.isRequired,minW:function(e,t){var n=e[t];return"number"!=typeof n?new Error("minWidth not Number"):n>e.w||n>e.maxW?new Error("minWidth larger than item width/maxWidth"):void 0},maxW:function(e,t){var n=e[t];return"number"!=typeof n?new Error("maxWidth not Number"):n<e.w||n<e.minW?new Error("maxWidth smaller than item width/minWidth"):void 0},minH:function(e,t){var n=e[t];return"number"!=typeof n?new Error("minHeight not Number"):n>e.h||n>e.maxH?new Error("minHeight larger than item height/maxHeight"):void 0},maxH:function(e,t){var n=e[t];return"number"!=typeof n?new Error("maxHeight not Number"):n<e.h||n<e.minH?new Error("maxHeight smaller than item height/minHeight"):void 0},i:i.default.string.isRequired,resizeHandles:u.resizeHandleAxesType,resizeHandle:u.resizeHandleType,onDragStop:i.default.func,onDragStart:i.default.func,onDrag:i.default.func,onResizeStop:i.default.func,onResizeStart:i.default.func,onResize:i.default.func,isDraggable:i.default.bool.isRequired,isResizable:i.default.bool.isRequired,isBounded:i.default.bool.isRequired,static:i.default.bool,useCSSTransforms:i.default.bool.isRequired,transformScale:i.default.number,className:i.default.string,handle:i.default.string,cancel:i.default.string,droppingPosition:i.default.shape({e:i.default.object.isRequired,left:i.default.number.isRequired,top:i.default.number.isRequired})}),y(w,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1})},482:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n(959)),i=d(n(842)),o=d(n(256)),s=n(414),l=n(906),c=d(n(100)),u=d(n(222));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x="react-grid-layout",O=!1;try{O=/firefox/i.test(navigator.userAgent)}catch(e){}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(_,e);var t,n,u,d,p,f=(d=_,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(d);if(p){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,e)});function _(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S(y(e=f.call.apply(f,[this].concat(n))),"state",{activeDrag:null,layout:(0,s.synchronizeLayoutWithChildren)(e.props.layout,e.props.children,e.props.cols,(0,s.compactType)(e.props),e.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,droppingDOMNode:null,children:[]}),S(y(e),"dragEnterCounter",0),S(y(e),"onDragStart",(function(t,n,r,a){var i=a.e,o=a.node,l=e.state.layout,c=(0,s.getLayoutItem)(l,t);if(c)return e.setState({oldDragItem:(0,s.cloneLayoutItem)(c),oldLayout:l}),e.props.onDragStart(l,c,c,null,i,o)})),S(y(e),"onDrag",(function(t,n,r,a){var i=a.e,o=a.node,l=e.state.oldDragItem,c=e.state.layout,u=e.props,d=u.cols,p=u.allowOverlap,f=u.preventCollision,h=(0,s.getLayoutItem)(c,t);if(h){var g={w:h.w,h:h.h,x:h.x,y:h.y,placeholder:!0,i:t};c=(0,s.moveElement)(c,h,n,r,!0,f,(0,s.compactType)(e.props),d,p),e.props.onDrag(c,l,h,g,i,o),e.setState({layout:p?c:(0,s.compact)(c,(0,s.compactType)(e.props),d),activeDrag:g})}})),S(y(e),"onDragStop",(function(t,n,r,a){var i=a.e,o=a.node;if(e.state.activeDrag){var l=e.state.oldDragItem,c=e.state.layout,u=e.props,d=u.cols,p=u.preventCollision,f=u.allowOverlap,h=(0,s.getLayoutItem)(c,t);if(h){c=(0,s.moveElement)(c,h,n,r,!0,p,(0,s.compactType)(e.props),d,f),e.props.onDragStop(c,l,h,null,i,o);var g=f?c:(0,s.compact)(c,(0,s.compactType)(e.props),d),m=e.state.oldLayout;e.setState({activeDrag:null,layout:g,oldDragItem:null,oldLayout:null}),e.onLayoutMaybeChanged(g,m)}}})),S(y(e),"onResizeStart",(function(t,n,r,a){var i=a.e,o=a.node,l=e.state.layout,c=(0,s.getLayoutItem)(l,t);c&&(e.setState({oldResizeItem:(0,s.cloneLayoutItem)(c),oldLayout:e.state.layout}),e.props.onResizeStart(l,c,c,null,i,o))})),S(y(e),"onResize",(function(t,n,r,a){var i=a.e,o=a.node,l=e.state,c=l.layout,u=l.oldResizeItem,d=e.props,p=d.cols,f=d.preventCollision,m=d.allowOverlap,b=(0,s.withLayoutItem)(c,t,(function(e){var t;if(f&&!m){var a=(0,s.getAllCollisions)(c,h(h({},e),{},{w:n,h:r})).filter((function(t){return t.i!==e.i}));if(t=a.length>0){var i=1/0,o=1/0;a.forEach((function(t){t.x>e.x&&(i=Math.min(i,t.x)),t.y>e.y&&(o=Math.min(o,t.y))})),Number.isFinite(i)&&(e.w=i-e.x),Number.isFinite(o)&&(e.h=o-e.y)}}return t||(e.w=n,e.h=r),e})),v=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(b,2),y=v[0],w=v[1];if(w){var S={w:w.w,h:w.h,x:w.x,y:w.y,static:!0,i:t};e.props.onResize(y,u,w,S,i,o),e.setState({layout:m?y:(0,s.compact)(y,(0,s.compactType)(e.props),p),activeDrag:S})}})),S(y(e),"onResizeStop",(function(t,n,r,a){var i=a.e,o=a.node,l=e.state,c=l.layout,u=l.oldResizeItem,d=e.props,p=d.cols,f=d.allowOverlap,h=(0,s.getLayoutItem)(c,t);e.props.onResizeStop(c,u,h,null,i,o);var g=f?c:(0,s.compact)(c,(0,s.compactType)(e.props),p),m=e.state.oldLayout;e.setState({activeDrag:null,layout:g,oldResizeItem:null,oldLayout:null}),e.onLayoutMaybeChanged(g,m)})),S(y(e),"onDragOver",(function(t){var n;if(t.preventDefault(),t.stopPropagation(),O&&(null===(n=t.nativeEvent.target)||void 0===n||!n.classList.contains(x)))return!1;var r=e.props,i=r.droppingItem,o=r.onDropDragOver,s=r.margin,c=r.cols,u=r.rowHeight,d=r.maxRows,p=r.width,f=r.containerPadding,b=r.transformScale,v=null==o?void 0:o(t);if(!1===v)return e.state.droppingDOMNode&&e.removeDroppingPlaceholder(),!1;var y,w=h(h({},i),v),S=e.state.layout,_=t.nativeEvent,C=_.layerX,E=_.layerY,P={left:C/b,top:E/b,e:t};if(e.state.droppingDOMNode){if(e.state.droppingPosition){var D=e.state.droppingPosition,k=D.left,T=D.top;(k!=C||T!=E)&&e.setState({droppingPosition:P})}}else{var R={cols:c,margin:s,maxRows:d,rowHeight:u,containerWidth:p,containerPadding:f||s},j=(0,l.calcXY)(R,E,C,w.w,w.h);e.setState({droppingDOMNode:a.createElement("div",{key:w.i}),droppingPosition:P,layout:[].concat((y=S,function(e){if(Array.isArray(e))return m(e)}(y)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(y)||g(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[h(h({},w),{},{x:j.x,y:j.y,static:!1,isDraggable:!0})])})}})),S(y(e),"removeDroppingPlaceholder",(function(){var t=e.props,n=t.droppingItem,r=t.cols,a=e.state.layout,i=(0,s.compact)(a.filter((function(e){return e.i!==n.i})),(0,s.compactType)(e.props),r);e.setState({layout:i,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})})),S(y(e),"onDragLeave",(function(t){t.preventDefault(),t.stopPropagation(),e.dragEnterCounter--,0===e.dragEnterCounter&&e.removeDroppingPlaceholder()})),S(y(e),"onDragEnter",(function(t){t.preventDefault(),t.stopPropagation(),e.dragEnterCounter++})),S(y(e),"onDrop",(function(t){t.preventDefault(),t.stopPropagation();var n=e.props.droppingItem,r=e.state.layout,a=r.find((function(e){return e.i===n.i}));e.dragEnterCounter=0,e.removeDroppingPlaceholder(),e.props.onDrop(r,a,t)})),e}return t=_,u=[{key:"getDerivedStateFromProps",value:function(e,t){var n;return t.activeDrag?null:((0,i.default)(e.layout,t.propsLayout)&&e.compactType===t.compactType?(0,s.childrenEqual)(e.children,t.children)||(n=t.layout):n=e.layout,n?{layout:(0,s.synchronizeLayoutWithChildren)(n,e.children,e.cols,(0,s.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null)}}],(n=[{key:"componentDidMount",value:function(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.children!==e.children||!(0,s.fastRGLPropsEqual)(this.props,e,i.default)||this.state.activeDrag!==t.activeDrag||this.state.mounted!==t.mounted||this.state.droppingPosition!==t.droppingPosition}},{key:"componentDidUpdate",value:function(e,t){if(!this.state.activeDrag){var n=this.state.layout,r=t.layout;this.onLayoutMaybeChanged(n,r)}}},{key:"containerHeight",value:function(){if(this.props.autoSize){var e=(0,s.bottom)(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}}},{key:"onLayoutMaybeChanged",value:function(e,t){t||(t=this.state.layout),(0,i.default)(t,e)||this.props.onLayoutChange(e)}},{key:"placeholder",value:function(){var e=this.state.activeDrag;if(!e)return null;var t=this.props,n=t.width,r=t.cols,i=t.margin,o=t.containerPadding,s=t.rowHeight,l=t.maxRows,u=t.useCSSTransforms,d=t.transformScale;return a.createElement(c.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:"react-grid-placeholder",containerWidth:n,cols:r,margin:i,containerPadding:o||i,maxRows:l,rowHeight:s,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:u,transformScale:d},a.createElement("div",null))}},{key:"processGridItem",value:function(e,t){if(e&&e.key){var n=(0,s.getLayoutItem)(this.state.layout,String(e.key));if(!n)return null;var r=this.props,i=r.width,o=r.cols,l=r.margin,u=r.containerPadding,d=r.rowHeight,p=r.maxRows,f=r.isDraggable,h=r.isResizable,g=r.isBounded,m=r.useCSSTransforms,b=r.transformScale,v=r.draggableCancel,y=r.draggableHandle,w=r.resizeHandles,S=r.resizeHandle,x=this.state,O=x.mounted,_=x.droppingPosition,C="boolean"==typeof n.isDraggable?n.isDraggable:!n.static&&f,E="boolean"==typeof n.isResizable?n.isResizable:!n.static&&h,P=n.resizeHandles||w,D=C&&g&&!1!==n.isBounded;return a.createElement(c.default,{containerWidth:i,cols:o,margin:l,containerPadding:u||l,maxRows:p,rowHeight:d,cancel:v,handle:y,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:C,isResizable:E,isBounded:D,useCSSTransforms:m&&O,usePercentages:!O,transformScale:b,w:n.w,h:n.h,x:n.x,y:n.y,i:n.i,minH:n.minH,minW:n.minW,maxH:n.maxH,maxW:n.maxW,static:n.static,droppingPosition:t?_:void 0,resizeHandles:P,resizeHandle:S},e)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.style,i=t.isDroppable,l=t.innerRef,c=(0,o.default)(x,n),u=h({height:this.containerHeight()},r);return a.createElement("div",{ref:l,className:c,style:u,onDrop:i?this.onDrop:s.noop,onDragLeave:i?this.onDragLeave:s.noop,onDragEnter:i?this.onDragEnter:s.noop,onDragOver:i?this.onDragOver:s.noop},a.Children.map(this.props.children,(function(t){return e.processGridItem(t)})),i&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}])&&b(t.prototype,n),u&&b(t,u),Object.defineProperty(t,"prototype",{writable:!1}),_}(a.Component);t.default=_,S(_,"displayName","ReactGridLayout"),S(_,"propTypes",u.default),S(_,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:s.noop,onDragStart:s.noop,onDrag:s.noop,onDragStop:s.noop,onResizeStart:s.noop,onResize:s.noop,onResizeStop:s.noop,onDrop:s.noop,onDropDragOver:s.noop})},222:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resizeHandleType=t.resizeHandleAxesType=t.default=void 0;var r=i(n(688)),a=i(n(959));function i(e){return e&&e.__esModule?e:{default:e}}var o=r.default.arrayOf(r.default.oneOf(["s","w","e","n","sw","nw","se","ne"]));t.resizeHandleAxesType=o;var s=r.default.oneOfType([r.default.node,r.default.func]);t.resizeHandleType=s;var l={className:r.default.string,style:r.default.object,width:r.default.number,autoSize:r.default.bool,cols:r.default.number,draggableCancel:r.default.string,draggableHandle:r.default.string,verticalCompact:function(e){e.verticalCompact},compactType:r.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;void 0!==t&&n(414).validateLayout(t,"layout")},margin:r.default.arrayOf(r.default.number),containerPadding:r.default.arrayOf(r.default.number),rowHeight:r.default.number,maxRows:r.default.number,isBounded:r.default.bool,isDraggable:r.default.bool,isResizable:r.default.bool,allowOverlap:r.default.bool,preventCollision:r.default.bool,useCSSTransforms:r.default.bool,transformScale:r.default.number,isDroppable:r.default.bool,resizeHandles:o,resizeHandle:s,onLayoutChange:r.default.func,onDragStart:r.default.func,onDrag:r.default.func,onDragStop:r.default.func,onResizeStart:r.default.func,onResize:r.default.func,onResizeStop:r.default.func,onDrop:r.default.func,droppingItem:r.default.shape({i:r.default.string.isRequired,w:r.default.number.isRequired,h:r.default.number.isRequired}),children:function(e,t){var n=e[t],r={};a.default.Children.forEach(n,(function(e){if(null!=(null==e?void 0:e.key)){if(r[e.key])throw new Error('Duplicate child key "'+e.key+'" found! This will cause problems in ReactGridLayout.');r[e.key]=!0}}))},innerRef:r.default.any};t.default=l},636:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.default=void 0;var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n(959)),i=d(n(688)),o=d(n(842)),s=n(414),l=n(544),c=d(n(482)),u=["breakpoint","breakpoints","cols","layouts","margin","containerPadding","onBreakpointChange","onLayoutChange","onWidthChange"];function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){return Object.prototype.toString.call(e)};function x(e,t){return null==e?null:Array.isArray(e)?e:e[t]}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(S,e);var t,n,i,d,p,h=(d=S,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(d);if(p){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function S(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(v(e=h.call.apply(h,[this].concat(n))),"state",e.generateInitialState()),w(v(e),"onLayoutChange",(function(t){e.props.onLayoutChange(t,g(g({},e.props.layouts),{},w({},e.state.breakpoint,t)))})),e}return t=S,i=[{key:"getDerivedStateFromProps",value:function(e,t){if(!(0,o.default)(e.layouts,t.layouts)){var n=t.breakpoint,r=t.cols;return{layout:(0,l.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,n,n,r,e.compactType),layouts:e.layouts}}return null}}],(n=[{key:"generateInitialState",value:function(){var e=this.props,t=e.width,n=e.breakpoints,r=e.layouts,a=e.cols,i=(0,l.getBreakpointFromWidth)(n,t),o=(0,l.getColsFromBreakpoint)(i,a),s=!1===this.props.verticalCompact?null:this.props.compactType;return{layout:(0,l.findOrGenerateResponsiveLayout)(r,n,i,i,o,s),breakpoint:i,cols:o}}},{key:"componentDidUpdate",value:function(e){this.props.width==e.width&&this.props.breakpoint===e.breakpoint&&(0,o.default)(this.props.breakpoints,e.breakpoints)&&(0,o.default)(this.props.cols,e.cols)||this.onWidthChange(e)}},{key:"onWidthChange",value:function(e){var t=this.props,n=t.breakpoints,r=t.cols,a=t.layouts,i=t.compactType,o=this.props.breakpoint||(0,l.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),c=this.state.breakpoint,u=(0,l.getColsFromBreakpoint)(o,r),d=g({},a);if(c!==o||e.breakpoints!==n||e.cols!==r){c in d||(d[c]=(0,s.cloneLayout)(this.state.layout));var p=(0,l.findOrGenerateResponsiveLayout)(d,n,o,c,u,i);p=(0,s.synchronizeLayoutWithChildren)(p,this.props.children,u,i,this.props.allowOverlap),d[o]=p,this.props.onLayoutChange(p,d),this.props.onBreakpointChange(o,u),this.setState({breakpoint:o,layout:p,cols:u})}var f=x(this.props.margin,o),h=x(this.props.containerPadding,o);this.props.onWidthChange(this.props.width,f,u,h)}},{key:"render",value:function(){var e=this.props,t=(e.breakpoint,e.breakpoints,e.cols,e.layouts,e.margin),n=e.containerPadding,r=(e.onBreakpointChange,e.onLayoutChange,e.onWidthChange,function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,u));return a.createElement(c.default,f({},r,{margin:x(t,this.state.breakpoint),containerPadding:x(n,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}])&&m(t.prototype,n),i&&m(t,i),Object.defineProperty(t,"prototype",{writable:!1}),S}(a.Component);t.default=O,w(O,"propTypes",{breakpoint:i.default.string,breakpoints:i.default.object,allowOverlap:i.default.bool,cols:i.default.object,margin:i.default.oneOfType([i.default.array,i.default.object]),containerPadding:i.default.oneOfType([i.default.array,i.default.object]),layouts:function(e,t){if("[object Object]"!==S(e[t]))throw new Error("Layout property must be an object. Received: "+S(e[t]));Object.keys(e[t]).forEach((function(t){if(!(t in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,s.validateLayout)(e.layouts[t],"layouts."+t)}))},width:i.default.number.isRequired,onBreakpointChange:i.default.func,onLayoutChange:i.default.func,onWidthChange:i.default.func}),w(O,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:s.noop,onLayoutChange:s.noop,onWidthChange:s.noop})},906:(e,t)=>{"use strict";function n(e){var t=e.margin,n=e.containerPadding,r=e.containerWidth,a=e.cols;return(r-t[0]*(a-1)-2*n[0])/a}function r(e,t,n){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*n):e}function a(e,t,n){return Math.max(Math.min(e,n),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.calcGridColWidth=n,t.calcGridItemPosition=function(e,t,a,i,o,s){var l=e.margin,c=e.containerPadding,u=e.rowHeight,d=n(e),p={};return s&&s.resizing?(p.width=Math.round(s.resizing.width),p.height=Math.round(s.resizing.height)):(p.width=r(i,d,l[0]),p.height=r(o,u,l[1])),s&&s.dragging?(p.top=Math.round(s.dragging.top),p.left=Math.round(s.dragging.left)):(p.top=Math.round((u+l[1])*a+c[1]),p.left=Math.round((d+l[0])*t+c[0])),p},t.calcGridItemWHPx=r,t.calcWH=function(e,t,r,i,o){var s=e.margin,l=e.maxRows,c=e.cols,u=e.rowHeight,d=n(e),p=Math.round((t+s[0])/(d+s[0])),f=Math.round((r+s[1])/(u+s[1]));return{w:p=a(p,0,c-i),h:f=a(f,0,l-o)}},t.calcXY=function(e,t,r,i,o){var s=e.margin,l=e.cols,c=e.rowHeight,u=e.maxRows,d=n(e),p=Math.round((r-s[0])/(d+s[0])),f=Math.round((t-s[1])/(c+s[1]));return{x:p=a(p,0,l-i),y:f=a(f,0,u-o)}},t.clamp=a},805:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}t.default=function(e){var t;return t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(v,t);var n,i,l,c,b=(n=v,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(i){var a=h(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,e)});function v(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(f(e=b.call.apply(b,[this].concat(n))),"state",{width:1280}),g(f(e),"elementRef",a.createRef()),g(f(e),"mounted",!1),g(f(e),"onWindowResize",(function(){if(e.mounted){var t=e.elementRef.current;t instanceof HTMLElement&&t.offsetWidth&&e.setState({width:t.offsetWidth})}})),e}return l=v,(c=[{key:"componentDidMount",value:function(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),this.onWindowResize()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize)}},{key:"render",value:function(){var t=this.props,n=t.measureBeforeMount,r=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,s);return n&&!this.mounted?a.createElement("div",{className:(0,o.default)(this.props.className,m),style:this.props.style,ref:this.elementRef}):a.createElement(e,u({innerRef:this.elementRef},r,this.state))}}])&&d(l.prototype,c),Object.defineProperty(l,"prototype",{writable:!1}),v}(a.Component),g(t,"defaultProps",{measureBeforeMount:!1}),g(t,"propTypes",{measureBeforeMount:i.default.bool}),t};var a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(n(959)),i=l(n(688)),o=l(n(256)),s=["measureBeforeMount"];function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m="react-grid-layout"},434:e=>{e.exports=function(e,t,n){return e===t||e.className===t.className&&n(e.style,t.style)&&e.width===t.width&&e.autoSize===t.autoSize&&e.cols===t.cols&&e.draggableCancel===t.draggableCancel&&e.draggableHandle===t.draggableHandle&&n(e.verticalCompact,t.verticalCompact)&&n(e.compactType,t.compactType)&&n(e.layout,t.layout)&&n(e.margin,t.margin)&&n(e.containerPadding,t.containerPadding)&&e.rowHeight===t.rowHeight&&e.maxRows===t.maxRows&&e.isBounded===t.isBounded&&e.isDraggable===t.isDraggable&&e.isResizable===t.isResizable&&e.allowOverlap===t.allowOverlap&&e.preventCollision===t.preventCollision&&e.useCSSTransforms===t.useCSSTransforms&&e.transformScale===t.transformScale&&e.isDroppable===t.isDroppable&&n(e.resizeHandles,t.resizeHandles)&&n(e.resizeHandle,t.resizeHandle)&&e.onLayoutChange===t.onLayoutChange&&e.onDragStart===t.onDragStart&&e.onDrag===t.onDrag&&e.onDragStop===t.onDragStop&&e.onResizeStart===t.onResizeStart&&e.onResize===t.onResize&&e.onResizeStop===t.onResizeStop&&e.onDrop===t.onDrop&&n(e.droppingItem,t.droppingItem)&&n(e.innerRef,t.innerRef)}},544:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findOrGenerateResponsiveLayout=function(e,t,n,i,o,s){if(e[n])return(0,r.cloneLayout)(e[n]);for(var l=e[i],c=a(t),u=c.slice(c.indexOf(n)),d=0,p=u.length;d<p;d++){var f=u[d];if(e[f]){l=e[f];break}}return l=(0,r.cloneLayout)(l||[]),(0,r.compact)((0,r.correctBounds)(l,{cols:o}),s,o)},t.getBreakpointFromWidth=function(e,t){for(var n=a(e),r=n[0],i=1,o=n.length;i<o;i++){var s=n[i];t>e[s]&&(r=s)}return r},t.getColsFromBreakpoint=function(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]},t.sortBreakpoints=a;var r=n(414);function a(e){return Object.keys(e).sort((function(t,n){return e[t]-e[n]}))}},414:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bottom=d,t.childrenEqual=function(e,t){return(0,r.default)(a.default.Children.map(e,(function(e){return null==e?void 0:e.key})),a.default.Children.map(t,(function(e){return null==e?void 0:e.key})))},t.cloneLayout=p,t.cloneLayoutItem=h,t.collides=m,t.compact=b,t.compactItem=w,t.compactType=function(e){var t=e||{},n=t.verticalCompact,r=t.compactType;return!1===n?null:r},t.correctBounds=S,t.fastPositionEqual=function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height},t.fastRGLPropsEqual=void 0,t.getAllCollisions=_,t.getFirstCollision=O,t.getLayoutItem=x,t.getStatics=C,t.modifyLayout=f,t.moveElement=E,t.moveElementAwayFromCollision=P,t.noop=void 0,t.perc=function(e){return 100*e+"%"},t.setTopLeft=function(e){var t=e.top,n=e.left,r=e.width,a=e.height;return{top:"".concat(t,"px"),left:"".concat(n,"px"),width:"".concat(r,"px"),height:"".concat(a,"px"),position:"absolute"}},t.setTransform=function(e){var t=e.top,n=e.left,r=e.width,a=e.height,i="translate(".concat(n,"px,").concat(t,"px)");return{transform:i,WebkitTransform:i,MozTransform:i,msTransform:i,OTransform:i,width:"".concat(r,"px"),height:"".concat(a,"px"),position:"absolute"}},t.sortLayoutItems=D,t.sortLayoutItemsByColRow=T,t.sortLayoutItemsByRowCol=k,t.synchronizeLayoutWithChildren=function(e,t,n,r,i){e=e||[];var o=[];a.default.Children.forEach(t,(function(t){if(null!=(null==t?void 0:t.key)){var n=x(e,String(t.key));if(n)o.push(h(n));else{!c&&t.props._grid&&console.warn("`_grid` properties on children have been deprecated as of React 15.2. Please use `data-grid` or add your properties directly to the `layout`.");var r=t.props["data-grid"]||t.props._grid;r?(c||R([r],"ReactGridLayout.children"),o.push(h(s(s({},r),{},{i:t.key})))):o.push(h({w:1,h:1,x:0,y:d(o),i:String(t.key)}))}}}));var l=S(o,{cols:n});return i?l:b(l,r,n)},t.validateLayout=R,t.withLayoutItem=function(e,t,n){var r=x(e,t);return r?[e=f(e,r=n(h(r))),r]:[e,null]};var r=i(n(842)),a=i(n(959));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=!0,u=!1;function d(e){for(var t,n=0,r=0,a=e.length;r<a;r++)(t=e[r].y+e[r].h)>n&&(n=t);return n}function p(e){for(var t=Array(e.length),n=0,r=e.length;n<r;n++)t[n]=h(e[n]);return t}function f(e,t){for(var n=Array(e.length),r=0,a=e.length;r<a;r++)t.i===e[r].i?n[r]=t:n[r]=e[r];return n}function h(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:Boolean(e.moved),static:Boolean(e.static),isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}var g=n(434);function m(e,t){return!(e.i===t.i||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function b(e,t,n){for(var r=C(e),a=D(e,t),i=Array(e.length),o=0,s=a.length;o<s;o++){var l=h(a[o]);l.static||(l=w(r,l,t,n,a),r.push(l)),i[e.indexOf(a[o])]=l,l.moved=!1}return i}t.fastRGLPropsEqual=g;var v={x:"w",y:"h"};function y(e,t,n,r){var a=v[r];t[r]+=1;for(var i=e.map((function(e){return e.i})).indexOf(t.i)+1;i<e.length;i++){var o=e[i];if(!o.static){if(o.y>t.y+t.h)break;m(t,o)&&y(e,o,n+t[a],r)}}t[r]=n}function w(e,t,n,r,a){var i,o="horizontal"===n;if("vertical"===n)for(t.y=Math.min(d(e),t.y);t.y>0&&!O(e,t);)t.y--;else if(o)for(;t.x>0&&!O(e,t);)t.x--;for(;i=O(e,t);)o?y(a,t,i.x+i.w,"x"):y(a,t,i.y+i.h,"y"),o&&t.x+t.w>r&&(t.x=r-t.w,t.y++);return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function S(e,t){for(var n=C(e),r=0,a=e.length;r<a;r++){var i=e[r];if(i.x+i.w>t.cols&&(i.x=t.cols-i.w),i.x<0&&(i.x=0,i.w=t.cols),i.static)for(;O(n,i);)i.y++;else n.push(i)}return e}function x(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n].i===t)return e[n]}function O(e,t){for(var n=0,r=e.length;n<r;n++)if(m(e[n],t))return e[n]}function _(e,t){return e.filter((function(e){return m(e,t)}))}function C(e){return e.filter((function(e){return e.static}))}function E(e,t,n,r,a,i,o,s,l){if(t.static&&!0!==t.isDraggable)return e;if(t.y===r&&t.x===n)return e;j("Moving element ".concat(t.i," to [").concat(String(n),",").concat(String(r),"] from [").concat(t.x,",").concat(t.y,"]"));var c=t.x,u=t.y;"number"==typeof n&&(t.x=n),"number"==typeof r&&(t.y=r),t.moved=!0;var d=D(e,o);("vertical"===o&&"number"==typeof r?u>=r:"horizontal"===o&&"number"==typeof n&&c>=n)&&(d=d.reverse());var f=_(d,t),h=f.length>0;if(h&&l)return p(e);if(h&&i)return j("Collision prevented on ".concat(t.i,", reverting.")),t.x=c,t.y=u,t.moved=!1,e;for(var g=0,m=f.length;g<m;g++){var b=f[g];j("Resolving collision between ".concat(t.i," at [").concat(t.x,",").concat(t.y,"] and ").concat(b.i," at [").concat(b.x,",").concat(b.y,"]")),b.moved||(e=b.static?P(e,b,t,a,o,s):P(e,t,b,a,o,s))}return e}function P(e,t,n,r,a,i){var o="horizontal"===a,s="horizontal"!==a,l=t.static;if(r){r=!1;var c={x:o?Math.max(t.x-n.w,0):n.x,y:s?Math.max(t.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"};if(!O(e,c))return j("Doing reverse collision on ".concat(n.i," up to [").concat(c.x,",").concat(c.y,"].")),E(e,n,o?c.x:void 0,s?c.y:void 0,r,l,a,i)}return E(e,n,o?n.x+1:void 0,s?n.y+1:void 0,r,l,a,i)}function D(e,t){return"horizontal"===t?T(e):"vertical"===t?k(e):e}function k(e){return e.slice(0).sort((function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1}))}function T(e){return e.slice(0).sort((function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1}))}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Layout",n=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var r=0,a=e.length;r<a;r++)for(var i=e[r],o=0;o<n.length;o++)if("number"!=typeof i[n[o]])throw new Error("ReactGridLayout: "+t+"["+r+"]."+n[o]+" must be a number!")}function j(){var e;u&&(e=console).log.apply(e,arguments)}t.noop=function(){}},548:(e,t,n)=>{e.exports=n(482).default,e.exports.utils=n(414),e.exports.Responsive=n(636).default,e.exports.Responsive.utils=n(544),e.exports.WidthProvider=n(805).default},256:(e,t,n)=>{"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}n.r(t),n.d(t,{clsx:()=>a,default:()=>i});const i=a},299:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,b=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case i:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case p:case m:case g:case l:return e;default:return t}}case a:return t}}}function x(e){return S(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=p,t.Fragment=i,t.Lazy=m,t.Memo=g,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return x(e)||S(e)===u},t.isConcurrentMode=x,t.isContextConsumer=function(e){return S(e)===c},t.isContextProvider=function(e){return S(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return S(e)===p},t.isFragment=function(e){return S(e)===i},t.isLazy=function(e){return S(e)===m},t.isMemo=function(e){return S(e)===g},t.isPortal=function(e){return S(e)===a},t.isProfiler=function(e){return S(e)===s},t.isStrictMode=function(e){return S(e)===o},t.isSuspense=function(e){return S(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===s||e===o||e===f||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===p||e.$$typeof===v||e.$$typeof===y||e.$$typeof===w||e.$$typeof===b)},t.typeOf=S},271:(e,t,n)=>{"use strict";e.exports=n(299)},794:(e,t,n)=>{"use strict";t.__esModule=!0,t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(959)),a=n(230),i=n(954),o=n(333),s=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var h=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var l=o.prototype;return l.componentWillUnmount=function(){this.resetData()},l.resetData=function(){this.lastHandleRect=this.slack=null},l.runConstraints=function(e,t){var n=this.props,r=n.minConstraints,a=n.maxConstraints,i=n.lockAspectRatio;if(!r&&!a&&!i)return[e,t];if(i){var o=this.props.width/this.props.height,s=e-this.props.width,l=t-this.props.height;Math.abs(s)>Math.abs(l*o)?t=e/o:e=t*o}var c=e,u=t,d=this.slack||[0,0],p=d[0],f=d[1];return e+=p,t+=f,r&&(e=Math.max(r[0],e),t=Math.max(r[1],t)),a&&(e=Math.min(a[0],e),t=Math.min(a[1],t)),this.slack=[p+(c-e),f+(u-t)],[e,t]},l.resizeHandler=function(e,t){var n=this;return function(r,a){var i=a.node,o=a.deltaX,s=a.deltaY;"onResizeStart"===e&&n.resetData();var l=("both"===n.props.axis||"x"===n.props.axis)&&"n"!==t&&"s"!==t,c=("both"===n.props.axis||"y"===n.props.axis)&&"e"!==t&&"w"!==t;if(l||c){var u=t[0],d=t[t.length-1],p=i.getBoundingClientRect();null!=n.lastHandleRect&&("w"===d&&(o+=p.left-n.lastHandleRect.left),"n"===u&&(s+=p.top-n.lastHandleRect.top)),n.lastHandleRect=p,"w"===d&&(o=-o),"n"===u&&(s=-s);var f=n.props.width+(l?o/n.props.transformScale:0),h=n.props.height+(c?s/n.props.transformScale:0),g=n.runConstraints(f,h);f=g[0],h=g[1];var m=f!==n.props.width||h!==n.props.height,b="function"==typeof n.props[e]?n.props[e]:null;b&&!("onResize"===e&&!m)&&(null==r.persist||r.persist(),b(r,{node:i,size:{width:f,height:h},handle:t})),"onResizeStop"===e&&n.resetData()}}},l.renderResizeHandle=function(e,t){var n=this.props.handle;if(!n)return r.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"==typeof n)return n(e,t);var a=d({ref:t},"string"==typeof n.type?{}:{handleAxis:e});return r.cloneElement(n,a)},l.render=function(){var e=this,t=this.props,n=t.children,o=t.className,l=t.draggableOpts,u=(t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart,t.resizeHandles),p=(t.transformScale,function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,s));return(0,i.cloneElement)(n,d(d({},p),{},{className:(o?o+" ":"")+"react-resizable",children:[].concat(n.props.children,u.map((function(t){var n,i=null!=(n=e.handleRefs[t])?n:e.handleRefs[t]=r.createRef();return r.createElement(a.DraggableCore,c({},l,{nodeRef:i,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,i))})))}))},o}(r.Component);t.default=h,h.propTypes=o.resizableProps,h.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},609:(e,t,n)=>{"use strict";t.default=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(959)),a=l(n(688)),i=l(n(794)),o=n(333),s=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var g=function(e){var t,n;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,n){var r=n.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(r,(function(){return t.props.onResize&&t.props.onResize(e,n)}))):t.setState(r)},t}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n),a.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},a.prototype.render=function(){var e=this.props,t=e.handle,n=e.handleSize,a=(e.onResize,e.onResizeStart),o=e.onResizeStop,l=e.draggableOpts,c=e.minConstraints,d=e.maxConstraints,f=e.lockAspectRatio,h=e.axis,g=(e.width,e.height,e.resizeHandles),m=e.style,b=e.transformScale,v=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,s);return r.createElement(i.default,{axis:h,draggableOpts:l,handle:t,handleSize:n,height:this.state.height,lockAspectRatio:f,maxConstraints:d,minConstraints:c,onResizeStart:a,onResize:this.onResize,onResizeStop:o,resizeHandles:g,transformScale:b,width:this.state.width},r.createElement("div",u({},v,{style:p(p({},m),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},a}(r.Component);t.default=g,g.propTypes=p(p({},o.resizableProps),{},{children:a.default.element})},333:(e,t,n)=>{"use strict";t.__esModule=!0,t.resizableProps=void 0;var r,a=(r=n(688))&&r.__esModule?r:{default:r};n(230);var i={axis:a.default.oneOf(["both","x","y","none"]),className:a.default.string,children:a.default.element.isRequired,draggableOpts:a.default.shape({allowAnyClick:a.default.bool,cancel:a.default.string,children:a.default.node,disabled:a.default.bool,enableUserSelectHack:a.default.bool,offsetParent:a.default.node,grid:a.default.arrayOf(a.default.number),handle:a.default.string,nodeRef:a.default.object,onStart:a.default.func,onDrag:a.default.func,onStop:a.default.func,onMouseDown:a.default.func,scale:a.default.number}),height:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return"both"===i.axis||"y"===i.axis?(r=a.default.number).isRequired.apply(r,t):a.default.number.apply(a.default,t)},handle:a.default.oneOfType([a.default.node,a.default.func]),handleSize:a.default.arrayOf(a.default.number),lockAspectRatio:a.default.bool,maxConstraints:a.default.arrayOf(a.default.number),minConstraints:a.default.arrayOf(a.default.number),onResizeStop:a.default.func,onResizeStart:a.default.func,onResize:a.default.func,resizeHandles:a.default.arrayOf(a.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:a.default.number,width:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return"both"===i.axis||"x"===i.axis?(r=a.default.number).isRequired.apply(r,t):a.default.number.apply(a.default,t)}};t.resizableProps=i},954:(e,t,n)=>{"use strict";t.__esModule=!0,t.cloneElement=function(e,t){return t.style&&e.props.style&&(t.style=o(o({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),a.default.cloneElement(e,t)};var r,a=(r=n(959))&&r.__esModule?r:{default:r};function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},936:(e,t,n)=>{"use strict";e.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},e.exports.Resizable=n(794).default,e.exports.ResizableBox=n(609).default},367:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||u||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return function(){return e}}var a=function(){};a.thatReturns=r,a.thatReturnsFalse=r(!1),a.thatReturnsTrue=r(!0),a.thatReturnsNull=r(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},e.exports=a},function(e,t,n){"use strict";(function(t){var n=function(e){};"production"!==t.env.NODE_ENV&&(n=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=function(e,t,r,a,i,o,s,l){if(n(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,a,i,o,s,l],d=0;(c=new Error(t.replace(/%s/g,(function(){return u[d++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}}).call(t,n(0))},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=((r=n(4))&&r.__esModule?r:{default:r}).default.createContext({registerPane:function(){},unregisterPane:function(){}});t.default=a,e.exports=t.default},function(e,t,n){"use strict";(function(t){var r,a=n(1);"production"!==t.env.NODE_ENV&&(r=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=0,i="Warning: "+e.replace(/%s/g,(function(){return n[a++]}));"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(e){}},a=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,a=Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];r.apply(void 0,[t].concat(a))}}),e.exports=a}).call(t,n(0))},function(e,t,n){(function(t){if("production"!==t.env.NODE_ENV){var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=n(13)((function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}),!0)}else e.exports=n(12)()}).call(t,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),i=l(a),o=l(n(7)),s=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.panes={},r.registerPane=function(e,t){t.forEach((function(t){r.panes[t]||(r.panes[t]=[]),r.findPane(e,t)||(r.panes[t].length>0&&r.syncScrollPosition(r.panes[t][0],e),r.panes[t].push(e))})),r.addEvents(e,t)},r.unregisterPane=function(e,t){t.forEach((function(t){r.findPane(e,t)&&(r.removeEvents(e),r.panes[t].splice(r.panes[t].indexOf(e),1))}))},r.addEvents=function(e,t){e.onscroll=r.handlePaneScroll.bind(r,e,t)},r.removeEvents=function(e){e.onscroll=null},r.findPane=function(e,t){return!!r.panes[t]&&r.panes[t].find((function(t){return t===e}))},r.handlePaneScroll=function(e,t){r.props.enabled&&window.requestAnimationFrame((function(){r.syncScrollPositions(e,t)}))},r.syncScrollPositions=function(e,t){t.forEach((function(n){r.panes[n].forEach((function(a){e!==a&&(r.removeEvents(a,n),r.syncScrollPosition(e,a),window.requestAnimationFrame((function(){r.addEvents(a,t)})))}))})),r.props.onSync&&r.props.onSync(e)},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"getContextValue",value:function(){return{registerPane:this.registerPane,unregisterPane:this.unregisterPane}}},{key:"syncScrollPosition",value:function(e,t){var n=e.scrollTop,r=e.scrollHeight,a=e.clientHeight,i=e.scrollLeft,o=e.scrollWidth,s=e.clientWidth,l=r-a,c=o-s,u=this.props,d=u.proportional,p=u.vertical,f=u.horizontal,h=t.scrollHeight-a,g=t.scrollWidth-s;p&&l>0&&(t.scrollTop=d?h*n/l:n),f&&c>0&&(t.scrollLeft=d?g*i/c:i)}},{key:"render",value:function(){return i.default.createElement(s.default.Provider,{value:this.getContextValue()},i.default.Children.only(this.props.children))}}]),t}(a.Component);u.propTypes={onSync:o.default.func,children:o.default.element.isRequired,proportional:o.default.bool,vertical:o.default.bool,horizontal:o.default.bool,enabled:o.default.bool},u.defaultProps={proportional:!0,vertical:!0,horizontal:!0,enabled:!0},t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),i=s(n(7)),o=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toArray=function(e){return[].concat(e)},n.updateNode=function(){n.props.attachTo?n.node=n.props.attachTo.current:n.node=n.childRef.current},n.childRef=e.innerRef?e.innerRef:(0,a.createRef)(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.props.enabled&&(this.updateNode(),this.node&&this.context.registerPane(this.node,this.toArray(this.props.group)))}},{key:"componentDidUpdate",value:function(e){this.props.attachTo!==e.attachTo&&(this.node&&this.context.unregisterPane(this.node,this.toArray(e.group)),this.updateNode(),this.node&&this.context.registerPane(this.node,this.toArray(e.group))),this.node&&this.props.enabled!==e.enabled&&(this.props.enabled?this.context.registerPane(this.node,this.toArray(e.group)):this.context.unregisterPane(this.node,this.toArray(e.group))),this.node&&this.props.enabled&&this.props.group!==e.group&&(this.context.unregisterPane(this.node,this.toArray(e.group)),this.context.registerPane(this.node,this.toArray(this.props.group)))}},{key:"componentWillUnmount",value:function(){this.node&&this.props.enabled&&this.context.unregisterPane(this.node,this.toArray(this.props.group))}},{key:"render",value:function(){return this.props.attachTo?this.props.children:(0,a.cloneElement)(a.Children.only(this.props.children),{ref:this.childRef})}}]),t}(a.Component);l.contextType=o.default,l.propTypes={children:i.default.node.isRequired,attachTo:i.default.oneOfType([i.default.func,i.default.shape({current:i.default.any})]),group:i.default.oneOfType([i.default.string,i.default.arrayOf(i.default.string)]),enabled:i.default.bool,innerRef:i.default.oneOfType([i.default.func,i.default.shape({current:i.default.any})])},l.defaultProps={group:"default",enabled:!0},t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8);Object.defineProperty(t,"ScrollSync",{enumerable:!0,get:function(){return i(r).default}});var a=n(9);function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"ScrollSyncPane",{enumerable:!0,get:function(){return i(a).default}})},function(e,t,n){"use strict";(function(t){if("production"!==t.env.NODE_ENV)var r=n(2),a=n(6),i=n(3),o={};e.exports=function(e,n,s,l,c){if("production"!==t.env.NODE_ENV)for(var u in e)if(e.hasOwnProperty(u)){var d;try{r("function"==typeof e[u],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",l||"React class",s,u),d=e[u](n,u,l,s,null,i)}catch(e){d=e}if(a(!d||d instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",l||"React class",s,u,typeof d),d instanceof Error&&!(d.message in o)){o[d.message]=!0;var p=c?c():"";a(!1,"Failed %s type: %s%s",s,d.message,null!=p?p:"")}}}}).call(t,n(0))},function(e,t,n){"use strict";var r=n(1),a=n(2),i=n(3);e.exports=function(){function e(e,t,n,r,o,s){s!==i&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";(function(t){var r=n(1),a=n(2),i=n(6),o=n(3),s=n(11);e.exports=function(e,n){var l="function"==typeof Symbol&&Symbol.iterator,c="<<anonymous>>",u={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:p(r.thatReturnsNull),arrayOf:function(e){return p((function(t,n,r,a,i){if("function"!=typeof e)return new d("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s))return new d("Invalid "+a+" `"+i+"` of type `"+g(s)+"` supplied to `"+r+"`, expected an array.");for(var l=0;l<s.length;l++){var c=e(s,l,r,a,i+"["+l+"]",o);if(c instanceof Error)return c}return null}))},element:p((function(t,n,r,a,i){var o=t[n];return e(o)?null:new d("Invalid "+a+" `"+i+"` of type `"+g(o)+"` supplied to `"+r+"`, expected a single ReactElement.")})),instanceOf:function(e){return p((function(t,n,r,a,i){if(!(t[n]instanceof e)){var o=e.name||c;return new d("Invalid "+a+" `"+i+"` of type `"+((s=t[n]).constructor&&s.constructor.name?s.constructor.name:c)+"` supplied to `"+r+"`, expected instance of `"+o+"`.")}var s;return null}))},node:p((function(e,t,n,r,a){return h(e[t])?null:new d("Invalid "+r+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return p((function(t,n,r,a,i){if("function"!=typeof e)return new d("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],l=g(s);if("object"!==l)return new d("Invalid "+a+" `"+i+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in s)if(s.hasOwnProperty(c)){var u=e(s,c,r,a,i+"."+c,o);if(u instanceof Error)return u}return null}))},oneOf:function(e){return Array.isArray(e)?p((function(t,n,r,a,i){for(var o=t[n],s=0;s<e.length;s++)if(l=o,c=e[s],l===c?0!==l||1/l==1/c:l!=l&&c!=c)return null;var l,c;return new d("Invalid "+a+" `"+i+"` of value `"+o+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")})):("production"!==t.env.NODE_ENV&&i(!1,"Invalid argument supplied to oneOf, expected an instance of array."),r.thatReturnsNull)},oneOfType:function(e){if(!Array.isArray(e))return"production"!==t.env.NODE_ENV&&i(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),r.thatReturnsNull;for(var n=0;n<e.length;n++){var a=e[n];if("function"!=typeof a)return i(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",b(a),n),r.thatReturnsNull}return p((function(t,n,r,a,i){for(var s=0;s<e.length;s++)if(null==(0,e[s])(t,n,r,a,i,o))return null;return new d("Invalid "+a+" `"+i+"` supplied to `"+r+"`.")}))},shape:function(e){return p((function(t,n,r,a,i){var s=t[n],l=g(s);if("object"!==l)return new d("Invalid "+a+" `"+i+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var u=e[c];if(u){var p=u(s,c,r,a,i+"."+c,o);if(p)return p}}return null}))}};function d(e){this.message=e,this.stack=""}function p(e){if("production"!==t.env.NODE_ENV)var r={},s=0;function l(l,u,p,f,h,g,m){if(f=f||c,g=g||p,m!==o)if(n)a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==t.env.NODE_ENV&&"undefined"!=typeof console){var b=f+":"+p;!r[b]&&s<3&&(i(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",g,f),r[b]=!0,s++)}return null==u[p]?l?null===u[p]?new d("The "+h+" `"+g+"` is marked as required in `"+f+"`, but its value is `null`."):new d("The "+h+" `"+g+"` is marked as required in `"+f+"`, but its value is `undefined`."):null:e(u,p,f,h,g)}var u=l.bind(null,!1);return u.isRequired=l.bind(null,!0),u}function f(e){return p((function(t,n,r,a,i,o){var s=t[n];return g(s)!==e?new d("Invalid "+a+" `"+i+"` of type `"+m(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null}))}function h(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(h);if(null===t||e(t))return!0;var n=function(e){var t=e&&(l&&e[l]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!n)return!1;var r,a=n.call(t);if(n!==t.entries){for(;!(r=a.next()).done;)if(!h(r.value))return!1}else for(;!(r=a.next()).done;){var i=r.value;if(i&&!h(i[1]))return!1}return!0;default:return!1}}function g(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function m(e){if(null==e)return""+e;var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function b(e){var t=m(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return d.prototype=Error.prototype,u.checkPropTypes=s,u.PropTypes=u,u}}).call(t,n(0))}])},e.exports=r(n(959))},294:(e,t,n)=>{"use strict";e.exports=n.p+"da1ddf82b1124a99aaa5.wasm"},89:t=>{"use strict";t.exports=e},781:e=>{"use strict";e.exports=t},531:e=>{"use strict";e.exports=n},7:e=>{"use strict";e.exports=r},241:e=>{"use strict";e.exports=a},959:e=>{"use strict";e.exports=i},398:e=>{"use strict";e.exports=o},200:e=>{"use strict";e.exports=s},806:e=>{"use strict";e.exports=l},694:e=>{"use strict";e.exports=c},269:e=>{"use strict";e.exports=u}},p={};function f(e){var t=p[e];if(void 0!==t)return t.exports;var n=p[e]={id:e,loaded:!1,exports:{}};return d[e].call(n.exports,n,n.exports,f),n.loaded=!0,n.exports}f.m=d,f.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return f.d(t,{a:t}),t},f.d=(e,t)=>{for(var n in t)f.o(t,n)&&!f.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},f.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),f.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),f.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),f.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),f.p="public/plugins/grafana-lokiexplore-app/",f.b=document.baseURI||self.location.href;var h={};return(()=>{"use strict";f.r(h),f.d(h,{plugin:()=>yx});var e=f(781),t=f(959),n=f.n(t),r=f(806),a=f(531),i=Object.defineProperty,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&c(e,n,t[n]);if(o)for(var n of o(t))l.call(t,n)&&c(e,n,t[n]);return e};function d(t,n){const r=u({},a.locationService.getSearchObject());if(n)for(const e of Object.keys(r))n.includes(e)||delete r[e];return e.urlUtil.renderUrl(e.locationUtil.assureBaseUrl(t),r)}function p(e,t){return n().createElement(e.Component,{model:e,routeProps:t})}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const g=new Map;var m=f(269);const b={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let v;const y=new Uint8Array(16);function w(){if(!v&&(v="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!v))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v(y)}const S=[];for(let e=0;e<256;++e)S.push((e+256).toString(16).slice(1));const x=function(e,t,n){if(b.randomUUID&&!t&&!e)return b.randomUUID();const r=(e=e||{}).random||(e.rng||w)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return S[e[t+0]]+S[e[t+1]]+S[e[t+2]]+S[e[t+3]]+"-"+S[e[t+4]]+S[e[t+5]]+"-"+S[e[t+6]]+S[e[t+7]]+"-"+S[e[t+8]]+S[e[t+9]]+"-"+S[e[t+10]]+S[e[t+11]]+S[e[t+12]]+S[e[t+13]]+S[e[t+14]]+S[e[t+15]]}(r)};var O=Object.defineProperty,_=Object.defineProperties,C=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,k=(e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const T=n().memo((function(e){var r,a=e,{model:i}=a,o=((e,t)=>{var n={};for(var r in e)P.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&E)for(var r of E(e))t.indexOf(r)<0&&D.call(e,r)&&(n[r]=e[r]);return n})(a,["model"]);const s=null!=(r=i.constructor.Component)?r:R,[l,c]=(0,t.useState)(0);return(0,t.useEffect)((()=>{const e=i.activate();return c((e=>e+1)),e}),[i]),i.isActive?n().createElement(s,(u=((e,t)=>{for(var n in t||(t={}))P.call(t,n)&&k(e,n,t[n]);if(E)for(var n of E(t))D.call(t,n)&&k(e,n,t[n]);return e})({},o),_(u,C({model:i})))):null;var u}));function R(e){return null}class j extends e.BusEventWithPayload{}j.type="scene-object-state-change";class I extends e.BusEventWithPayload{}I.type="scene-object-user-action";var A,L=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};class N{constructor(e){var t,n;((e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,void 0)})(this,A),n=e,L(this,t=A,"write to private field"),t.set(this,n)}resolve(){return L(this,e=A,"read from private field"),e.get(this);var e}}A=new WeakMap;var F=Object.defineProperty,M=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,z=(e,t,n)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W=(e,t)=>{for(var n in t||(t={}))B.call(t,n)&&z(e,n,t[n]);if(M)for(var n of M(t))V.call(t,n)&&z(e,n,t[n]);return e};class H{constructor(t){this._isActive=!1,this._activationHandlers=[],this._deactivationHandlers=new Map,this._subs=new m.Subscription,this._refCount=0,t.key||(t.key=x()),this._events=new e.EventBusSrv,this._state=Object.freeze(t),this._setParent(this._state)}get state(){return this._state}get isActive(){return this._isActive}get parent(){return this._parent}get variableDependency(){return this._variableDependency}get urlSync(){return this._urlSync}get Component(){return T}_setParent(e){U(e,(e=>{e._parent&&e._parent!==this&&console.warn("SceneObject already has a parent set that is different from the new parent. You cannot share the same SceneObject instance in multiple scenes or in multiple different places of the same scene graph. Use SceneObject.clone() to duplicate a SceneObject or store a state key reference and use sceneGraph.findObject to locate it.",e,this),e._parent=this}))}subscribeToState(e){return this._events.subscribe(j,(t=>{t.payload.changedObject===this&&e(t.payload.newState,t.payload.prevState)}))}subscribeToEvent(e,t){return this._events.subscribe(e,t)}setState(e){const t=this._state,n=W(W({},this._state),e);this._state=Object.freeze(n),this._setParent(e),this._handleActivationOfChangedStateProps(t,n),this.publishEvent(new j({prevState:t,newState:n,partialUpdate:e,changedObject:this}),!0)}_handleActivationOfChangedStateProps(e,t){this.isActive&&(e.$behaviors!==t.$behaviors&&this._handleChangedBehaviors(e.$behaviors,t.$behaviors),e.$data!==t.$data&&this._handleChangedStateActivation(e.$data,t.$data),e.$variables!==t.$variables&&this._handleChangedStateActivation(e.$variables,t.$variables),e.$timeRange!==t.$timeRange&&this._handleChangedStateActivation(e.$timeRange,t.$timeRange))}_handleChangedStateActivation(e,t){if(e){const t=this._deactivationHandlers.get(e);t&&(t(),this._deactivationHandlers.delete(e))}t&&this._deactivationHandlers.set(t,t.activate())}_handleChangedBehaviors(e,t){if(e)for(const n of e)if(!t||!t.includes(n)){const e=this._deactivationHandlers.get(n);e&&(e(),this._deactivationHandlers.delete(n))}if(t)for(const n of t)e&&e.includes(n)||this._activateBehavior(n)}publishEvent(e,t){this._events.publish(e),t&&this.parent&&this.parent.publishEvent(e,t)}getRoot(){return this._parent?this._parent.getRoot():this}_internalActivate(){this._isActive=!0;const{$data:e,$variables:t,$timeRange:n,$behaviors:r}=this.state;if(this._activationHandlers.forEach((e=>{const t=e();t&&this._deactivationHandlers.set(t,t)})),n&&!n.isActive&&this._deactivationHandlers.set(n,n.activate()),t&&!t.isActive&&this._deactivationHandlers.set(t,t.activate()),e&&!e.isActive&&this._deactivationHandlers.set(e,e.activate()),r)for(const e of r)this._activateBehavior(e)}_activateBehavior(e){if(e instanceof H)this._deactivationHandlers.set(e,e.activate());else if("function"==typeof e){const t=e(this);t&&this._deactivationHandlers.set(e,t)}}activate(){this.isActive||this._internalActivate(),this._refCount++;let e=!1;return()=>{if(this._refCount--,e)throw new Error("SceneObject cancelation handler returned by activate() called a second time");e=!0,0===this._refCount&&this._internalDeactivate()}}_internalDeactivate(){this._isActive=!1;for(let e of this._deactivationHandlers.values())e();this._deactivationHandlers.clear(),this._events.removeAllListeners(),this._subs.unsubscribe(),this._subs=new m.Subscription}useState(){return $(this)}forceRender(){this.setState({})}clone(e){return function(e,t){const n=function(e,t){const n=X({},e);for(const e in n){const t=n[e];if(t instanceof H&&(n[e]=t.clone()),t instanceof N)throw new Error("Cannot clone a SceneObject with a SceneObjectRef in state");if(Array.isArray(t)){const r=[];for(const e of t)e instanceof H?r.push(e.clone()):r.push(e);n[e]=r}}return Object.assign(n,t),n}(e.state,t);return new e.constructor(n)}(this,e)}addActivationHandler(e){this._activationHandlers.push(e)}forEachChild(e){U(this.state,e)}getRef(){return this._ref||(this._ref=new N(this)),this._ref}}function $(e,n){var r;const[a,i]=(0,t.useState)(e.state),o=e.state,s=null!=(r=null==n?void 0:n.shouldActivateOrKeepAlive)&&r;return(0,t.useEffect)((()=>{let t;s&&(t=e.activate());const n=e.subscribeToState((e=>{i(e)}));return e.state!==o&&i(e.state),()=>{n.unsubscribe(),t&&t()}}),[e,s]),e.state}function U(e,t){for(const n of Object.values(e))if(n instanceof H&&t(n),Array.isArray(n))for(const e of n)e instanceof H&&t(e)}var G=Object.defineProperty,q=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,K=(e,t,n)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X=(e,t)=>{for(var n in t||(t={}))Q.call(t,n)&&K(e,n,t[n]);if(q)for(var n of q(t))Y.call(t,n)&&K(e,n,t[n]);return e};function Z(e,t){let n,r=e;for(;r&&!n;)n=t(r),r=r.parent;return n}e.DataSourceApi;const J=new Map;var ee=f(241);function te(e,t){const n=t.state.$variables;if(!n)return t.parent?te(e,t.parent):null;return n.getByName(e)||(t.parent?te(e,t.parent):null)}var ne=(e=>(e.Auto="auto",e.BasicGauge="basic",e.ColorBackground="color-background",e.ColorBackgroundSolid="color-background-solid",e.ColorText="color-text",e.Custom="custom",e.DataLinks="data-links",e.Gauge="gauge",e.GradientGauge="gradient-gauge",e.Image="image",e.JSONView="json-view",e.LcdGauge="lcd-gauge",e.Sparkline="sparkline",e))(ne||{}),re=(e=>(e.Lg="lg",e.Md="md",e.Sm="sm",e))(re||{}),ae=(e=>(e.CSV="csv",e.Date="date",e.Distributed="distributed",e.DoubleQuote="doublequote",e.Glob="glob",e.HTML="html",e.JSON="json",e.Lucene="lucene",e.PercentEncode="percentencode",e.Pipe="pipe",e.QueryParam="queryparam",e.Raw="raw",e.Regex="regex",e.SQLString="sqlstring",e.SingleQuote="singlequote",e.Text="text",e.UriEncode="uriencode",e))(ae||{});ne.Auto;var ie=(e=>(e.NotStarted="NotStarted",e.Loading="Loading",e.Streaming="Streaming",e.Done="Done",e.Error="Error",e))(ie||{}),oe=Object.defineProperty,se=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,ue=(e,t,n)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class de extends H{constructor(e){super(((e,t)=>{for(var n in t||(t={}))le.call(t,n)&&ue(e,n,t[n]);if(se)for(var n of se(t))ce.call(t,n)&&ue(e,n,t[n]);return e})({data:pe},e))}getResultsStream(){const e={origin:this,data:this.state.data};return(0,m.of)(e)}}const pe={state:ie.Done,series:[],timeRange:(0,e.getDefaultTimeRange)()};class fe{constructor(e,t){this._sceneObject=e,this._keys=t.keys}getKeys(){return"function"==typeof this._keys?this._keys():this._keys}getUrlState(){return this._sceneObject.getUrlState()}updateFromUrl(e){this._sceneObject.updateFromUrl(e)}}const he=/^\d+[yYmMsSwWhHdD]$/;function ge(t){if("string"!=typeof t)return null;if(-1!==t.indexOf("now"))return t;if(he.test(t))return t;if(8===t.length){const n=(0,e.toUtc)(t,"YYYYMMDD");if(n.isValid())return n.toISOString()}else if(15===t.length){const n=(0,e.toUtc)(t,"YYYYMMDDTHHmmss");if(n.isValid())return n.toISOString()}else if(24===t.length)return(0,e.toUtc)(t).toISOString();const n=parseInt(t,10);return isNaN(n)?null:(0,e.toUtc)(n).toISOString()}function me(t,n,r,a,i){const o=i&&"now"===n;return{from:e.dateMath.parse(t,!1,r,a),to:e.dateMath.parse(o?"now-"+i:n,!0,r,a),raw:{from:t,to:n}}}var be=Object.defineProperty,ve=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Se=(e,t,n)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class xe extends H{constructor(t={}){var n,r;const a=null!=(n=t.from)?n:"now-6h",i=null!=(r=t.to)?r:"now",o=t.timeZone;super(((e,t)=>{for(var n in t||(t={}))ye.call(t,n)&&Se(e,n,t[n]);if(ve)for(var n of ve(t))we.call(t,n)&&Se(e,n,t[n]);return e})({from:a,to:i,timeZone:o,value:me(a,i,o||(0,e.getTimeZone)(),t.fiscalYearStartMonth,t.UNSAFE_nowDelay)},t)),this._urlSync=new fe(this,{keys:["from","to","timezone"]}),this.onTimeRangeChange=e=>{const t={},n={};"string"==typeof e.raw.from?(t.from=e.raw.from,n.from=e.raw.from):(t.from=e.raw.from.toISOString(),n.from=e.raw.from.toISOString(!0)),"string"==typeof e.raw.to?(t.to=e.raw.to,n.to=e.raw.to):(t.to=e.raw.to.toISOString(),n.to=e.raw.to.toISOString(!0)),t.value=me(n.from,n.to,this.getTimeZone(),this.state.fiscalYearStartMonth,this.state.UNSAFE_nowDelay),t.from===this.state.from&&t.to===this.state.to||this.setState(t)},this.onTimeZoneChange=e=>{this.setState({timeZone:e})},this.onRefresh=()=>{this.setState({value:me(this.state.from,this.state.to,this.getTimeZone(),this.state.fiscalYearStartMonth,this.state.UNSAFE_nowDelay)})},this.addActivationHandler(this._onActivate.bind(this))}_onActivate(){if(!this.state.timeZone){const e=this.getTimeZoneSource();e!==this&&this._subs.add(e.subscribeToState(((t,n)=>{void 0!==t.timeZone&&t.timeZone!==n.timeZone&&this.setState({value:me(this.state.from,this.state.to,e.getTimeZone(),this.state.fiscalYearStartMonth,this.state.UNSAFE_nowDelay)})})))}return this.state.weekStart&&(0,e.setWeekStart)(this.state.weekStart),()=>{this.state.weekStart&&(0,e.setWeekStart)(a.config.bootData.user.weekStart)}}getTimeZoneSource(){if(!this.parent||!this.parent.parent)return this;return Z(this.parent.parent,(e=>{if(e.state.$timeRange&&e.state.$timeRange.state.timeZone)return e.state.$timeRange}))||this}getTimeZone(){if(this.state.timeZone)return this.state.timeZone;const t=this.getTimeZoneSource();return t!==this?t.state.timeZone:(0,e.getTimeZone)()}getUrlState(){const e={from:this.state.from,to:this.state.to};return this.state.timeZone&&(e.timezone=this.state.timeZone),e}updateFromUrl(e){var t,n,r;if(!e.to&&!e.from)return;const a={},i=ge(e.from);i&&(a.from=i);const o=ge(e.to);o&&(a.to=o),"string"==typeof e.timezone&&(a.timeZone=""!==e.timezone?e.timezone:void 0),a.value=me(null!=(t=a.from)?t:this.state.from,null!=(n=a.to)?n:this.state.to,null!=(r=a.timeZone)?r:this.getTimeZone(),this.state.fiscalYearStartMonth,this.state.UNSAFE_nowDelay),this.setState(a)}}const Oe=new de,_e=new xe,Ce=new class extends H{constructor(){super({variables:[]})}getByName(e){}isVariableLoadingOrWaitingToUpdate(e){return!1}};function Ee(e){var t;return null!=(t=Z(e,(e=>e.state.$timeRange)))?t:_e}class Pe extends e.BusEventWithPayload{}function De(e){return"object"==typeof e&&"formatter"in e}Pe.type="scene-variable-changed-value";let ke,Te={};function Re(e){return Te[e]||(Te[e]=(0,ee.property)(e))}class je{constructor(e,t){this.state={name:e,value:t,type:"scopedvar"}}getValue(e){let{value:t}=this.state,n=t.value;return n=e?Re(e)(t.value):t.value,"string"===n||"number"===n||"boolean"===n?n:String(n)}getValueText(){const{value:e}=this.state;return null!=e.text?String(e.text):String(e)}}const Ie=new e.Registry((()=>[{id:ae.Lucene,name:"Lucene",description:"Values are lucene escaped and multi-valued variables generate an OR expression",formatter:e=>"string"==typeof e?Ae(e):Array.isArray(e)?0===e.length?"__empty__":"("+(0,ee.map)(e,(e=>'"'+Ae(e)+'"')).join(" OR ")+")":Ae(`${e}`)},{id:ae.Raw,name:"raw",description:"Keep value as is",formatter:e=>String(e)},{id:ae.Regex,name:"Regex",description:"Values are regex escaped and multi-valued variables generate a (<value>|<value>) expression",formatter:t=>{if("string"==typeof t)return(0,e.escapeRegex)(t);if(Array.isArray(t)){const n=t.map((t=>"string"==typeof t?(0,e.escapeRegex)(t):(0,e.escapeRegex)(String(t))));return 1===n.length?n[0]:"("+n.join("|")+")"}return(0,e.escapeRegex)(`${t}`)}},{id:ae.Pipe,name:"Pipe",description:"Values are separated by | character",formatter:e=>"string"==typeof e?e:Array.isArray(e)?e.join("|"):`${e}`},{id:ae.Distributed,name:"Distributed",description:"Multiple values are formatted like variable=value",formatter:(e,t,n)=>"string"==typeof e?e:Array.isArray(e)?(e=(0,ee.map)(e,((e,t)=>0!==t?n.state.name+"="+e:e))).join(","):`${e}`},{id:ae.CSV,name:"Csv",description:"Comma-separated values",formatter:e=>"string"==typeof e?e:(0,ee.isArray)(e)?e.join(","):String(e)},{id:ae.HTML,name:"HTML",description:"HTML escaping of values",formatter:t=>"string"==typeof t?e.textUtil.escapeHtml(t):(0,ee.isArray)(t)?e.textUtil.escapeHtml(t.join(", ")):e.textUtil.escapeHtml(String(t))},{id:ae.JSON,name:"JSON",description:"JSON stringify value",formatter:e=>"string"==typeof e?e:JSON.stringify(e)},{id:ae.PercentEncode,name:"Percent encode",description:"Useful for URL escaping values",formatter:e=>(0,ee.isArray)(e)?Le("{"+e.join(",")+"}"):Le(e)},{id:ae.SingleQuote,name:"Single quote",description:"Single quoted values",formatter:e=>{const t=new RegExp("'","g");if((0,ee.isArray)(e))return(0,ee.map)(e,(e=>`'${(0,ee.replace)(e,t,"\\'")}'`)).join(",");let n="string"==typeof e?e:String(e);return`'${(0,ee.replace)(n,t,"\\'")}'`}},{id:ae.DoubleQuote,name:"Double quote",description:"Double quoted values",formatter:e=>{const t=new RegExp('"',"g");if((0,ee.isArray)(e))return(0,ee.map)(e,(e=>`"${(0,ee.replace)(e,t,'\\"')}"`)).join(",");let n="string"==typeof e?e:String(e);return`"${(0,ee.replace)(n,t,'\\"')}"`}},{id:ae.SQLString,name:"SQL string",description:"SQL string quoting and commas for use in IN statements and other scenarios",formatter:Ve},{id:ae.Date,name:"Date",description:"Format date in different ways",formatter:(t,n)=>{var r;let a=NaN;if("number"==typeof t?a=t:"string"==typeof t&&(a=parseInt(t,10)),isNaN(a))return"NaN";const i=null!=(r=n[0])?r:"iso";switch(i){case"ms":return String(t);case"seconds":return`${Math.round(a/1e3)}`;case"iso":return(0,e.dateTime)(a).toISOString();default:return(n||[]).length>1?(0,e.dateTime)(a).format(n.join(":")):(0,e.dateTime)(a).format(i)}}},{id:ae.Glob,name:"Glob",description:"Format multi-valued variables using glob syntax, example {value1,value2}",formatter:e=>(0,ee.isArray)(e)&&e.length>1?"{"+e.join(",")+"}":String(e)},{id:ae.Text,name:"Text",description:"Format variables in their text representation. Example in multi-variable scenario A + B + C.",formatter:(e,t,n)=>n.getValueText?n.getValueText():String(e)},{id:ae.QueryParam,name:"Query parameter",description:"Format variables as URL parameters. Example in multi-variable scenario A + B + C => var-foo=A&var-foo=B&var-foo=C.",formatter:(e,t,n)=>Array.isArray(e)?e.map((e=>Me(n.state.name,e))).join("&"):Me(n.state.name,e)},{id:ae.UriEncode,name:"Percent encode as URI",description:"Useful for URL escaping values, taking into URI syntax characters",formatter:e=>(0,ee.isArray)(e)?Ne("{"+e.join(",")+"}"):Ne(e)}]));function Ae(e){return!1===isNaN(+e)?e:e.replace(/([\!\*\+\-\=<>\s\&\|\(\)\[\]\{\}\^\~\?\:\\/"])/g,"\\$1")}function Le(e){return"object"==typeof e&&(e=String(e)),Fe(encodeURIComponent(e))}const Ne=e=>Fe(encodeURI(String(e))),Fe=e=>e.replace(/[!'()*]/g,(e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()));function Me(e,t){return`var-${e}=${Le(t)}`}const Be={"'":"''",'"':'\\"'};function Ve(e){const t=new RegExp("'|\"","g");if((0,ee.isArray)(e))return(0,ee.map)(e,(e=>`'${(0,ee.replace)(e,t,(e=>{var t;return null!=(t=Be[e])?t:""}))}'`)).join(",");let n="string"==typeof e?e:String(e);return`'${(0,ee.replace)(n,t,(e=>{var t;return null!=(t=Be[e])?t:""}))}'`}const ze="All",We="$__all",He="$__auto",$e=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;class Ue{constructor(e){this._value=e}formatter(){return this._value}}class Ge{constructor(e,t){this.state={name:e,type:"time_macro"},this._sceneObject=t}getValue(){const e=Ee(this._sceneObject);return"__from"===this.state.name?e.state.value.from.valueOf():e.state.value.to.valueOf()}getValueText(){const t=Ee(this._sceneObject);return"__from"===this.state.name?(0,e.dateTimeFormat)(t.state.value.from,{timeZone:t.getTimeZone()}):(0,e.dateTimeFormat)(t.state.value.to,{timeZone:t.getTimeZone()})}}class qe{constructor(e,t,n){this.state={name:e,type:"time_macro",match:n},this._sceneObject=t}getValue(){var e;const t=ct(this._sceneObject);if(t){const n=null==(e=t.state.data)?void 0:e.request;return n?"__interval_ms"===this.state.name?n.intervalMs:n.interval:this.state.match}return this.state.match}}function Qe(e,t={}){if(e.state.$variables)for(const n of e.state.$variables.state.variables)n.state.skipUrlSync||t[n.state.name]||(t[n.state.name]=n);return e.parent&&Qe(e.parent,t),t}var Ye=Object.defineProperty,Ke=Object.defineProperties,Xe=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable,tt=(e,t,n)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const nt=(0,e.getDisplayProcessor)();class rt{constructor(e){this._urlQueryParams=e}formatter(e){if(!e)return this._urlQueryParams;const t=e.split(":");if("exclude"===t[0]&&t.length>1){const e=new URLSearchParams(this._urlQueryParams);for(const n of t[1].split(","))e.delete(n);return`?${e}`}if("include"===t[0]&&t.length>1){const e=new URLSearchParams(this._urlQueryParams),n=t[1].split(",");for(const t of e.keys())n.includes(t)||e.delete(t);return`?${e}`}return this._urlQueryParams}}const at=new Map([[e.DataLinkBuiltInVars.includeVars,class{constructor(e,t){this.state={name:e,type:"url_variable"},this._sceneObject=t}getValue(){const e=Qe(this._sceneObject),t=Ie.get(ae.QueryParam),n=[];for(const r of Object.keys(e)){const a=e[r],i=a.getValue();i&&(De(i)?n.push(i.formatter(ae.QueryParam)):n.push(t.formatter(i,[],a)))}return new Ue(n.join("&"))}getValueText(){return""}}],[e.DataLinkBuiltInVars.keepTime,class{constructor(e,t){this.state={name:e,type:"url_variable"},this._sceneObject=t}getValue(){var t;const n=null==(t=Ee(this._sceneObject).urlSync)?void 0:t.getUrlState();return new Ue(e.urlUtil.toUrlParams(n))}getValueText(){return""}}],["__value",class{constructor(e,t,n,r){this._match=n,this._scopedVars=r,this.state={name:e,type:"__value"}}getValue(t){var n,r;const a=null==(n=this._scopedVars)?void 0:n.__dataContext;if(!a)return this._match;const{frame:i,rowIndex:o,field:s,calculatedValue:l}=a.value;if(l)switch(t){case"numeric":case"raw":return l.numeric;case"time":return"";default:return(0,e.formattedValueToString)(l)}if(null==o)return this._match;if("time"===t){const t=i.fields.find((t=>t.type===e.FieldType.time));return t?t.values.get(o):void 0}if(!s)return this._match;const c=s.values.get(o);if("raw"===t)return c;const u=(null!=(r=s.display)?r:nt)(c);return"numeric"===t?u.numeric:(0,e.formattedValueToString)(u)}getValueText(){return""}}],["__data",class{constructor(e,t,n,r){this._match=n,this._scopedVars=r,this.state={name:e,type:"__data"}}getValue(t){var n,r;const a=null==(n=this._scopedVars)?void 0:n.__dataContext;if(!a||!t)return this._match;const{frame:i,rowIndex:o}=a.value;if(void 0===o||void 0===t)return this._match;const s={name:i.name,refId:i.refId,fields:(0,e.getFieldDisplayValuesProxy)({frame:i,rowIndex:o})};return null!=(r=Re(t)(s))?r:""}getValueText(){return""}}],["__series",class{constructor(e,t,n,r){this._match=n,this._scopedVars=r,this.state={name:e,type:"__series"}}getValue(t){var n;const r=null==(n=this._scopedVars)?void 0:n.__dataContext;if(!r||!t)return this._match;if("name"!==t)return this._match;const{frame:a,frameIndex:i}=r.value;return(0,e.getFrameDisplayName)(a,i)}getValueText(){return""}}],["__field",class{constructor(e,t,n,r){this._match=n,this._scopedVars=r,this.state={name:e,type:"__field"}}getValue(t){var n,r;const a=null==(n=this._scopedVars)?void 0:n.__dataContext;if(!a||!t)return this._match;if(void 0===t||""===t)return this._match;const{frame:i,field:o,data:s}=a.value,l=function(t,n,r){return new Proxy({},{get:(a,i)=>{return"name"===i?t.name:"displayName"===i?(0,e.getFieldDisplayName)(t,n,r):"labels"===i||"formattedLabels"===i?t.labels?(o=((e,t)=>{for(var n in t||(t={}))Je.call(t,n)&&tt(e,n,t[n]);if(Ze)for(var n of Ze(t))et.call(t,n)&&tt(e,n,t[n]);return e})({},t.labels),s={__values:Object.values(t.labels).sort().join(", "),toString:()=>(0,e.formatLabels)(t.labels,"",!0)},Ke(o,Xe(s))):"":void 0;var o,s}})}(o,i,s);return null!=(r=Re(t)(l))?r:""}getValueText(){return""}}],["__url",class{constructor(e,t){this.state={name:e,type:"url_macro"}}getValue(e){var t;const n=a.locationService.getLocation(),r=null!=(t=a.config.appSubUrl)?t:"";switch(null!=e?e:""){case"params":return new rt(n.search);case"path":return r+n.pathname;default:return r+n.pathname+n.search}}getValueText(){return""}}],["__from",Ge],["__to",Ge],["__timezone",class{constructor(e,t){this.state={name:e,type:"time_macro"},this._sceneObject=t}getValue(){const e=Ee(this._sceneObject).getTimeZone();return"browser"===e?Intl.DateTimeFormat().resolvedOptions().timeZone:e}getValueText(){return this.getValue()}}],["__user",class{constructor(e,t){this.state={name:e,type:"user_macro"}}getValue(e){const t=a.config.bootData.user;switch(e){case"login":return t.login;case"email":return t.email;default:return String(t.id)}}getValueText(){return""}}],["__org",class{constructor(e,t){this.state={name:e,type:"org_macro"}}getValue(e){const t=a.config.bootData.user;return"name"===e?t.orgName:String(t.orgId)}getValueText(){return""}}],["__interval",qe],["__interval_ms",qe]]);function it(e,t,n,r,a){return t&&"string"==typeof t?($e.lastIndex=0,t.replace($e,((t,i,o,s,l,c,u)=>{const d=i||o||l,p=s||u||r,f=function(e,t,n,r){if(n&&n.hasOwnProperty(e)){const t=n[e];if(t)return function(e,t){return ke?(ke.state.name=e,ke.state.value=t):ke=new je(e,t),ke}(e,t)}const a=te(e,r);if(a)return a;const i=at.get(e);return i?new i(e,r,t,n):null}(d,t,n,e);if(!f)return a&&a.push({match:t,variableName:d,fieldPath:c,format:p,value:t,found:!1}),t;const h=function(e,t,n,r){if(null==n)return"";if(De(n))return it(e,n.formatter(r));if(Array.isArray(n)||"object"!=typeof n||(n=`${n}`),"function"==typeof r)return r(n,{name:t.state.name,type:t.state.type,multi:t.state.isMulti,includeAll:t.state.includeAll});let a=[];r?(a=r.split(":"),a.length>1?(r=a[0],a=a.slice(1)):a=[]):r=ae.Glob;let i=Ie.getIfExists(r);return i||(console.error(`Variable format ${r} not found. Using glob format as fallback.`),i=Ie.get(ae.Glob)),i.formatter(n,a,t)}(e,f,f.getValue(c),p);return a&&a.push({match:t,variableName:d,fieldPath:c,format:p,value:h,found:h!==t}),h}))):null!=t?t:""}function ot(e){return void 0!==e.useState}function st(e){return"enrichDataRequest"in e}function lt(e){return"isDataLayer"in e}function ct(e){var t;return null!=(t=Z(e,(e=>e.state.$data)))?t:Oe}function ut(e,t,n,r){if(t(e))return e;let a=null;return e.forEachChild((e=>{if(e===n)return;let r=ut(e,t);r&&(a=r)})),a||(r&&e.parent?ut(e.parent,t,e,!0):null)}function dt(e,t){return ut(e,t,void 0,!0)}new WeakMap;const pt={getVariables:function(e){var t;return null!=(t=Z(e,(e=>e.state.$variables)))?t:Ce},getData:ct,getTimeRange:Ee,getLayout:function(e){return Z(e,(e=>function(e){return"isDraggable"in e}(e)?e:void 0))||null},getDataLayers:function(e,t=!1){let n=e,r=[];for(;n;){const e=n.state.$data;if(e){if(lt(e)?r=r.concat(e):e.state.$data&&lt(e.state.$data)&&(r=r.concat(e.state.$data)),t&&r.length>0)break;n=n.parent}else n=n.parent}return r},interpolate:function(e,t,n,r,a){return""===t||null==t?"":it(e,t,n,r,a)},lookupVariable:te,hasVariableDependencyInLoadingState:function(e){if(!e.variableDependency)return!1;for(const t of e.variableDependency.getNames()){const n=te(t,e);if(n&&n.parent.isVariableLoadingOrWaitingToUpdate(n))return!0}return!1},findByKey:function(e,t){const n=dt(e,(e=>e.state.key===t));if(!n)throw new Error("Unable to find scene with key "+t);return n},findByKeyAndType:function(e,t,n){const r=dt(e,(e=>e.state.key===t));if(!r)throw new Error("Unable to find scene with key "+t);if(!(r instanceof n))throw new Error(`Found scene object with key ${t} does not match type ${n.name}`);return r},findObject:dt,findAllObjects:function e(t,n){const r=[];return t.forEachChild((t=>{n(t)&&r.push(t),r.push(...e(t,n))})),r},getAncestor:function(e,t){let n=e;for(;n;){if(n instanceof t)return n;n=n.parent}if(!n)throw new Error("Unable to find parent of type "+t.name);return n},getQueryController:function(e){let t=e;for(;t;){if(t.state.$behaviors)for(const e of t.state.$behaviors)if("isQueryController"in e)return e;t=t.parent}}};class ft{constructor(){this.index=new Map}getUniqueKey(e,t){const n=this.index.get(e);if(!n)return this.index.set(e,[t]),e;let r=n.findIndex((e=>e===t));return-1===r&&(function(e){for(const t of e)if(ht(t)){const n=e.indexOf(t);e.splice(n,1)}}(n),n.push(t),r=n.length-1),r>0?`${e}-${r+1}`:e}clear(){this.index.clear()}}function ht(e){const t=e.getRoot();return!pt.findObject(t,(t=>t===e))}function gt(e,t,n,r){r||mt(e,t,n),e.forEachChild((e=>{mt(e,t,n)})),e.forEachChild((e=>gt(e,t,n,!0)))}function mt(e,t,n){if(e.urlSync){const r={},a=e.urlSync.getUrlState();for(const i of e.urlSync.getKeys()){const o=n.getUniqueKey(i,e),s=t.getAll(o),l=a[i];bt(s,l)||(s.length>0?Array.isArray(l)?r[i]=s:r[i]=s[0]:r[i]=null)}Object.keys(r).length>0&&e.urlSync.updateFromUrl(r)}}function bt(e,t){return 0===e.length&&null==t||(Array.isArray(t)||1!==(null==e?void 0:e.length)?0===(null==t?void 0:t.length)&&null===e||(0,ee.isEqual)(e,t):t===e[0])}async function vt(e,t){if(null==e?void 0:e.uid){const t=J.get(e.uid);if(t)return t}return e&&e.query?e:await(0,a.getDataSourceSrv)().get(e,t)}function yt(e,t,...n){let r=!1;"undefined"!=typeof window&&(r="true"===localStorage.getItem("grafana.debug.scenes")),r&&console.log(`${e}: `,t,...n)}class wt{constructor(e,t){this._sceneObject=e,this._options=t,this._dependencies=new Set,this._isWaitingForVariables=!1,this.scanCount=0,this._statePaths=t.statePaths}hasDependencyOn(e){return this.getNames().has(e)}variableUpdateCompleted(t,n){const r=this.getNames();let a=!1;(r.has(t.state.name)||r.has(e.DataLinkBuiltInVars.includeVars))&&n&&(a=!0),yt("VariableDependencyConfig","variableUpdateCompleted",t.state.name,a,this._isWaitingForVariables),this._options.onAnyVariableChanged&&this._options.onAnyVariableChanged(t),this._options.onVariableUpdateCompleted&&(this._isWaitingForVariables||a)&&this._options.onVariableUpdateCompleted(),a&&(this._options.onReferencedVariableValueChanged&&this._options.onReferencedVariableValueChanged(t),this._options.onReferencedVariableValueChanged||this._options.onVariableUpdateCompleted||this._sceneObject.forceRender())}hasDependencyInLoadingState(){return pt.hasVariableDependencyInLoadingState(this._sceneObject)?(this._isWaitingForVariables=!0,!0):(this._isWaitingForVariables=!1,!1)}getNames(){const e=this._state,t=this._state=this._sceneObject.state;if(!e)return this.scanStateForDependencies(this._state),this._dependencies;if(t!==e)if(this._statePaths){for(const n of this._statePaths)if("*"===n||t[n]!==e[n]){this.scanStateForDependencies(t);break}}else this.scanStateForDependencies(t);return this._dependencies}setVariableNames(e){this._options.variableNames=e,this.scanStateForDependencies(this._state)}setPaths(e){this._statePaths=e}scanStateForDependencies(e){if(this._dependencies.clear(),this.scanCount+=1,this._options.variableNames)for(const e of this._options.variableNames)this._dependencies.add(e);if(this._statePaths)for(const t of this._statePaths){if("*"===t){this.extractVariablesFrom(e);break}{const n=e[t];n&&this.extractVariablesFrom(n)}}}extractVariablesFrom(e){$e.lastIndex=0;const t=("string"!=typeof e?kr(e):e).matchAll($e);if(t)for(const e of t){const[,t,n,,r]=e,a=t||n||r;this._dependencies.add(a)}}}class St{constructor(){this._values=new Map}recordCurrentDependencyValuesForSceneObject(e){if(this.clearValues(),e.variableDependency)for(const t of e.variableDependency.getNames()){const n=pt.lookupVariable(t,e);n&&this._values.set(n.state.name,n.getValue())}}cloneAndRecordCurrentValuesForSceneObject(e){const t=new St;return t.recordCurrentDependencyValuesForSceneObject(e),t}clearValues(){this._values.clear()}hasValues(){return!!this._values}recordCurrentValue(e){this._values.set(e.state.name,e.getValue())}hasRecordedValue(e){return this._values.has(e.state.name)}hasValueChanged(e){return!(!this._values.has(e.state.name)||Dr(this._values.get(e.state.name),e.getValue()))}hasDependenciesChanged(e){if(!this._values)return!1;if(!e.variableDependency)return!1;for(const t of e.variableDependency.getNames()){const n=pt.lookupVariable(t,e);if(!n)continue;const r=n.state.name;if(n&&this._values.has(r)&&!Dr(this._values.get(r),n.getValue()))return!0}return!1}}function xt(e){return"object"==typeof e&&"getExtraQueries"in e}var Ot=Object.defineProperty,_t=Object.defineProperties,Ct=Object.getOwnPropertyDescriptors,Et=Object.getOwnPropertySymbols,Pt=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable,kt=(e,t,n)=>t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Tt=(e,t)=>(0,m.of)(t);var Rt=Object.defineProperty,jt=Object.defineProperties,It=Object.getOwnPropertyDescriptors,At=Object.getOwnPropertySymbols,Lt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,Ft=(e,t,n)=>t in e?Rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mt=(e,t)=>{for(var n in t||(t={}))Lt.call(t,n)&&Ft(e,n,t[n]);if(At)for(var n of At(t))Nt.call(t,n)&&Ft(e,n,t[n]);return e},Bt=(e,t)=>jt(e,It(t));function Vt(e){const t=e.getRoot();return st(t)?t.enrichDataRequest(e):null}let zt,Wt=new Set;function Ht(e){return t=>{const n=pt.getQueryController(e.origin);return n?new m.Observable((r=>{e.cancel||(e.cancel=()=>r.complete()),n.queryStarted(e);let a=!1;const i=t.subscribe({next:t=>{a||t.state===ie.Loading||(a=!0,n.queryCompleted(e)),r.next(t)},error:e=>r.error(e),complete:()=>{r.complete()}});return()=>{i.unsubscribe(),a||n.queryCompleted(e)}})):t}}const $t=new Set;function Ut(e,t){e.setState(t)}class Gt extends H{constructor(){super(...arguments),this._urlSync=new qt(this)}validateAndUpdate(){return this.getValueOptions({}).pipe((0,m.map)((e=>(this.updateValueGivenNewOptions(e),{}))))}onCancel(){this.setStateHelper({loading:!1});const e=this.parent;null==e||e.cancel(this)}updateValueGivenNewOptions(e){const{value:t,text:n}=this.state,r=this.getStateUpdateGivenNewOptions(e,t,n);this.interceptStateUpdateAfterValidation(r),this.setStateHelper(r),(r.value!==t||r.text!==n||this.hasAllValue())&&this.publishEvent(new Pe(this),!0)}getStateUpdateGivenNewOptions(e,t,n){const r={options:e,loading:!1,value:t,text:n};if(0===e.length)return this.state.defaultToAll||this.state.includeAll?(r.value=We,r.text=ze):this.state.isMulti?(r.value=[],r.text=[]):(r.value="",r.text=""),r;if(this.hasAllValue())return this.state.includeAll||(r.value=e[0].value,r.text=e[0].label,this.state.isMulti&&(r.value=[r.value],r.text=[r.text])),r;if(this.state.isMulti){const a=(Array.isArray(t)?t:[t]).filter((t=>e.find((e=>e.value===t)))),i=a.map((t=>e.find((e=>e.value===t)).label));if(0===a.length){const t=this.getDefaultMultiState(e);r.value=t.value,r.text=t.text}else(0,ee.isEqual)(a,t)||(r.value=a),(0,ee.isEqual)(i,n)||(r.text=i);return r}let a=function(e,t,n){let r;for(const a of n){if(a.value===e)return a;a.label===t&&(r=a)}return r}(t,n,e);return a?(r.text=a.label,r.value=a.value):this.state.defaultToAll?(r.value=We,r.text=ze):(r.value=e[0].value,r.text=e[0].label),r}interceptStateUpdateAfterValidation(e){const t=e.value===We&&this.state.text===ze;this.skipNextValidation&&e.value!==this.state.value&&!t&&(e.value=this.state.value,e.text=this.state.text),this.skipNextValidation=!1}getValue(){return this.hasAllValue()?this.state.allValue?new Qt(this.state.allValue,this):this.state.options.map((e=>e.value)):this.state.value}getValueText(){return this.hasAllValue()?ze:Array.isArray(this.state.text)?this.state.text.join(" + "):String(this.state.text)}hasAllValue(){const e=this.state.value;return e===We||Array.isArray(e)&&e[0]===We}getDefaultMultiState(e){return this.state.defaultToAll?{value:[We],text:[ze]}:e.length>0?{value:[e[0].value],text:[e[0].label]}:{value:[],text:[]}}changeValueTo(e,t){if(e!==this.state.value||t!==this.state.text){if(t||(t=Array.isArray(e)?e.map((e=>this.findLabelTextForValue(e))):this.findLabelTextForValue(e)),Array.isArray(e)){if(0===e.length){const n=this.getDefaultMultiState(this.state.options);e=n.value,t=n.text}e[e.length-1]===We?(e=[We],t=[ze]):e[0]===We&&e.length>1&&(e.shift(),Array.isArray(t)&&t.shift())}(0,ee.isEqual)(e,this.state.value)&&(0,ee.isEqual)(t,this.state.text)||(this.setStateHelper({value:e,text:t,loading:!1}),this.publishEvent(new Pe(this),!0))}}findLabelTextForValue(e){if(e===We)return ze;const t=this.state.options.find((t=>t.value===e));if(t)return t.label;const n=this.state.options.find((t=>t.label===e));return n?n.label:e}setStateHelper(e){Ut(this,e)}getOptionsForSelect(){let e=this.state.options;return this.state.includeAll&&(e=[{value:We,label:ze},...e]),Array.isArray(this.state.value)||e.find((e=>e.value===this.state.value))||(e=[{value:this.state.value,label:String(this.state.text)},...e]),e}}class qt{constructor(e){this._sceneObject=e}getKey(){return`var-${this._sceneObject.state.name}`}getKeys(){return this._sceneObject.state.skipUrlSync?[]:[this.getKey()]}getUrlState(){if(this._sceneObject.state.skipUrlSync)return{};let e=null,t=this._sceneObject.state.value;return e=Array.isArray(t)?t.map(String):this._sceneObject.state.isMulti?[String(t)]:String(t),{[this.getKey()]:e}}updateFromUrl(e){let t=e[this.getKey()];null!=t&&(this._sceneObject.state.includeAll&&(t=function(e){return(0,ee.isArray)(e)&&e[0]===ze?[We]:e===ze?We:e}(t)),this._sceneObject.state.allValue&&this._sceneObject.state.allValue===t&&(t=We),this._sceneObject.isActive||(this._sceneObject.skipNextValidation=!0),this._sceneObject.changeValueTo(t))}}class Qt{constructor(e,t){this._value=e,this._variable=t}formatter(e){return e===ae.Text?ze:e===ae.PercentEncode?Ie.get(ae.PercentEncode).formatter(this._value,[],this._variable):e===ae.QueryParam?Ie.get(ae.QueryParam).formatter(ze,[],this._variable):this._value}}var Yt=f(7);const Kt={RadioButton:{container:"data-testid radio-button"},Breadcrumbs:{breadcrumb:e=>`data-testid ${e} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",overlayContent:"data-testid TimePicker Overlay Content",fromField:"data-testid Time Range from field",toField:"data-testid Time Range to field",applyTimeRange:"data-testid TimePicker submit button",copyTimeRange:"data-testid TimePicker copy button",pasteTimeRange:"data-testid TimePicker paste button",calendar:{label:"data-testid Time Range calendar",openButton:"data-testid Open time range calendar",closeButton:"data-testid Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DateTimePicker:{input:"data-testid date-time-input"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"data-testid Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{connectionSettings:"Data source connection URL",manageAlerts:"prometheus-alerts-manager",scrapeInterval:"data-testid scrape interval",queryTimeout:"data-testid query timeout",defaultEditor:"data-testid default editor",disableMetricLookup:"disable-metric-lookup",prometheusType:"data-testid prometheus type",prometheusVersion:"data-testid prometheus version",cacheLevel:"data-testid cache level",incrementalQuerying:"prometheus-incremental-querying",queryOverlapWindow:"data-testid query overlap window",disableRecordingRules:"disable-recording-rules",customQueryParameters:"data-testid custom query parameters",httpMethod:"data-testid http method",exemplarsAddButton:"data-testid Add exemplar config button",internalLinkSwitch:"data-testid Internal link switch"},queryEditor:{explain:"data-testid prometheus explain switch wrapper",editorToggle:"data-testid QueryEditorModeToggle",options:"data-testid prometheus options",legend:"data-testid prometheus legend wrapper",format:"data-testid prometheus format",step:"prometheus-step",type:"data-testid prometheus type",exemplars:"prometheus-exemplars",builder:{metricSelect:"data-testid metric select",hints:"data-testid prometheus hints",metricsExplorer:"data-testid metrics explorer",queryAdvisor:"data-testid query advisor"},code:{queryField:"data-testid prometheus query field",metricsBrowser:{openButton:"data-testid open metrics browser",selectMetric:"data-testid select a metric",metricList:"data-testid metric list",labelNamesFilter:"data-testid label names filter",labelValuesFilter:"data-testid label values filter",useQuery:"data-testid use query",useAsRateQuery:"data-testid use as rate query",validateSelector:"data-testid validate selector",clear:"data-testid clear"}}},exemplarMarker:"data-testid Exemplar marker",variableQueryEditor:{queryType:"data-testid query type",labelnames:{metricRegex:"data-testid label names metric regex"},labelValues:{labelSelect:"data-testid label values label select"},metricNames:{metricRegex:"data-testid metric names metric regex"},varQueryResult:"data-testid variable query result",seriesQuery:"data-testid prometheus series query",classicQuery:"data-testid prometheus classic query"},annotations:{minStep:"prometheus-annotation-min-step",title:"data-testid prometheus annotation title",tags:"data-testid prometheus annotation tags",text:"data-testid prometheus annotation text",seriesValueAsTimestamp:"data-testid prometheus annotation series value as timestamp"}}},Menu:{MenuComponent:e=>`${e} menu`,MenuGroup:e=>`${e} menu group`,MenuItem:e=>`${e} menu item`,SubMenu:{container:"data-testid SubMenu container",icon:"data-testid SubMenu icon"}},Panels:{Panel:{title:e=>`data-testid Panel header ${e}`,headerItems:e=>`data-testid Panel header item ${e}`,menuItems:e=>`data-testid Panel menu item ${e}`,menu:e=>`data-testid Panel menu ${e}`,containerByTitle:e=>`${e} panel`,headerCornerInfo:e=>`Panel header ${e}`,status:e=>`data-testid Panel status ${e}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-testid hover-header-container",dragIcon:"data-testid drag-icon"},PanelDataErrorMessage:"data-testid Panel data error message"},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:e=>`gpl alias ${e}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"data testid Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer",body:"data-testid table body"}}},VizLegend:{seriesName:e=>`data-testid VizLegend series ${e}`},Drawer:{General:{title:e=>`Drawer title ${e}`,expand:"Drawer expand",contract:"Drawer contract",close:"data-testid Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper",subtitle:"data-testid drawer subtitle"},DashboardSaveDrawer:{saveButton:"data-testid Save dashboard drawer button",saveAsButton:"data-testid Save as dashboard drawer button",saveAsTitleInput:"Save dashboard title field"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:e=>`${e} field property editor`,fieldInput:e=>`data-testid Panel editor option pane field input ${e}`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",showZoomField:"Map controls Show zoom control field property editor",showAttributionField:"Map controls Show attribution field property editor",showScaleField:"Map controls Show scale field property editor",showMeasureField:"Map controls Show measure tools field property editor",showDebugField:"Map controls Show debug field property editor",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:e=>`Tab ${e}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"data-testid query-history-button",addQuery:"data-testid query-tab-add-query",queryGroupTopSection:"data-testid query group top section",addExpression:"data-testid query-tab-add-expression"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:e=>`data-testid ${e}`,title:e=>`Query editor row title ${e}`,container:e=>`Query editor row ${e}`},AlertTab:{content:"data-testid Alert editor tab content"},AlertRules:{groupToggle:"data-testid group-collapse-toggle",toggle:"data-testid collapse-toggle",expandedContent:"data-testid expanded-content"},Alert:{alert:e=>`Alert ${e}`,alertV2:e=>`data-testid Alert ${e}`},TransformTab:{content:"data-testid Transform editor tab content",newTransform:e=>`data-testid New transform ${e}`,transformationEditor:e=>`data-testid Transformation editor ${e}`,transformationEditorDebugger:e=>`data-testid Transformation editor debugger ${e}`},Transforms:{card:e=>`data-testid New transform ${e}`,disableTransformationButton:"data-testid Disable transformation button",Reduce:{modeLabel:"data-testid Transform mode label",calculationsLabel:"data-testid Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location Mode field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"data-testid search transformations",noTransformationsMessage:"data-testid no transformations message",addTransformationButton:"data-testid add transformation button",removeAllTransformationsButton:"data-testid remove all transformations button"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"data-testid Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{Menu:"data-testid navigation mega-menu",item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar",shareDashboard:"data-testid Share dashboard",markAsFavorite:"data-testid Mark as favorite",editDashboard:{editButton:"data-testid Edit dashboard button",saveButton:"data-testid Save dashboard button",exitButton:"data-testid Exit edit mode button",settingsButton:"data-testid Dashboard settings",addRowButton:"data-testid Add row button",addLibraryPanelButton:"data-testid Add a panel from the panel library button",addVisualizationButton:"data-testid Add new visualization menu item",pastePanelButton:"data-testid Paste panel button",discardChangesButton:"data-testid Discard changes button",discardLibraryPanelButton:"data-testid Discard library panel button",unlinkLibraryPanelButton:"data-testid Unlink library panel button",saveLibraryPanelButton:"data-testid Save library panel button",backToDashboardButton:"data-testid Back to dashboard button"}},PageToolbar:{container:()=>".page-toolbar",item:e=>`${e}`,itemButton:e=>`data-testid ${e}`},QueryEditorToolbarItem:{button:e=>`QueryEditor toolbar item button ${e}`},BackButton:{backArrow:"data-testid Go Back"},OptionsGroup:{group:e=>e?`Options group ${e}`:"Options group",toggle:e=>e?`Options group ${e} toggle`:"Options group toggle"},PluginVisualization:{item:e=>`Plugin visualization item ${e}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"data-testid folder-picker-input"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"data-testid Select a data source",dataSourceList:"data-testid Data source list dropdown",advancedModal:{dataSourceList:"data-testid Data source list",builtInDataSourceList:"data-testid Built in data source list"}},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container",changeTimeSettingsButton:"data-testid Time zone picker Change time settings button"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"data-testid Query field"},QueryBuilder:{queryPatterns:"data-testid Query patterns",labelSelect:"data-testid Select label",valueSelect:"data-testid Select value",matchOperatorSelect:"data-testid Select match operator"},ValuePicker:{button:e=>`data-testid Value picker button ${e}`,select:e=>`data-testid Value picker select ${e}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:e=>`data-testid Collapse folder ${e}`,expandFolder:e=>`data-testid Expand folder ${e}`,dashboardItem:e=>`${Kt.Search.dashboardItems} ${e}`,dashboardCard:e=>`data-testid Search card ${e}`,folderHeader:e=>`data-testid Folder header ${e}`,folderContent:e=>`data-testid Folder content ${e}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"data-testid Loading indicator"},CallToActionCard:{button:e=>`Call to action button ${e}`,buttonV2:e=>`data-testid Call to action button ${e}`},DataLinksContextMenu:{singleLink:"data-testid Data link"},CodeEditor:{container:"data-testid Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"data-testid Unified alert editor tab content"},VisualizationPreview:{card:e=>`data-testid suggestion-${e}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:e=>`data-testid dashboard-row-title-${e}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table",extensionPointTabs:"data-testid-extension-point-tabs",extensionPointTab:e=>`data-testid-extension-point-tab-${e}`},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input",editor:{testButton:"data-testid annotations-test-button",resultContainer:"data-testid annotations-query-result-container"}},Tooltip:{container:"data-testid tooltip"},ReturnToPrevious:{buttonGroup:"data-testid dismissable button group",backButton:"data-testid back",dismissButton:"data-testid dismiss"},SQLQueryEditor:{selectColumn:"data-testid select-column",selectAggregation:"data-testid select-aggregation",selectAlias:"data-testid select-alias",filterConjunction:"data-testid filter-conjunction",filterField:"data-testid filter-field",filterOperator:"data-testid filter-operator",headerTableSelector:"data-testid header-table-selector",headerFilterSwitch:"data-testid header-filter-switch",headerGroupSwitch:"data-testid header-group-switch",headerOrderSwitch:"data-testid header-order-switch",headerPreviewSwitch:"data-testid header-preview-switch"}},Xt={pages:{Login:{url:"/login",username:"data-testid Username input field",password:"data-testid Password input field",submit:"data-testid Login button",skip:"data-testid Skip change password button"},Home:{url:"/"},DataSource:{name:"data-testid Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"data-testid Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"data-testid Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:e=>`Data source list item ${e}`},EditDataSource:{url:e=>`/datasources/edit/${e}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:e=>`Data source plugin item ${e}`,dataSourcePluginsV2:e=>`Add new data source ${e}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:e=>`data-testid ${e}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:e=>`/d/${e}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag",shareButton:"data-testid share-button",scrollContainer:"data-testid Dashboard canvas scroll container",playlistControls:{prev:"data-testid playlist previous dashboard button",stop:"data-testid playlist stop dashboard button",next:"data-testid playlist next dashboard button"}},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:e=>`data-testid Dashboard template variables submenu Label ${e}`,submenuItemValueDropDownValueLinkTexts:e=>`data-testid Dashboard template variables Variable Value DropDown value link text ${e}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:e=>`data-testid Dashboard template variables Variable Value DropDown option text ${e}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:e=>`data-testid Dashboard annotations submenu Label ${e}`,annotationToggle:e=>`data-testid Dashboard annotations submenu Toggle ${e}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:e=>`Dashboard settings section item ${e}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:Kt.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:Kt.CallToActionCard.buttonV2("Add annotation query"),annotations:"data-testid list-annotations"},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview",delete:"data-testid annotations-delete",apply:"data-testid annotations-apply",enable:"data-testid annotation-enable",hide:"data-testid annotation-hide"}},Variables:{List:{addVariableCTA:Kt.CallToActionCard.button("Add variable"),addVariableCTAV2:Kt.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:e=>`Variable editor Table Name field ${e}`,tableRowDefinitionFields:e=>`Variable editor Table Definition field ${e}`,tableRowArrowUpButtons:e=>`Variable editor Table ArrowUp button ${e}`,tableRowArrowDownButtons:e=>`Variable editor Table ArrowDown button ${e}`,tableRowDuplicateButtons:e=>`Variable editor Table Duplicate button ${e}`,tableRowRemoveButtons:e=>`Variable editor Table Remove button ${e}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"data-testid Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"data-testid Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"data-testid Variable editor Preview of Values option",submitButton:"data-testid Variable editor Run Query button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:Kt.DataSourcePicker.inputV2,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"data-testid Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input",autoEnabledCheckbox:"data-testid interval variable auto value checkbox",stepCountIntervalSelect:"data-testid interval variable step count input",minIntervalInput:"data-testid interval variable mininum interval input"},GroupByVariable:{dataSourceSelect:Kt.DataSourcePicker.inputV2,infoText:"data-testid group by variable info text",modeToggle:"data-testid group by variable mode toggle"},AdHocFiltersVariable:{datasourceSelect:Kt.DataSourcePicker.inputV2,infoText:"data-testid ad-hoc filters variable info text",modeToggle:"data-testid ad-hoc filters variable mode toggle"}}}},Annotations:{marker:"data-testid annotation-marker"},Rows:{Repeated:{ConfigSection:{warningMessage:"data-testid Repeated rows warning message"}}}},Dashboards:{url:"/dashboards",dashboards:e=>`Dashboard search item ${e}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox",saveRefresh:"Dashboard settings Save Dashboard Modal Save refresh checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",SettingsDropdown:"data-testid public dashboard settings dropdown",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}},PublicDashboardScene:{Tab:"Tab Public Dashboard"}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"},footer:"public-dashboard-footer"},PublicDashboardScene:{loadingPage:"public-dashboard-scene-loading-page",page:"public-dashboard-scene-page",controls:"public-dashboard-controls"},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},PublicDashboardConfirmAccess:{submitButton:"data-testid confirm-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:e=>`/d-solo/${e}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"data-testid Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"data-testid Plugin signature info",disabledInfo:"data-testid Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"data-testid playlist-form-delete-item"},BrowseDashboards:{table:{body:"data-testid browse-dashboards-table",row:e=>`data-testid browse dashboards row ${e}`,checkbox:e=>`data-testid ${e} checkbox`},NewFolderForm:{form:"data-testid new folder form",nameInput:"data-testid new-folder-name-input",createButton:"data-testid new-folder-create-button"}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button",pauseSwitch:"data-testid public dashboard pause switch"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",anonUserDevices:"data-testid anon-user-devices-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UserAnonListPage:{container:"data-testid user-anon-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:e=>`data-testid dashboards-list-item-${e}`}}},ProfilePage:{url:"/profile"}},components:Kt};var Zt=f(89);const Jt=new Intl.Collator("en",{numeric:!0,sensitivity:"base"}).compare,en=1/0,tn=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),nn="eexxaacctt",rn=(e,t,n)=>e.replace("A-Z",t).replace("a-z",n),an={unicode:!1,alpha:null,interSplit:"[^A-Za-z\\d']+",intraSplit:"[a-z][A-Z]",intraBound:"[A-Za-z]\\d|\\d[A-Za-z]|[a-z][A-Z]",interLft:0,interRgt:0,interChars:".",interIns:en,intraChars:"[a-z\\d']",intraIns:null,intraContr:"'[a-z]{1,2}\\b",intraMode:0,intraSlice:[1,en],intraSub:null,intraTrn:null,intraDel:null,intraFilt:(e,t,n)=>!0,sort:(e,t,n)=>{let{idx:r,chars:a,terms:i,interLft2:o,interLft1:s,start:l,intraIns:c,interIns:u}=e;return r.map(((e,t)=>t)).sort(((e,n)=>a[n]-a[e]||c[e]-c[n]||i[n]+o[n]+.5*s[n]-(i[e]+o[e]+.5*s[e])||u[e]-u[n]||l[e]-l[n]||Jt(t[r[e]],t[r[n]])))}},on=(e,t)=>0==t?"":1==t?e+"??":t==en?e+"*?":e+`{0,${t}}?`,sn="(?:\\b|_)";function ln(e){e=Object.assign({},an,e);let{unicode:t,interLft:n,interRgt:r,intraMode:a,intraSlice:i,intraIns:o,intraSub:s,intraTrn:l,intraDel:c,intraContr:u,intraSplit:d,interSplit:p,intraBound:f,intraChars:h}=e;o??=a,s??=a,l??=a,c??=a;let g=e.letters??e.alpha;if(null!=g){let e=g.toLocaleUpperCase(),t=g.toLocaleLowerCase();p=rn(p,e,t),d=rn(d,e,t),f=rn(f,e,t),h=rn(h,e,t),u=rn(u,e,t)}let m=t?"u":"";const b='".+?"',v=new RegExp(b,"gi"+m),y=new RegExp(`(?:\\s+|^)-(?:${h}+|${b})`,"gi"+m);let{intraRules:w}=e;null==w&&(w=e=>{let t=an.intraSlice,n=0,r=0,a=0,u=0;if(/[^\d]/.test(e)){let d=e.length;d<=4?d>=3&&(a=Math.min(l,1),4==d&&(n=Math.min(o,1))):(t=i,n=o,r=s,a=l,u=c)}return{intraSlice:t,intraIns:n,intraSub:r,intraTrn:a,intraDel:u}});let S=!!d,x=new RegExp(d,"g"+m),O=new RegExp(p,"g"+m),_=new RegExp("^"+p+"|"+p+"$","g"+m),C=new RegExp(u,"gi"+m);const E=e=>{let t=[];e=(e=e.replace(v,(e=>(t.push(e),nn)))).replace(_,"").toLocaleLowerCase(),S&&(e=e.replace(x,(e=>e[0]+" "+e[1])));let n=0;return e.split(O).filter((e=>""!=e)).map((e=>e===nn?t[n++]:e))},P=/[^\d]+|\d+/g,D=(t,i=0,s=!1)=>{let l=E(t);if(0==l.length)return[];let c,u=Array(l.length).fill("");if(l=l.map(((e,t)=>e.replace(C,(e=>(u[t]=e,""))))),1==a)c=l.map(((e,t)=>{if('"'===e[0])return tn(e.slice(1,-1));let n="";for(let r of e.matchAll(P)){let e=r[0],{intraSlice:a,intraIns:i,intraSub:o,intraTrn:s,intraDel:l}=w(e);if(i+o+s+l==0)n+=e+u[t];else{let[r,c]=a,d=e.slice(0,r),p=e.slice(c),f=e.slice(r,c);1==i&&1==d.length&&d!=f[0]&&(d+="(?!"+d+")");let g=f.length,m=[e];if(o)for(let e=0;e<g;e++)m.push(d+f.slice(0,e)+h+f.slice(e+1)+p);if(s)for(let e=0;e<g-1;e++)f[e]!=f[e+1]&&m.push(d+f.slice(0,e)+f[e+1]+f[e]+f.slice(e+2)+p);if(l)for(let e=0;e<g;e++)m.push(d+f.slice(0,e+1)+"?"+f.slice(e+1)+p);if(i){let e=on(h,1);for(let t=0;t<g;t++)m.push(d+f.slice(0,t)+e+f.slice(t)+p)}n+="(?:"+m.join("|")+")"+u[t]}}return n}));else{let e=on(h,o);2==i&&o>0&&(e=")("+e+")("),c=l.map(((t,n)=>'"'===t[0]?tn(t.slice(1,-1)):t.split("").map(((e,t,n)=>(1==o&&0==t&&n.length>1&&e!=n[t+1]&&(e+="(?!"+e+")"),e))).join(e)+u[n]))}let d=2==n?sn:"",p=2==r?sn:"",f=p+on(e.interChars,e.interIns)+d;return i>0?s?c=d+"("+c.join(")"+p+"|"+d+"(")+")"+p:(c="("+c.join(")("+f+")(")+")",c="(.??"+d+")"+c+"("+p+".*)"):(c=c.join(f),c=d+c+p),[new RegExp(c,"i"+m),l,u]},k=(e,t,n)=>{let[r]=D(t);if(null==r)return null;let a=[];if(null!=n)for(let t=0;t<n.length;t++){let i=n[t];r.test(e[i])&&a.push(i)}else for(let t=0;t<e.length;t++)r.test(e[t])&&a.push(t);return a};let T=!!f,R=new RegExp(p,m),j=new RegExp(f,m);const I=(t,a,i)=>{let[o,s,l]=D(i,1),[c]=D(i,2),u=s.length,d=t.length,p=Array(d).fill(0),f={idx:Array(d),start:p.slice(),chars:p.slice(),terms:p.slice(),interIns:p.slice(),intraIns:p.slice(),interLft2:p.slice(),interRgt2:p.slice(),interLft1:p.slice(),interRgt1:p.slice(),ranges:Array(d)},h=1==n||1==r,g=0;for(let i=0;i<t.length;i++){let d=a[t[i]],p=d.match(o),b=p.index+p[1].length,v=b,y=!1,w=0,S=0,x=0,O=0,_=0,C=0,E=0,P=0,D=[];for(let t=0,a=2;t<u;t++,a+=2){let i=p[a].toLocaleLowerCase(),o=s[t],c='"'==o[0]?o.slice(1,-1):o+l[t],f=c.length,g=i.length,k=i==c;if(!k&&p[a+1].length>=f){let e=p[a+1].toLocaleLowerCase().indexOf(c);e>-1&&(D.push(v,g,e,f),v+=A(p,a,e,f),i=c,g=f,k=!0,0==t&&(b=v))}if(h||k){let e=v-1,o=v+g,s=!1,l=!1;if(-1==e||R.test(d[e]))k&&w++,s=!0;else{if(2==n){y=!0;break}if(T&&j.test(d[e]+d[e+1]))k&&S++,s=!0;else if(1==n){let e=p[a+1],n=v+g;if(e.length>=f){let r,o=0,l=!1,u=new RegExp(c,"ig"+m);for(;r=u.exec(e);){o=r.index;let e=n+o,t=e-1;if(-1==t||R.test(d[t])){w++,l=!0;break}if(j.test(d[t]+d[e])){S++,l=!0;break}}l&&(s=!0,D.push(v,g,o,f),v+=A(p,a,o,f),i=c,g=f,k=!0,0==t&&(b=v))}if(!s){y=!0;break}}}if(o==d.length||R.test(d[o]))k&&x++,l=!0;else{if(2==r){y=!0;break}if(T&&j.test(d[o-1]+d[o]))k&&O++,l=!0;else if(1==r){y=!0;break}}k&&(_+=f,s&&l&&C++)}if(g>f&&(P+=g-f),t>0&&(E+=p[a-1].length),!e.intraFilt(c,i,v)){y=!0;break}t<u-1&&(v+=g+p[a+1].length)}if(!y){f.idx[g]=t[i],f.interLft2[g]=w,f.interLft1[g]=S,f.interRgt2[g]=x,f.interRgt1[g]=O,f.chars[g]=_,f.terms[g]=C,f.interIns[g]=E,f.intraIns[g]=P,f.start[g]=b;let e=d.match(c),n=e.index+e[1].length,r=D.length,a=r>0?0:1/0,o=r-4;for(let t=2;t<e.length;){let r=e[t].length;if(a<=o&&D[a]==n){let r=D[a+1],i=D[a+2],o=D[a+3],s=t,l="";for(let t=0;t<r;s++)l+=e[s],t+=e[s].length;e.splice(t,s-t,l),n+=A(e,t,i,o),a+=4}else n+=r,t++}n=e.index+e[1].length;let s=f.ranges[g]=[],l=n,u=n;for(let t=2;t<e.length;t++){let r=e[t].length;n+=r,t%2==0?u=n:r>0&&(s.push(l,u),l=u=n)}u>l&&s.push(l,u),g++}}if(g<t.length)for(let e in f)f[e]=f[e].slice(0,g);return f},A=(e,t,n,r)=>{let a=e[t]+e[t+1].slice(0,n);return e[t-1]+=a,e[t]=e[t+1].slice(n,n+r),e[t+1]=e[t+1].slice(n+r),a.length};return{search:(...t)=>((t,n,r,a=1e3,i)=>{r=r?!0===r?5:r:0;let o=null,s=null,l=[];n=n.replace(y,(e=>{let t=e.trim().slice(1);return'"'===t[0]&&(t=tn(t.slice(1,-1))),l.push(t),""}));let c,u=E(n);if(l.length>0){if(c=new RegExp(l.join("|"),"i"+m),0==u.length){let e=[];for(let n=0;n<t.length;n++)c.test(t[n])||e.push(n);return[e,null,null]}}else if(0==u.length)return[null,null,null];if(r>0){let e=E(n);if(e.length>1){let n=e.slice().sort(((e,t)=>t.length-e.length));for(let e=0;e<n.length;e++){if(0==i?.length)return[[],null,null];i=k(t,n[e],i)}if(e.length>r)return[i,null,null];o=un(e).map((e=>e.join(" "))),s=[];let a=new Set;for(let e=0;e<o.length;e++)if(a.size<i.length){let n=i.filter((e=>!a.has(e))),r=k(t,o[e],n);for(let e=0;e<r.length;e++)a.add(r[e]);s.push(r)}else s.push([])}}null==o&&(o=[n],s=[i?.length>0?i:k(t,n)]);let d=null,p=null;if(l.length>0&&(s=s.map((e=>e.filter((e=>!c.test(t[e])))))),s.reduce(((e,t)=>e+t.length),0)<=a){d={},p=[];for(let n=0;n<s.length;n++){let r=s[n];if(null==r||0==r.length)continue;let a=o[n],i=I(r,t,a),l=e.sort(i,t,a);if(n>0)for(let e=0;e<l.length;e++)l[e]+=p.length;for(let e in i)d[e]=(d[e]??[]).concat(i[e]);p=p.concat(l)}}return[[].concat(...s),d,p]})(...t),split:E,filter:k,info:I,sort:e.sort}}const cn=(()=>{let e={A:"",a:"",E:"",e:"",I:"",i:"",O:"",o:"",U:"",u:"",C:"",c:"",L:"",l:"",N:"",n:"",S:"",s:"",Z:"",z:""},t=new Map,n="";for(let r in e)e[r].split("").forEach((e=>{n+=e,t.set(e,r)}));let r=new RegExp(`[${n}]`,"g"),a=e=>t.get(e);return e=>{if("string"==typeof e)return e.replace(r,a);let t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n].replace(r,a);return t}})();function un(e){let t,n,r=(e=e.slice()).length,a=[e.slice()],i=new Array(r).fill(0),o=1;for(;o<r;)i[o]<o?(t=o%2&&i[o],n=e[o],e[o]=e[t],e[t]=n,++i[o],o=1,a.push(e.slice())):(i[o]=0,++o);return a}const dn=(e,t)=>t?`<mark>${e}</mark>`:e,pn=(e,t)=>e+t;function fn(e,t){const n=new ln;let r=e;const a=[],i=1e4;return t&&(r=[{value:We,label:ze},...r]),e=>{if(""===e)return r.length>i?r.slice(0,i):r;if(0===a.length)for(let e=0;e<r.length;e++)a.push(r[e].label);const t=n.filter(a,e),o=[];if(t){for(let e=0;e<t.length;e++)if(o.push(r[t[e]]),o.length>i)return o;return o}return r.length>i?r.slice(0,i):r}}ln.latinize=cn,ln.permute=e=>un([...Array(e.length).keys()]).sort(((e,t)=>{for(let n=0;n<e.length;n++)if(e[n]!=t[n])return e[n]-t[n];return 0})).map((t=>t.map((t=>e[t])))),ln.highlight=function(e,t,n=dn,r="",a=pn){r=a(r,n(e.substring(0,t[0]),!1))??r;for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];r=a(r,n(e.substring(o,s),!0))??r,i<t.length-3&&(r=a(r,n(e.substring(t[i+1],t[i+2]),!1))??r)}return a(r,n(e.substring(t[t.length-1]),!1))??r};var hn=Object.defineProperty,gn=Object.defineProperties,mn=Object.getOwnPropertyDescriptors,bn=Object.getOwnPropertySymbols,vn=Object.prototype.hasOwnProperty,yn=Object.prototype.propertyIsEnumerable,wn=(e,t,n)=>t in e?hn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Sn=()=>!0;function xn({model:e}){const{value:r,text:a,key:i,options:o,includeAll:s,isReadOnly:l}=e.useState(),[c,u]=(0,t.useState)(""),[d,p]=(0,t.useState)(!1),f=function(e,t){return{value:e,label:null!=t?t:String(e)}}(r,String(a)),h=(0,t.useMemo)((()=>fn(o,s)),[o,s])(c);return n().createElement(Yt.Select,{id:i,isValidNewOption:e=>e.trim().length>0,placeholder:"Select value",width:"auto",disabled:l,value:f,inputValue:c,allowCustomValue:!0,virtualized:!0,filterOption:Sn,tabSelectsValue:!1,onInputChange:(t,{action:n})=>"input-change"===n?(u(t),e.onSearchChange&&e.onSearchChange(t),t):t,onOpenMenu:()=>{d&&u(String(a))},onCloseMenu:()=>{u("")},options:h,"data-testid":Xt.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${r}`),onChange:t=>{e.changeValueTo(t.value,t.label),d!==t.__isNew__&&p(t.__isNew__)}})}function On({model:e}){const{value:r,options:a,key:i,maxVisibleValues:o,noValueOnClear:s,includeAll:l,isReadOnly:c}=e.useState(),u=(0,t.useMemo)((()=>(0,ee.isArray)(r)?r:[r]),[r]),[d,p]=(0,t.useState)(u),[f,h]=(0,t.useState)(""),g=(0,t.useMemo)((()=>fn(a,l)),[a,l]);(0,t.useEffect)((()=>{p(u)}),[u]);const m=a.length>0?"Select value":"",b=g(f);return n().createElement(Yt.MultiSelect,{id:i,placeholder:m,width:"auto",inputValue:f,disabled:c,value:d,noMultiValueWrap:!0,maxVisibleValues:null!=o?o:5,tabSelectsValue:!1,virtualized:!0,allowCustomValue:!0,options:b,closeMenuOnSelect:!1,components:{Option:_n},isClearable:!0,hideSelectedOptions:!1,onInputChange:(t,{action:n})=>"input-change"===n?(h(t),e.onSearchChange&&e.onSearchChange(t),t):"input-blur"===n?(h(""),""):f,onBlur:()=>{e.changeValueTo(d)},filterOption:Sn,"data-testid":Xt.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${d}`),onChange:(t,n)=>{"clear"===n.action&&s&&e.changeValueTo([]),p(t.map((e=>e.value)))}})}const _n=({children:e,data:t,innerProps:r,innerRef:a,isFocused:i,isSelected:o,renderOptionLabel:s})=>{var l;const c=((e,t)=>{var n={};for(var r in e)vn.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&bn)for(var r of bn(e))t.indexOf(r)<0&&yn.call(e,r)&&(n[r]=e[r]);return n})(r,["onMouseMove","onMouseOver"]),u=(0,Yt.useTheme2)(),d=(0,Yt.getSelectStyles)(u),p=(0,Yt.useStyles2)(Cn);return n().createElement("div",(f=((e,t)=>{for(var n in t||(t={}))vn.call(t,n)&&wn(e,n,t[n]);if(bn)for(var n of bn(t))yn.call(t,n)&&wn(e,n,t[n]);return e})({ref:a,className:(0,Zt.cx)(d.option,i&&d.optionFocused)},c),h={"data-testid":"data-testid Select option",title:t.title},gn(f,mn(h))),n().createElement("div",{className:p.checkbox},n().createElement(Yt.Checkbox,{value:o})),n().createElement("div",{className:d.optionBody,"data-testid":Xt.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(null!=(l=t.label)?l:String(t.value))},n().createElement("span",null,e)));var f,h};_n.displayName="SelectMenuOptions";const Cn=e=>({checkbox:(0,Zt.css)({marginRight:e.spacing(2)})});function En(e){return e.state.isMulti?n().createElement(On,{model:e}):n().createElement(xn,{model:e})}class Pn{constructor(e){this._sceneObject=e}getKey(){return`var-${this._sceneObject.state.name}`}getKeys(){return this._sceneObject.state.skipUrlSync?[]:[this.getKey()]}getUrlState(){return this._sceneObject.state.skipUrlSync?{}:{[this.getKey()]:Dn(this._sceneObject.state.value,this._sceneObject.state.text)}}updateFromUrl(e){let t=e[this.getKey()];if(null!=t){this._sceneObject.isActive||(this._sceneObject.skipNextValidation=!0);const{values:e,texts:r}=(n=t,(n=Array.isArray(n)?n:[n]).reduce(((e,t)=>{const[n,r]=(null!=t?t:"").split(",");return e.values.push(Nr(n)),e.texts.push(Nr(null!=r?r:n)),e}),{values:[],texts:[]}));this._sceneObject.changeValueTo(e,r)}var n}}function Dn(e,t){return e=Array.isArray(e)?e:[e],t=Array.isArray(t)?t:[t],e.map(((e,n)=>{if(null==e)return"";e=String(e);let r=t[n];return r=null==r?e:String(r),Fr(e,r)}))}function kn(e){const t=e.getRoot();return"enrichFiltersRequest"in t?t.enrichFiltersRequest(e):null}var Tn=Object.defineProperty,Rn=Object.defineProperties,jn=Object.getOwnPropertyDescriptors,In=Object.getOwnPropertySymbols,An=Object.prototype.hasOwnProperty,Ln=Object.prototype.propertyIsEnumerable,Nn=(e,t,n)=>t in e?Tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fn=(e,t)=>{for(var n in t||(t={}))An.call(t,n)&&Nn(e,n,t[n]);if(In)for(var n of In(t))Ln.call(t,n)&&Nn(e,n,t[n]);return e};class Mn extends Gt{constructor(e){var t;super((t=Fn({isMulti:!0,name:"",value:[],text:[],options:[],datasource:null,baseFilters:[],applyMode:"auto",layout:"horizontal",type:"groupby"},e),Rn(t,jn({noValueOnClear:!0})))),this.isLazy=!0,this._urlSync=new Pn(this),this._getKeys=async e=>{var t,n,r;const a=await(null==(n=(t=this.state).getTagKeysProvider)?void 0:n.call(t,this,null));if(a&&a.replace)return a.values;if(this.state.defaultOptions)return this.state.defaultOptions.concat(Mr(null!=(r=null==a?void 0:a.values)?r:[]));if(!e.getTagKeys)return[];const i=Ir(this),o=this.state.baseFilters||[],s=pt.getTimeRange(this).state.value,l=await e.getTagKeys(Fn({filters:o,queries:i,timeRange:s},kn(this)));Br(l)&&this.setState({error:l.error.message});let c=Mr(l);a&&(c=c.concat(Mr(a.values)));const u=this.state.tagKeyRegexFilter;return u&&(c=c.filter((e=>e.text.match(u)))),c},this.addActivationHandler((()=>($t.add(this),()=>$t.delete(this))))}validateAndUpdate(){return this.getValueOptions({}).pipe((0,m.map)((e=>(this._updateValueGivenNewOptions(e),{}))))}_updateValueGivenNewOptions(e){const{value:t,text:n}=this.state,r={options:e,loading:!1,value:null!=t?t:[],text:null!=n?n:[]};this.setState(r)}getValueOptions(e){return this.state.defaultOptions?(0,m.of)(this.state.defaultOptions.map((e=>({label:e.text,value:String(e.value)})))):(this.setState({loading:!0,error:null}),(0,m.from)(vt(this.state.datasource,{__sceneObject:{text:"__sceneObject",value:this}})).pipe((0,m.mergeMap)((e=>(0,m.from)(this._getKeys(e)).pipe((0,m.tap)((e=>{Br(e)&&this.setState({error:e.error.message})})),(0,m.map)((e=>Mr(e))),(0,m.take)(1),(0,m.mergeMap)((e=>{const t=e.map((e=>({label:e.text,value:e.value?String(e.value):e.text})));return(0,m.of)(t)})))))))}getDefaultMultiState(e){return{value:[],text:[]}}}Mn.Component=function({model:e}){const{value:r,text:a,key:i,maxVisibleValues:o,noValueOnClear:s,options:l,includeAll:c}=e.useState(),u=(0,t.useMemo)((()=>{const e=(0,ee.isArray)(r)?r:[r],t=(0,ee.isArray)(a)?a:[a];return e.map(((e,n)=>{var r;return{value:e,label:String(null!=(r=t[n])?r:e)}}))}),[r,a]),[d,p]=(0,t.useState)(!1),[f,h]=(0,t.useState)(!1),[g,b]=(0,t.useState)(""),[v,y]=(0,t.useState)(u),w=(0,t.useMemo)((()=>fn(l,c)),[l,c]);(0,t.useEffect)((()=>{y(u)}),[u]);const S=w(g);return n().createElement(Yt.MultiSelect,{"data-testid":`GroupBySelect-${i}`,id:i,placeholder:"Select value",width:"auto",inputValue:g,value:v,noMultiValueWrap:!0,maxVisibleValues:null!=o?o:5,tabSelectsValue:!1,virtualized:!0,options:S,filterOption:Bn,closeMenuOnSelect:!1,isOpen:f,isClearable:!0,hideSelectedOptions:!1,isLoading:d,components:{Option:_n},onInputChange:(t,{action:n})=>"input-change"===n?(b(t),e.onSearchChange&&e.onSearchChange(t),t):"input-blur"===n?(b(""),""):g,onBlur:()=>{e.changeValueTo(v.map((e=>e.value)),v.map((e=>e.label)))},onChange:(t,n)=>{"clear"===n.action&&s&&e.changeValueTo([]),y(t)},onOpenMenu:async()=>{p(!0),await(0,m.lastValueFrom)(e.validateAndUpdate()),p(!1),h(!0)},onCloseMenu:()=>{h(!1)}})};const Bn=()=>!0;function Vn(e){return n().createElement(Yt.Tooltip,{content:"Cancel query"},n().createElement(Yt.Icon,{className:"spin-clockwise",name:"sync",size:"xs",role:"button",onMouseDown:t=>{e.onCancel(t)}}))}function zn(e){const t=(0,Yt.useStyles2)(Wn),r=(0,Yt.useTheme2)(),a="vertical"===e.layout,i=Boolean(e.isLoading)?n().createElement("div",{style:{marginLeft:r.spacing(1),marginTop:"-1px"},"aria-label":Xt.components.LoadingIndicator.icon},n().createElement(Vn,{onCancel:t=>{var n;t.preventDefault(),t.stopPropagation(),null==(n=e.onCancel)||n.call(e)}})):null;let o=null;e.error&&(o=n().createElement(Yt.Tooltip,{content:e.error,placement:"bottom"},n().createElement(Yt.Icon,{className:t.errorIcon,name:"exclamation-triangle"})));let s=null;e.description&&(s=n().createElement(Yt.Tooltip,{content:e.description,placement:a?"top":"bottom"},n().createElement(Yt.Icon,{className:t.normalIcon,name:"info-circle"})));const l="string"==typeof e.label?Xt.pages.Dashboard.SubMenu.submenuItemLabels(e.label):"";let c;return c=a?n().createElement("label",{className:t.verticalLabel,"data-testid":l,htmlFor:e.htmlFor},e.label,s,o,e.icon&&n().createElement(Yt.Icon,{name:e.icon,className:t.normalIcon}),i,e.onRemove&&n().createElement(Yt.IconButton,{variant:"secondary",size:"xs",name:"times",onClick:e.onRemove,tooltip:"Remove"})):n().createElement("label",{className:t.horizontalLabel,"data-testid":l,htmlFor:e.htmlFor},o,e.icon&&n().createElement(Yt.Icon,{name:e.icon,className:t.normalIcon}),e.label,s,i),c}const Wn=e=>({horizontalLabel:(0,Zt.css)({background:e.isDark?e.colors.background.primary:e.colors.background.secondary,display:"flex",alignItems:"center",padding:e.spacing(0,1),fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.bodySmall.fontSize,height:e.spacing(e.components.height.md),lineHeight:e.spacing(e.components.height.md),borderRadius:e.shape.borderRadius(1),border:`1px solid ${e.components.input.borderColor}`,position:"relative",right:-1,whiteSpace:"nowrap",gap:e.spacing(.5)}),verticalLabel:(0,Zt.css)({display:"flex",alignItems:"center",fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.bodySmall.fontSize,lineHeight:e.typography.bodySmall.lineHeight,whiteSpace:"nowrap",marginBottom:e.spacing(.5),gap:e.spacing(1)}),errorIcon:(0,Zt.css)({color:e.colors.error.text}),normalIcon:(0,Zt.css)({color:e.colors.text.secondary})});function Hn(e){var t;return{label:null!=(t=e.label)?t:String(e.value),value:e.value}}function $n(e,t){return""!==e?{value:e,label:t||e}:null}const Un=()=>!0;function Gn({filter:e,model:r}){var a,i;const o=(0,Yt.useStyles2)(qn),[s,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[d,p]=(0,t.useState)(!1),[f,h]=(0,t.useState)(!1),[g,m]=(0,t.useState)(!1),[b,v]=(0,t.useState)(!1),[y,w]=(0,t.useState)(""),[S,x]=(0,t.useState)(!1),O=$n(e.key,e.keyLabel),_=$n(e.value,e.valueLabel),C=(0,t.useMemo)((()=>fn(c.map(Hn),void 0)),[c])(y),E=n().createElement(Yt.Select,{virtualized:!0,allowCustomValue:!0,isValidNewOption:e=>e.trim().length>0,allowCreateWhileLoading:!0,formatCreateLabel:e=>`Use custom value: ${e}`,disabled:r.state.readOnly,className:(0,Zt.cx)(o.value,g?o.widthWhenOpen:void 0),width:"auto",value:_,filterOption:Un,placeholder:"Select value",options:C,inputValue:y,onInputChange:(e,{action:t})=>("input-change"===t&&w(e),e),onChange:t=>{r._updateFilter(e,"value",t),S!==t.__isNew__&&x(t.__isNew__)},isOpen:b&&!f,isLoading:f,autoFocus:""!==e.key&&""===e.value,openMenuOnFocus:!0,onOpenMenu:async()=>{var t;h(!0),v(!0);const n=await r._getValuesFor(e);h(!1),u(n),S&&w(null!=(t=null==_?void 0:_.label)?t:"")},onCloseMenu:()=>{v(!1),w("")}}),P=n().createElement(Yt.Select,{key:f?"loading":"loaded",disabled:r.state.readOnly,className:(0,Zt.cx)(o.key,g?o.widthWhenOpen:void 0),width:"auto",value:O,placeholder:"Select label",options:s,onChange:t=>r._updateFilter(e,"key",t),autoFocus:""===e.key,isOpen:g&&!d,isLoading:d,onOpenMenu:async()=>{m(!0),p(!0);const t=await r._getKeys(e.key);p(!1),l(t)},onCloseMenu:()=>{m(!1)},onBlur:()=>{""===e.key&&r._removeFilter(e)},openMenuOnFocus:!0});if("vertical"===r.state.layout){if(e.key){const t=n().createElement(zn,{layout:"vertical",label:null!=(a=e.key)?a:"",onRemove:()=>r._removeFilter(e)});return n().createElement(Yt.Field,{label:t,"data-testid":`AdHocFilter-${e.key}`,className:o.field},n().createElement("div",{className:o.wrapper},n().createElement(Yt.Select,{className:o.operator,value:e.operator,disabled:r.state.readOnly,options:r._getOperators(),width:"auto",onChange:t=>r._updateFilter(e,"operator",t)}),E))}return n().createElement(Yt.Field,{label:"Select label","data-testid":`AdHocFilter-${e.key}`,className:o.field},P)}return n().createElement("div",{className:o.wrapper,"data-testid":`AdHocFilter-${e.key}`},P,n().createElement(Yt.Select,{className:o.operator,value:e.operator,disabled:r.state.readOnly,options:r._getOperators(),width:"auto",onChange:t=>r._updateFilter(e,"operator",t)}),E,n().createElement(Yt.Button,{variant:"secondary","aria-label":"Remove filter",title:"Remove filter",className:o.removeButton,icon:"times","data-testid":`AdHocFilter-remove-${null!=(i=e.key)?i:""}`,onClick:()=>r._removeFilter(e)}))}const qn=e=>({field:(0,Zt.css)({marginBottom:0}),wrapper:(0,Zt.css)({display:"flex","> *":{"&:not(:first-child)":{marginLeft:-1},"&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:first-child):not(:last-child)":{borderRadius:0},position:"relative",zIndex:0,"&:hover":{zIndex:1},"&:focus-within":{zIndex:2}}}),widthWhenOpen:(0,Zt.css)({minWidth:e.spacing(16)}),value:(0,Zt.css)({flexShrink:1}),key:(0,Zt.css)({minWidth:"90px",flexShrink:1}),operator:(0,Zt.css)({flexShrink:0}),removeButton:(0,Zt.css)({paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5),borderLeft:"none",width:e.spacing(3),marginRight:e.spacing(1),boxSizing:"border-box",position:"relative",left:"1px"})});function Qn({model:e,addFilterButtonText:t}){const{_wip:r}=e.useState();return r?n().createElement(Gn,{filter:r,model:e}):n().createElement(Yt.Button,{variant:"secondary",icon:"plus",title:"Add filter","aria-label":"Add filter","data-testid":"AdHocFilter-add",onClick:()=>e._addWip()},t)}class Yn{constructor(e){this._variable=e}getKey(){return`var-${this._variable.state.name}`}getKeys(){return[this.getKey()]}getUrlState(){const e=this._variable.state.filters;if(0===e.length)return{[this.getKey()]:[""]};const t=e.filter(dr).map((e=>function(e){return[Fr(e.key,e.keyLabel),e.operator,Fr(e.value,e.valueLabel)]}(e).map(Ar).join("|")));return{[this.getKey()]:t}}updateFromUrl(e){const t=e[this.getKey()];if(null==t)return;const n=function(e){if(Array.isArray(e))return e.map(Kn).filter(Xn);const t=Kn(e);return null===t?[]:[t]}(t);this._variable.setState({filters:n})}}function Kn(e){if("string"!=typeof e||0===e.length)return null;const[t,n,r,a,i,o]=e.split("|").reduce(((e,t)=>{const[n,r]=t.split(",");return e.push(n,null!=r?r:n),e}),[]).map(Nr);return{key:t,keyLabel:n,operator:r,value:i,valueLabel:o,condition:""}}function Xn(e){return null!==e&&"string"==typeof e.key&&"string"==typeof e.value}var Zn=Object.defineProperty,Jn=Object.defineProperties,er=Object.getOwnPropertyDescriptors,tr=Object.getOwnPropertySymbols,nr=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable,ar=(e,t,n)=>t in e?Zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ir=(e,t)=>{for(var n in t||(t={}))nr.call(t,n)&&ar(e,n,t[n]);if(tr)for(var n of tr(t))rr.call(t,n)&&ar(e,n,t[n]);return e},or=(e,t)=>Jn(e,er(t));class sr extends H{constructor(e){var t,n;super(ir({type:"adhoc",name:null!=(t=e.name)?t:"Filters",filters:[],datasource:null,applyMode:"auto",filterExpression:null!=(n=e.filterExpression)?n:lr(e.expressionBuilder,e.filters)},e)),this._scopedVars={__sceneObject:{value:this}},this._dataSourceSrv=(0,a.getDataSourceSrv)(),this._urlSync=new Yn(this),"auto"===this.state.applyMode&&function(e){if(e.addActivationHandler((()=>(Wt.add(e),()=>Wt.delete(e)))),zt)return;const t=(0,a.getTemplateSrv)();(null==t?void 0:t.getAdhocFilters)?(zt=t.getAdhocFilters,t.getAdhocFilters=function(e){var n;if(0===Wt.size)return zt.call(t);const r=(0,a.getDataSourceSrv)().getInstanceSettings(e);if(!r)return[];for(const e of Wt.values())if((null==(n=e.state.datasource)?void 0:n.uid)===r.uid)return e.state.filters;return[]}.bind(t)):console.log("Failed to patch getAdhocFilters")}(this)}setState(e){let t=!1;e.filters&&e.filters!==this.state.filters&&!e.filterExpression&&(e.filterExpression=lr(this.state.expressionBuilder,e.filters),t=e.filterExpression!==this.state.filterExpression),super.setState(e),t&&this.publishEvent(new Pe(this),!0)}getValue(){return this.state.filterExpression}_updateFilter(e,t,{value:n,label:r}){if(null==n)return;const{filters:a,_wip:i}=this.state,o=`${t}Label`;if(e===i)return void("value"===t?this.setState({filters:[...a,or(ir({},i),{[t]:n,[o]:r})],_wip:void 0}):this.setState({_wip:or(ir({},e),{[t]:n,[o]:r})}));const s=this.state.filters.map((a=>{if(a===e){const i=or(ir({},a),{[t]:n,[o]:r});return"key"===t&&e[t]!==n&&(i.value="",i.valueLabel=""),i}return a}));this.setState({filters:s})}_removeFilter(e){e!==this.state._wip?this.setState({filters:this.state.filters.filter((t=>t!==e))}):this.setState({_wip:void 0})}async _getKeys(e){var t,n,r;const a=await(null==(n=(t=this.state).getTagKeysProvider)?void 0:n.call(t,this,e));if(a&&a.replace)return Mr(a.values).map(ur);if(this.state.defaultKeys)return this.state.defaultKeys.map(ur);const i=await this._dataSourceSrv.get(this.state.datasource,this._scopedVars);if(!i||!i.getTagKeys)return[];const o=this.state.filters.filter((t=>t.key!==e)).concat(null!=(r=this.state.baseFilters)?r:[]),s=pt.getTimeRange(this).state.value,l=this.state.useQueriesAsFilterForOptions?Ir(this):void 0,c=await i.getTagKeys(ir({filters:o,queries:l,timeRange:s},kn(this)));Br(c)&&this.setState({error:c.error.message});let u=Mr(c);a&&(u=u.concat(Mr(a.values)));const d=this.state.tagKeyRegexFilter;return d&&(u=u.filter((e=>e.text.match(d)))),u.map(ur)}async _getValuesFor(e){var t,n,r;const a=await(null==(n=(t=this.state).getTagValuesProvider)?void 0:n.call(t,this,e));if(a&&a.replace)return pr(Mr(a.values));const i=await this._dataSourceSrv.get(this.state.datasource,this._scopedVars);if(!i||!i.getTagValues)return[];const o=this.state.filters.filter((t=>t.key!==e.key)).concat(null!=(r=this.state.baseFilters)?r:[]),s=pt.getTimeRange(this).state.value,l=this.state.useQueriesAsFilterForOptions?Ir(this):void 0,c=await i.getTagValues(ir({key:e.key,filters:o,timeRange:s,queries:l},kn(this)));Br(c)&&this.setState({error:c.error.message});let u=Mr(c);return a&&(u=u.concat(Mr(a.values))),pr(u)}_addWip(){this.setState({_wip:{key:"",keyLabel:"",value:"",valueLabel:"",operator:"=",condition:""}})}_getOperators(){return["=","!=","<",">","=~","!~"].map((e=>({label:e,value:e})))}}function lr(e,t){return(null!=e?e:Tr)(null!=t?t:[])}sr.Component=function({model:e}){const{filters:t,readOnly:r,addFilterButtonText:a}=e.useState(),i=(0,Yt.useStyles2)(cr);return n().createElement("div",{className:i.wrapper},t.map(((t,r)=>n().createElement(n().Fragment,{key:r},n().createElement(Gn,{filter:t,model:e})))),!r&&n().createElement(Qn,{model:e,key:"'builder",addFilterButtonText:a}))};const cr=e=>({wrapper:(0,Zt.css)({display:"flex",flexWrap:"wrap",alignItems:"flex-end",columnGap:e.spacing(2),rowGap:e.spacing(1)}),filterIcon:(0,Zt.css)({color:e.colors.text.secondary,paddingRight:e.spacing(.5)})});function ur({text:e,value:t}){return{label:e,value:String(null!=t?t:e)}}function dr(e){return""!==e.key&&""!==e.operator&&""!==e.value}function pr(e){const t=[],n=new Map;for(const r of e){const e=r.group;if(e){let a=n.get(e);a||(a=[],n.set(e,a),t.push({label:e,options:a})),a.push(ur(r))}else t.push(ur(r))}return t}class fr{constructor(){this._resultsMap=new Map,this._prevLayers=[]}getMergedStream(e){(function(e,t){if(e.length!==t.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1})(e,this._prevLayers)&&(this._resultsMap=new Map,this._prevLayers=e);const t=e.map((e=>e.getResultsStream())),n=[];for(const t of e)n.push(t.activate());return(0,m.merge)(t).pipe((0,m.mergeAll)(),(0,m.filter)((e=>this._resultsMap.get(e.origin.state.key)!==e)),(0,m.map)((e=>(this._resultsMap.set(e.origin.state.key,e),this._resultsMap.values()))),(0,m.finalize)((()=>{n.forEach((e=>e()))})))}}var hr=Object.defineProperty,gr=Object.defineProperties,mr=Object.getOwnPropertyDescriptors,br=Object.getOwnPropertySymbols,vr=Object.prototype.hasOwnProperty,yr=Object.prototype.propertyIsEnumerable,wr=(e,t,n)=>t in e?hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sr=(e,t)=>{for(var n in t||(t={}))vr.call(t,n)&&wr(e,n,t[n]);if(br)for(var n of br(t))yr.call(t,n)&&wr(e,n,t[n]);return e},xr=(e,t)=>gr(e,mr(t));let Or=100;function _r(){return"SQR"+Or++}class Cr extends H{constructor(t){super(t),this._dataLayersMerger=new fr,this._variableValueRecorder=new St,this._results=new m.ReplaySubject(1),this._scopedVars={__sceneObject:{value:this,text:"__sceneObject"}},this._variableDependency=new wt(this,{statePaths:["queries","datasource"],onVariableUpdateCompleted:this.onVariableUpdatesCompleted.bind(this),onAnyVariableChanged:this.onAnyVariableChanged.bind(this)}),this.onDataReceived=t=>{const n=(0,e.preProcessPanelData)(t,this.state.data);this._resultAnnotations=t.annotations;const r=this._combineDataLayers(n);let a=this.state._hasFetchedData;a||n.state===ie.Loading||(a=!0),this.setState({data:r,_hasFetchedData:a}),this._results.next({origin:this,data:r})},this.addActivationHandler((()=>this._onActivate()))}getResultsStream(){return this._results}_onActivate(){const e=pt.getTimeRange(this),t=this.getClosestExtraQueryProviders();for(const e of t)this._subs.add(e.subscribeToState(((t,n)=>{e.shouldRerun(n,t)&&this.runQueries()})));return this.subscribeToTimeRangeChanges(e),this.shouldRunQueriesOnActivate()&&this.runQueries(),this._dataLayersSub||this._handleDataLayers(),()=>this._onDeactivate()}_handleDataLayers(){const e=pt.getDataLayers(this);0!==e.length&&(this._dataLayersSub=this._dataLayersMerger.getMergedStream(e).subscribe(this._onLayersReceived.bind(this)))}_onLayersReceived(t){var n,r,a,i,o;const s=pt.getTimeRange(this),{dataLayerFilter:l}=this.state;let c,u=[],d=[];for(const a of t)for(let t of a.data.series)(null==(n=t.meta)?void 0:n.dataTopic)===e.DataTopic.Annotations&&(u=u.concat(t)),(null==(r=t.meta)?void 0:r.dataTopic)===e.DataTopic.AlertStates&&(d=d.concat(t));if((null==l?void 0:l.panelId)&&(u.length>0&&(u=function(e,t){var n;if(!Array.isArray(e)||0===e.length)return e;const r=Array.from({length:e.length},(()=>new Set));let a=0;for(const i of e){for(let e=0;e<i.length;e++){if(r[a].has(e))continue;let o=!0;const s=i.fields.find((e=>"panelId"===e.name)),l=i.fields.find((e=>"source"===e.name));if(l){s&&"dashboard"===l.values[e].type&&(o=s.values[e]===t.panelId);const r=l.values[e].filter;if(r){const e=(null!=(n=r.ids)?n:[]).includes(t.panelId);r.exclude?e&&(o=!1):e||(o=!1)}}o&&r[a].add(e)}a++}const i=[];a=0;for(const t of e){const e=r[a].size,n=[];for(const e of t.fields){const i=[];for(let n=0;n<t.length;n++)r[a].has(n)&&i.push(e.values[n]);n.push(Bt(Mt({},e),{values:i}))}i.push(Bt(Mt({},t),{fields:n,length:e})),a++}return i}(u,l)),d.length>0))for(const t of d){const n=new e.DataFrameView(t);for(const e of n)if(e.panelId===l.panelId){c=e;break}}if(Pr(u)&&Pr(this._layerAnnotations)&&(0,ee.isEqual)(c,null==(a=this.state.data)?void 0:a.alertState))return;this._layerAnnotations=u;const p=this.state.data?this.state.data:xr(Sr({},pe),{timeRange:s.state.value});this.setState({data:xr(Sr({},p),{annotations:[...null!=(i=this._resultAnnotations)?i:[],...u],alertState:null!=c?c:null==(o=this.state.data)?void 0:o.alertState})})}onVariableUpdatesCompleted(){this.runQueries()}onAnyVariableChanged(e){this._adhocFiltersVar!==e&&this._groupByVar!==e&&(e instanceof sr&&this._isRelevantAutoVariable(e)&&this.runQueries(),e instanceof Mn&&this._isRelevantAutoVariable(e)&&this.runQueries())}_isRelevantAutoVariable(e){var t,n;const r=null!=(t=this.state.datasource)?t:Er(this.state.queries);return"auto"===e.state.applyMode&&(null==r?void 0:r.uid)===(null==(n=e.state.datasource)?void 0:n.uid)}shouldRunQueriesOnActivate(){return this._variableValueRecorder.hasDependenciesChanged(this)?(yt("SceneQueryRunner","Variable dependency changed while inactive, shouldRunQueriesOnActivate returns true"),!0):!this.state.data||!!this._isDataTimeRangeStale(this.state.data)}_isDataTimeRangeStale(e){const t=pt.getTimeRange(this).state.value,n=e.timeRange;return(t.from.unix()!==n.from.unix()||t.to.unix()!==n.to.unix())&&(yt("SceneQueryRunner","Data time range is stale"),!0)}_onDeactivate(){var e;this._querySub&&(this._querySub.unsubscribe(),this._querySub=void 0),this._dataLayersSub&&(this._dataLayersSub.unsubscribe(),this._dataLayersSub=void 0),null==(e=this._timeSub)||e.unsubscribe(),this._timeSub=void 0,this._timeSubRange=void 0,this._adhocFiltersVar=void 0,this._groupByVar=void 0,this._variableValueRecorder.recordCurrentDependencyValuesForSceneObject(this)}setContainerWidth(e){!this._containerWidth&&e>0?(this._containerWidth=e,this.state.maxDataPointsFromWidth&&!this.state.maxDataPoints&&setTimeout((()=>{this.isActive&&!this.state._hasFetchedData&&this.runQueries()}),0)):e>0&&(this._containerWidth=e)}isDataReadyToDisplay(){return Boolean(this.state._hasFetchedData)}subscribeToTimeRangeChanges(e){this._timeSubRange!==e&&(this._timeSub&&this._timeSub.unsubscribe(),this._timeSubRange=e,this._timeSub=e.subscribeToState((()=>{this.runWithTimeRange(e)})))}runQueries(){const e=pt.getTimeRange(this);this.subscribeToTimeRangeChanges(e),this.runWithTimeRange(e)}getMaxDataPoints(){var e;return this.state.maxDataPoints?this.state.maxDataPoints:this.state.maxDataPointsFromWidth&&null!=(e=this._containerWidth)?e:500}cancelQuery(){var e;null==(e=this._querySub)||e.unsubscribe(),this._dataLayersSub&&(this._dataLayersSub.unsubscribe(),this._dataLayersSub=void 0),this.setState({data:xr(Sr({},this.state.data),{state:ie.Done})})}async runWithTimeRange(e){var t,n,r;if(!this.state.maxDataPoints&&this.state.maxDataPointsFromWidth&&!this._containerWidth)return;if(this._dataLayersSub||this._handleDataLayers(),null==(t=this._querySub)||t.unsubscribe(),this._variableDependency.hasDependencyInLoadingState())return yt("SceneQueryRunner","Variable dependency is in loading state, skipping query execution"),void this.setState({data:xr(Sr({},null!=(n=this.state.data)?n:pe),{state:ie.Loading})});const{queries:i}=this.state;if(null==i?void 0:i.length)try{const t=null!=(r=this.state.datasource)?r:Er(i),n=await vt(t,this._scopedVars);this.findAndSubscribeToAdHocFilters(null==t?void 0:t.uid);const o=(0,a.getRunRequest)(),{primary:s,secondaries:l,processors:c}=this.prepareRequests(e,n);yt("SceneQueryRunner","Starting runRequest",this.state.key);let u=o(n,s);if(l.length>0){const e=l.map((e=>o(n,e))),t=(e=>t=>t.pipe((0,m.mergeMap)((([t,...n])=>{const r=n.flatMap((n=>{var r,a;return null!=(a=null==(r=e.get(n.request.requestId))?void 0:r(t,n))?a:(0,m.of)(n)}));return(0,m.forkJoin)([(0,m.of)(t),...r])})),(0,m.map)((([e,...t])=>{var n,r,a;return r=((e,t)=>{for(var n in t||(t={}))Pt.call(t,n)&&kt(e,n,t[n]);if(Et)for(var n of Et(t))Dt.call(t,n)&&kt(e,n,t[n]);return e})({},e),a={series:[...e.series,...t.flatMap((e=>e.series))],annotations:[...null!=(n=e.annotations)?n:[],...t.flatMap((e=>{var t;return null!=(t=e.annotations)?t:[]}))]},_t(r,Ct(a))}))))(c);u=(0,m.forkJoin)([u,...e]).pipe(t)}u=u.pipe(Ht({type:"data",request:s,origin:this,cancel:()=>this.cancelQuery()})),this._querySub=u.subscribe(this.onDataReceived)}catch(e){console.error("PanelQueryRunner Error",e),this.onDataReceived(xr(Sr(Sr({},pe),this.state.data),{state:ie.Error,errors:[(0,a.toDataQueryError)(e)]}))}else this._setNoDataState()}clone(e){var t;const n=super.clone(e);return this._resultAnnotations&&(n._resultAnnotations=this._resultAnnotations.map((e=>Sr({},e)))),this._layerAnnotations&&(n._layerAnnotations=this._layerAnnotations.map((e=>Sr({},e)))),n._variableValueRecorder=this._variableValueRecorder.cloneAndRecordCurrentValuesForSceneObject(this),n._containerWidth=this._containerWidth,n._results.next({origin:this,data:null!=(t=this.state.data)?t:pe}),n}prepareRequests(t,n){var r;const{minInterval:i,queries:o}=this.state;let s=Sr({app:"scenes",requestId:_r(),timezone:t.getTimeZone(),range:t.state.value,interval:"1s",intervalMs:1e3,targets:(0,ee.cloneDeep)(o),maxDataPoints:this.getMaxDataPoints(),scopedVars:this._scopedVars,startTime:Date.now(),liveStreaming:this.state.liveStreaming,rangeRaw:{from:t.state.from,to:t.state.to},cacheTimeout:this.state.cacheTimeout,queryCachingTTL:this.state.queryCachingTTL},Vt(this));this._adhocFiltersVar&&(s.filters=this._adhocFiltersVar.state.filters.filter(dr)),this._groupByVar&&(s.groupByKeys=this._groupByVar.state.value),s.targets=s.targets.map((e=>{var t;return e.datasource&&(e.datasource.uid===n.uid||(null==(t=n.meta)?void 0:t.mixed)||!a.isExpressionReference||(0,a.isExpressionReference)(e.datasource))||(e.datasource=n.getRef()),e}));const l=i||n.interval,c=e.rangeUtil.calculateInterval(t.state.value,s.maxDataPoints,l);s.scopedVars=Object.assign({},s.scopedVars,{__interval:{text:c.interval,value:c.interval},__interval_ms:{text:c.intervalMs.toString(),value:c.intervalMs}}),s.interval=c.interval,s.intervalMs=c.intervalMs;const u=t.state.value;let d=[],p=new Map;for(const e of null!=(r=this.getClosestExtraQueryProviders())?r:[])for(const{req:t,processor:n}of e.getExtraQueries(s)){const e=_r();d.push(xr(Sr({},t),{requestId:e})),p.set(e,null!=n?n:Tt)}return s.range=u,{primary:s,secondaries:d,processors:p}}_combineDataLayers(e){return this._layerAnnotations&&this._layerAnnotations.length>0&&(e.annotations=(e.annotations||[]).concat(this._layerAnnotations)),this.state.data&&this.state.data.alertState&&(e.alertState=this.state.data.alertState),e}_setNoDataState(){this.state.data!==pe&&this.setState({data:pe})}getClosestExtraQueryProviders(){const e=new Map;return this.parent?(Z(this.parent,(t=>(xt(t)&&!e.has(t.constructor)&&e.set(t.constructor,t),t.forEachChild((t=>{xt(t)&&!e.has(t.constructor)&&e.set(t.constructor,t)})),null))),Array.from(e.values())):[]}findAndSubscribeToAdHocFilters(e){const t=function(e){var t;for(const n of Wt.values())if((null==(t=n.state.datasource)?void 0:t.uid)===e)return n}(e);this._adhocFiltersVar!==t&&(this._adhocFiltersVar=t,this._updateExplicitVariableDependencies());const n=function(e){var t;for(const n of $t.values())if((null==(t=n.state.datasource)?void 0:t.uid)===e)return n}(e);this._groupByVar!==n&&(this._groupByVar=n,this._updateExplicitVariableDependencies())}_updateExplicitVariableDependencies(){const e=[];this._adhocFiltersVar&&e.push(this._adhocFiltersVar.state.name),this._groupByVar&&e.push(this._groupByVar.state.name),this._variableDependency.setVariableNames(e)}}function Er(e){var t,n;return null!=(n=null==(t=e.find((e=>null!==e.datasource)))?void 0:t.datasource)?n:void 0}function Pr(e){if(!e)return!0;for(let t=0;t<e.length;t++)if(e[t].length>0)return!1;return!0}function Dr(e,t){return e===t||(0,ee.isEqual)(e,t)}function kr(e){try{return JSON.stringify(e,(()=>{const e=new WeakSet;return(t,n)=>{if("object"==typeof n&&null!==n){if(e.has(n))return;e.add(n)}return n}})())}catch(e){console.error(e)}return""}function Tr(e){return e.map((e=>function(e){let t="";return t="=~"===e.operator||"!~"===e.operator?Rr(function(e){return e.replace(jr,"\\$&")}(e.value)):Rr(e.value),`${e.key}${e.operator}"${t}"`}(e))).join(",")}function Rr(e){return e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}const jr=/[*+?()|\\.\[\]{}^$]/g;function Ir(e){const t=function(e){const t={};for(const n of e)n.state.key&&(n.state.key in t||(t[n.state.key]=[]),t[n.state.key].push(n));return Object.values(t).flatMap((e=>{const t=e.filter((e=>e.isActive));return 0===t.length&&1===e.length?e:t}))}(pt.findAllObjects(e.getRoot(),(e=>e instanceof Cr))).filter((t=>{var n,r;return(null==(n=t.state.datasource)?void 0:n.uid)===(null==(r=e.state.datasource)?void 0:r.uid)}));if(0===t.length)return[];const n=[];return t.forEach((e=>{n.push(...e.state.queries)})),n}function Ar(e){return null==e?"":/\|/g[Symbol.replace](e,"__gfp__")}function Lr(e){return null==e?"":/,/g[Symbol.replace](e,"__gfc__")}function Nr(e){return null==e?"":(e=/__gfp__/g[Symbol.replace](e,"|"),e=/__gfc__/g[Symbol.replace](e,","))}function Fr(e,t){return t&&e!==t?[e,t].map(Lr).join(","):Lr(e)}function Mr(e){return Array.isArray(e)?e:e.data}function Br(e){return!Array.isArray(e)&&Boolean(e.error)}var Vr=(e=>(e[e.never=0]="never",e[e.onDashboardLoad=1]="onDashboardLoad",e[e.onTimeRangeChanged=2]="onTimeRangeChanged",e))(Vr||{}),zr=(e=>(e[e.Crosshair=1]="Crosshair",e[e.Off=0]="Off",e[e.Tooltip=2]="Tooltip",e))(zr||{}),Wr=Object.defineProperty,Hr=Object.defineProperties,$r=Object.getOwnPropertyDescriptors,Ur=Object.getOwnPropertySymbols,Gr=Object.prototype.hasOwnProperty,qr=Object.prototype.propertyIsEnumerable,Qr=(e,t,n)=>t in e?Wr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class Yr extends H{constructor(e){var t,n;super((t=((e,t)=>{for(var n in t||(t={}))Gr.call(t,n)&&Qr(e,n,t[n]);if(Ur)for(var n of Ur(t))qr.call(t,n)&&Qr(e,n,t[n]);return e})({},e),n={sync:e.sync||zr.Off},Hr(t,$r(n)))),this.getEventsBus=e=>{if(!this.parent)throw new Error("EnableCursorSync cannot be used as a standalone scene object");return new Kr(this.parent,e)}}getEventsScope(){if(!this.parent)throw new Error("EnableCursorSync cannot be used as a standalone scene object");return this.state.key}}class Kr{constructor(e,t){this._source=e,this._eventsOrigin=t}publish(e){e.origin=this,this._eventsOrigin.publishEvent(e,!0)}getStream(e){return new m.Observable((t=>{const n=this._source.subscribeToEvent(e,(e=>{t.next(e)}));return()=>n.unsubscribe()}))}subscribe(e,t){return this.getStream(e).pipe().subscribe(t)}removeAllListeners(){}newScopedBus(e,t){throw new Error("For internal use only")}}var Xr=function(){},Zr="undefined"!=typeof window;const Jr=Zr?t.useLayoutEffect:t.useEffect;var ea={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};const ta=Zr&&void 0!==window.ResizeObserver?function(){var e=(0,t.useState)(null),n=e[0],r=e[1],a=(0,t.useState)(ea),i=a[0],o=a[1],s=(0,t.useMemo)((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,n=t.x,r=t.y,a=t.width,i=t.height,s=t.top,l=t.left,c=t.bottom,u=t.right;o({x:n,y:r,width:a,height:i,top:s,left:l,bottom:c,right:u})}}))}),[]);return Jr((function(){if(n)return s.observe(n),function(){s.disconnect()}}),[n]),[r,i]}:function(){return[Xr,ea]};function na(e,t){if(t)return t;let n=e.error?e.error.message:void 0;return e.errors&&(n=e.errors.map((e=>e.message)).join(", ")),n}const ra=(0,Zt.css)({position:"relative",width:"100%",height:"100%"}),aa=(0,Zt.css)({position:"absolute",width:"100%",height:"100%"}),ia=e=>({ok:(0,Zt.css)({color:e.colors.success.text}),pending:(0,Zt.css)({color:e.colors.warning.text}),alerting:(0,Zt.css)({color:e.colors.error.text})});var oa=Object.defineProperty,sa=Object.defineProperties,la=Object.getOwnPropertyDescriptors,ca=Object.getOwnPropertySymbols,ua=Object.prototype.hasOwnProperty,da=Object.prototype.propertyIsEnumerable,pa=(e,t,n)=>t in e?oa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fa=(e,t)=>{for(var n in t||(t={}))ua.call(t,n)&&pa(e,n,t[n]);if(ca)for(var n of ca(t))da.call(t,n)&&pa(e,n,t[n]);return e},ha=(e,t)=>sa(e,la(t));const ga="hideSeriesFrom",ma=(0,e.isSystemOverrideWithRef)(ga);function ba(t,n=e.ByNamesMatcherMode.exclude,r){return r=null!=r?r:{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:ga,matcher:{id:e.FieldMatcherID.byNames,options:{mode:n,names:t,prefix:n===e.ByNamesMatcherMode.exclude?"All except:":void 0,readOnly:!0}},properties:[ha(fa({},r),{value:{viz:!0,legend:!1,tooltip:!1}})]}}const va=e=>{var t;const n=null==(t=e.matcher.options)?void 0:t.names;return Array.isArray(n)?[...n]:[]},ya=(t,n)=>{const r=new Set;for(const a of t)for(const i of a.fields){if(i.type!==e.FieldType.number)continue;const o=(0,e.getFieldDisplayName)(i,a,t);o!==n&&r.add(o)}return Array.from(r)},wa=(t,n)=>{var r;let a=[];for(const i of t){const t=i.properties.find((e=>"custom.hideFrom"===e.id));if(void 0!==t&&!0===(null==(r=t.value)?void 0:r.legend)){const t=e.fieldMatchers.get(i.matcher.id).get(i.matcher.options);for(const r of n)for(const i of r.fields){if(i.type!==e.FieldType.number)continue;const o=(0,e.getFieldDisplayName)(i,r,n);t(i,r,n)&&a.push(o)}}}return a};var Sa=Object.defineProperty,xa=Object.defineProperties,Oa=Object.getOwnPropertyDescriptors,_a=Object.getOwnPropertySymbols,Ca=Object.prototype.hasOwnProperty,Ea=Object.prototype.propertyIsEnumerable,Pa=(e,t,n)=>t in e?Sa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Da=(e,t)=>{for(var n in t||(t={}))Ca.call(t,n)&&Pa(e,n,t[n]);if(_a)for(var n of _a(t))Ea.call(t,n)&&Pa(e,n,t[n]);return e},ka=(e,t)=>xa(e,Oa(t));const Ta=(t,n)=>({matcher:{id:e.FieldMatcherID.byName,options:t},properties:[Ra(n)]}),Ra=t=>({id:"color",value:{mode:e.FieldColorModeId.Fixed,fixedColor:t}});var ja=Object.defineProperty,Ia=Object.defineProperties,Aa=Object.getOwnPropertyDescriptors,La=Object.getOwnPropertySymbols,Na=Object.prototype.hasOwnProperty,Fa=Object.prototype.propertyIsEnumerable,Ma=(e,t,n)=>t in e?ja(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ba=(e,t)=>{for(var n in t||(t={}))Na.call(t,n)&&Ma(e,n,t[n]);if(La)for(var n of La(t))Fa.call(t,n)&&Ma(e,n,t[n]);return e},Va=(e,t)=>Ia(e,Aa(t));class za extends H{constructor(t){var n;super(Ba({options:{},fieldConfig:{defaults:{},overrides:[]},title:"Title",pluginId:"timeseries"},t)),this._variableDependency=new wt(this,{statePaths:["title","options","fieldConfig"]}),this._structureRev=0,this.onTimeRangeChange=t=>{pt.getTimeRange(this).onTimeRangeChange({raw:{from:(0,e.toUtc)(t.from),to:(0,e.toUtc)(t.to)},from:(0,e.toUtc)(t.from),to:(0,e.toUtc)(t.to)})},this.getTimeRange=e=>{const t=pt.findObject(this,(e=>e instanceof Ha)),n=pt.getTimeRange(this);if(t instanceof Ha&&t.isEnabled)return me(n.state.from,n.state.to,n.getTimeZone(),n.state.fiscalYearStartMonth,n.state.UNSAFE_nowDelay);const r=this.getPlugin();return r&&!r.meta.skipDataQuery&&e&&e.timeRange?e.timeRange:n.state.value},this.onTitleChange=e=>{this.setState({title:e})},this.onDescriptionChange=e=>{this.setState({description:e})},this.onDisplayModeChange=e=>{this.setState({displayMode:e})},this.onOptionsChange=(t,n=!1)=>{const{fieldConfig:r,options:a}=this.state,i=n?t:(0,ee.mergeWith)((0,ee.cloneDeep)(a),t,((e,t)=>{if((0,ee.isArray)(t))return t})),o=(0,e.getPanelOptionsWithDefaults)({plugin:this._plugin,currentOptions:i,currentFieldConfig:r,isAfterPluginChange:!1});this.setState({options:o.options})},this.onFieldConfigChange=(t,n)=>{const{fieldConfig:r,options:a}=this.state,i=n?t:(0,ee.merge)((0,ee.cloneDeep)(r),t),o=(0,e.getPanelOptionsWithDefaults)({plugin:this._plugin,currentOptions:a,currentFieldConfig:i,isAfterPluginChange:!1});this._dataWithFieldConfig=void 0,this.setState({fieldConfig:o.fieldConfig})},this.interpolate=(e,t,n)=>pt.interpolate(this,e,t,n),this.getDescription=()=>{this.publishEvent(new I({origin:this,interaction:"panel-description-shown"}),!0);const{description:t}=this.state;if(t){const n=this.interpolate(t);return(0,e.renderMarkdown)(n)}return""},this.onCancelQuery=()=>{var e;this.publishEvent(new I({origin:this,interaction:"panel-cancel-query-clicked"}),!0);const t=pt.getData(this);null==(e=t.cancelQuery)||e.call(t)},this.onStatusMessageClick=()=>{this.publishEvent(new I({origin:this,interaction:"panel-status-message-clicked"}),!0)},this._onSeriesColorChange=(t,n)=>{this.onFieldConfigChange(((t,n,r)=>{const{overrides:a}=r,i=r.overrides.findIndex((n=>n.matcher.id===e.FieldMatcherID.byName&&n.matcher.options===t));if(i<0)return ka(Da({},r),{overrides:[...r.overrides,Ta(t,n)]});const o=Array.from(a),s=o[i],l=s.properties.findIndex((e=>"color"===e.id));if(l<0)return o[i]=ka(Da({},s),{properties:[...s.properties,Ra(n)]}),ka(Da({},r),{overrides:o});const c=Array.from(s.properties);return c[l]=Ra(n),o[i]=ka(Da({},s),{properties:c}),ka(Da({},r),{overrides:o})})(t,n,this.state.fieldConfig))},this._onSeriesVisibilityChange=(t,n)=>{this._dataWithFieldConfig&&this.onFieldConfigChange(function(t,n,r,a){const{overrides:i}=r,o=t,s=i.findIndex(ma);if(s<0){if(n===Yt.SeriesVisibilityChangeMode.ToggleSelection){const e=ba([o,...wa(i,a)]);return ha(fa({},r),{overrides:[...r.overrides,e]})}const e=ba(ya(a,o));return ha(fa({},r),{overrides:[...r.overrides,e]})}const l=Array.from(i),[c]=l.splice(s,1);if(n===Yt.SeriesVisibilityChangeMode.ToggleSelection){let e=va(c);const t=wa(l,a);if(t.length>0&&(e=e.filter((e=>t.indexOf(e)<0))),e[0]===o&&1===e.length)return ha(fa({},r),{overrides:l});const n=ba([o,...t]);return ha(fa({},r),{overrides:[...l,n]})}const u=((t,n,r=e.ByNamesMatcherMode.exclude)=>{const a=t.properties.find((e=>"custom.hideFrom"===e.id)),i=va(t),o=i.findIndex((e=>e===n));return o<0?i.push(n):i.splice(o,1),ba(i,r,a)})(c,o);return((e,t)=>va(e).length===ya(t).length)(u,a)?ha(fa({},r),{overrides:l}):ha(fa({},r),{overrides:[...l,u]})}(t,n,this.state.fieldConfig,this._dataWithFieldConfig.series),!0)},this._onInstanceStateChange=e=>{this._panelContext&&(this._panelContext=Va(Ba({},this._panelContext),{instanceState:e})),this.setState({_pluginInstanceState:e})},this._onToggleLegendSort=e=>{const t=this.state.options.legend;if(!t)return;let n=t.sortDesc,r=t.sortBy;e!==r&&(n=void 0),!1===n?(r=void 0,n=void 0):(n=!n,r=e),this.onOptionsChange(Va(Ba({},this.state.options),{legend:Va(Ba({},t),{sortBy:r,sortDesc:n})}),!0)},this.addActivationHandler((()=>{this._onActivate()})),null==(n=t.menu)||n.addActivationHandler((()=>{this.publishEvent(new I({origin:this,interaction:"panel-menu-shown"}),!0)}))}_onActivate(){this._plugin||this._loadPlugin(this.state.pluginId)}async _loadPlugin(t){const n=function(e){var t;const{getPanelPluginFromCache:n}=(0,a.getPluginImportUtils)();return null!=(t=n(e))?t:g.get(e)}(t);if(n)this._pluginLoaded(n);else{const{importPanelPlugin:n}=(0,a.getPluginImportUtils)();try{const e=await n(t);this._pluginLoaded(e)}catch(n){this._pluginLoaded(function(t){const n=new e.PanelPlugin((()=>null));return n.meta={id:t,name:t,sort:100,type:e.PluginType.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},n}(t)),n instanceof Error&&this.setState({_pluginLoadError:n.message})}}}getLegacyPanelId(){const e=parseInt(this.state.key.replace("panel-",""),10);return isNaN(e)?0:e}async _pluginLoaded(t){const{options:n,fieldConfig:r,title:a,pluginVersion:i,_UNSAFE_customMigrationHandler:o}=this.state,s={title:a,options:n,fieldConfig:r,id:this.getLegacyPanelId(),type:t.meta.id,pluginVersion:i},l=this._getPluginVersion(t);null==o||o(s,t),t.onPanelMigration&&l!==this.state.pluginVersion&&(s.options=await t.onPanelMigration(s));const c=(0,e.getPanelOptionsWithDefaults)({plugin:t,currentOptions:s.options,currentFieldConfig:s.fieldConfig,isAfterPluginChange:!1});if(this._plugin=t,this.setState({options:c.options,fieldConfig:c.fieldConfig,pluginVersion:l}),t.meta.skipDataQuery){const e=pt.getTimeRange(this);this._subs.add(e.subscribeToState((()=>this.forceRender())))}}_getPluginVersion(e){return e&&e.meta.info.version?e.meta.info.version:a.config.buildInfo.version}getPlugin(){return this._plugin}getPanelContext(){return null!=this._panelContext||(this._panelContext=this.buildPanelContext()),this._panelContext}clearFieldConfigCache(){this._dataWithFieldConfig=void 0}applyFieldConfig(t){var n,r,i,o;const s=this._plugin;if(!s||s.meta.skipDataQuery||!t)return pe;if(this._prevData===t&&this._dataWithFieldConfig)return this._dataWithFieldConfig;const l=s.dataSupport||{alertStates:!1,annotations:!1},c=s.fieldConfigRegistry,u=null!=(r=null==(n=this._dataWithFieldConfig)?void 0:n.series)?r:[],d=(0,e.applyFieldOverrides)({data:t.series,fieldConfig:this.state.fieldConfig,fieldConfigRegistry:c,replaceVariables:this.interpolate,theme:a.config.theme2,timeZone:null==(i=t.request)?void 0:i.timezone});return(0,e.compareArrayValues)(d,u,e.compareDataFrameStructures)||this._structureRev++,this._dataWithFieldConfig=Va(Ba({},t),{structureRev:this._structureRev,series:d}),this._dataWithFieldConfig.annotations&&(this._dataWithFieldConfig.annotations=(0,e.applyFieldOverrides)({data:this._dataWithFieldConfig.annotations,fieldConfig:{defaults:{},overrides:[]},fieldConfigRegistry:c,replaceVariables:this.interpolate,theme:a.config.theme2,timeZone:null==(o=t.request)?void 0:o.timezone})),l.alertStates||(this._dataWithFieldConfig.alertState=void 0),l.annotations||(this._dataWithFieldConfig.annotations=void 0),this._prevData=t,this._dataWithFieldConfig}buildPanelContext(){const t=(this,pt.findObject(this,(e=>e instanceof Yr)));const n={eventsScope:t?t.getEventsScope():"__global_",eventBus:t?t.getEventsBus(this):(0,a.getAppEvents)(),app:e.CoreApp.Unknown,sync:()=>t?t.state.sync:e.DashboardCursorSync.Off,onSeriesColorChange:this._onSeriesColorChange,onToggleSeriesVisibility:this._onSeriesVisibilityChange,onToggleLegendSort:this._onToggleLegendSort,onInstanceStateChange:this._onInstanceStateChange};return this.state.extendPanelContext&&this.state.extendPanelContext(this,n),n}}za.Component=function({model:r}){var i;const{title:o,options:s,fieldConfig:l,_pluginLoadError:c,displayMode:u,hoverHeader:d,hoverHeaderOffset:p,menu:f,headerActions:h,titleItems:g,description:m}=r.useState(),[b,{width:v,height:y}]=ta(),w=(0,t.useMemo)((()=>(0,a.getAppEvents)()),[]),S=(0,t.useCallback)((()=>w.publish(new e.SetPanelAttentionEvent({panelId:r.state.key}))),[r.state.key,w]),x=(0,t.useMemo)((()=>(0,ee.debounce)(S,100)),[S]),O=r.getPlugin(),{dragClass:_,dragClassCancel:C}=function(e){var t,n;const r=pt.getLayout(e),a=null==r?void 0:r.isDraggable();return r&&a&&!function(e,t){let n=e.parent;for(;n&&n!==t;){if("isDraggable"in n.state&&!1===n.state.isDraggable)return!0;n=n.parent}return!1}(e,r)?{dragClass:null==(t=r.getDragClass)?void 0:t.call(r),dragClassCancel:null==(n=null==r?void 0:r.getDragClassCancel)?void 0:n.call(r)}:{dragClass:"",dragClassCancel:""}}(r),E=pt.getData(r),P=E.useState(),D=r.applyFieldConfig(P.data),k=pt.getTimeRange(r).getTimeZone(),T=r.getTimeRange(D),R=r.interpolate(o,void 0,"text"),j=(0,Yt.useStyles2)(ia);if(!O)return n().createElement("div",null,"Loading plugin panel...");if(!O.panel)return n().createElement("div",null,"Panel plugin has no panel component");const I=O.panel;E&&E.setContainerWidth&&E.setContainerWidth(Math.round(v));let A,L,N=[];g&&(Array.isArray(g)?N=N.concat(g.map((e=>n().createElement(e.Component,{model:e,key:`${e.state.key}`})))):ot(g)?N.push(n().createElement(g.Component,{model:g})):N.push(g)),r.state.$timeRange&&N.push(n().createElement(r.state.$timeRange.Component,{model:r.state.$timeRange,key:r.state.key})),D.alertState&&N.push(n().createElement(Yt.Tooltip,{content:null!=(i=D.alertState.state)?i:"unknown",key:`alert-states-icon-${r.state.key}`},n().createElement(Yt.PanelChrome.TitleItem,{className:(0,Zt.cx)({[j.ok]:D.alertState.state===e.AlertState.OK,[j.pending]:D.alertState.state===e.AlertState.Pending,[j.alerting]:D.alertState.state===e.AlertState.Alerting})},n().createElement(Yt.Icon,{name:"alerting"===D.alertState.state?"heart-break":"heart",className:"panel-alert-icon",size:"md"})))),f&&(A=n().createElement(f.Component,{model:f})),h&&(L=Array.isArray(h)?n().createElement(n().Fragment,null,h.map((e=>n().createElement(e.Component,{model:e,key:`${e.state.key}`})))):ot(h)?n().createElement(h.Component,{model:h}):h);const F=D,M=!E.isDataReadyToDisplay||E.isDataReadyToDisplay(),B=r.getPanelContext(),V=r.getLegacyPanelId();return n().createElement("div",{className:ra},n().createElement("div",{ref:b,className:aa,"data-viz-panel-key":r.state.key},v>0&&y>0&&n().createElement(Yt.PanelChrome,{title:R,description:(null==m?void 0:m.trim())?r.getDescription:void 0,loadingState:F.state,statusMessage:na(F,c),statusMessageOnClick:r.onStatusMessageClick,width:v,height:y,displayMode:u,hoverHeader:d,hoverHeaderOffset:p,titleItems:N,dragClass:_,actions:L,dragClassCancel:C,padding:O.noPadding?"none":"md",menu:A,onCancelQuery:r.onCancelQuery,onFocus:S,onMouseMove:x},((t,a)=>n().createElement(n().Fragment,null,n().createElement(Yt.ErrorBoundaryAlert,{dependencies:[O,F]},n().createElement(e.PluginContextProvider,{meta:O.meta},n().createElement(Yt.PanelContextProvider,{value:B},M&&n().createElement(I,{id:V,data:F,title:o,timeRange:T,timeZone:k,options:s,fieldConfig:l,transparent:!1,width:t,height:a,renderCounter:0,replaceVariables:r.interpolate,onOptionsChange:r.onOptionsChange,onFieldConfigChange:r.onFieldConfigChange,onChangeTimeRange:r.onTimeRangeChange,eventBus:w})))))))))};const Wa=class extends H{constructor({enabled:e=!1}){super({enabled:e}),this.timerId=void 0,this._activationHandler=()=>(this.state.enabled&&this.enable(),()=>{window.clearInterval(this.timerId),this.timerId=void 0}),this.addActivationHandler(this._activationHandler)}enable(){window.clearInterval(this.timerId),this.timerId=void 0,this.timerId=window.setInterval((()=>{const e=pt.findAllObjects(this.getRoot(),(e=>e instanceof za));for(const t of e)t.forceRender()}),Wa.REFRESH_RATE),this.setState({enabled:!0})}disable(){window.clearInterval(this.timerId),this.timerId=void 0,this.setState({enabled:!1})}get isEnabled(){return this.state.enabled}};let Ha=Wa;function $a(e){if("string"==typeof e)return e;if(e){if(e instanceof Error)return e.message;if((0,a.isFetchError)(e)){if(e.data&&e.data.message)return e.data.message;if(e.statusText)return e.statusText}else if(e.hasOwnProperty("message"))return e.message}return JSON.stringify(e)}Ha.REFRESH_RATE=100;var Ua=Object.defineProperty,Ga=Object.getOwnPropertySymbols,qa=Object.prototype.hasOwnProperty,Qa=Object.prototype.propertyIsEnumerable,Ya=(e,t,n)=>t in e?Ua(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class Ka extends H{constructor(e,t=[]){super(((e,t)=>{for(var n in t||(t={}))qa.call(t,n)&&Ya(e,n,t[n]);if(Ga)for(var n of Ga(t))Qa.call(t,n)&&Ya(e,n,t[n]);return e})({isEnabled:!0},e)),this._results=new m.ReplaySubject(1),this.isDataLayer=!0,this._variableValueRecorder=new St,this._variableDependency=new wt(this,{onVariableUpdateCompleted:this.onVariableUpdateCompleted.bind(this)}),this._variableDependency.setPaths(t),this.addActivationHandler((()=>this.onActivate()))}onActivate(){return this.state.isEnabled&&this.onEnable(),this.shouldRunLayerOnActivate()&&this.runLayer(),this.subscribeToState(((e,t)=>{!e.isEnabled&&this.querySub&&(this.querySub.unsubscribe(),this.querySub=void 0,this.onDisable(),this._results.next({origin:this,data:pe}),this.setStateHelper({data:pe})),e.isEnabled&&!t.isEnabled&&(this.onEnable(),this.runLayer())})),()=>{this.onDeactivate()}}onDeactivate(){this.querySub&&(this.querySub.unsubscribe(),this.querySub=void 0),this.onDisable(),this._variableValueRecorder.recordCurrentDependencyValuesForSceneObject(this)}onVariableUpdateCompleted(){this.runLayer()}cancelQuery(){this.querySub&&(this.querySub.unsubscribe(),this.querySub=void 0,this.publishResults(pe))}publishResults(e){this.state.isEnabled&&(this._results.next({origin:this,data:e}),this.setStateHelper({data:e}))}getResultsStream(){return this._results}shouldRunLayerOnActivate(){return!!this.state.isEnabled&&(this._variableValueRecorder.hasDependenciesChanged(this)?(yt("SceneDataLayerBase","Variable dependency changed while inactive, shouldRunLayerOnActivate returns true"),!0):!this.state.data)}setStateHelper(e){Ut(this,e)}}function Xa({layer:e}){var t,r;const a=`data-layer-${e.state.key}`,{data:i,isEnabled:o}=e.useState(),s=Boolean(i&&i.state===ie.Loading);return n().createElement("div",{className:Za},n().createElement(zn,{htmlFor:a,isLoading:s,onCancel:()=>{var t;return null==(t=e.cancelQuery)?void 0:t.call(e)},label:e.state.name,description:e.state.description,error:null==(r=null==(t=e.state.data)?void 0:t.errors)?void 0:r[0].message}),n().createElement(Yt.InlineSwitch,{id:a,value:o,onChange:()=>e.setState({isEnabled:!o})}))}(class extends H{constructor(){super({})}}).Component=function({model:e}){const t=pt.getDataLayers(e,!0);return 0===t.length?null:n().createElement(n().Fragment,null,t.map((e=>n().createElement(e.Component,{model:e,key:e.state.key}))))};const Za=(0,Zt.css)({display:"flex"});function Ja(e){return"function"==typeof e}function ei(e){return function(t){if(function(e){return Ja(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var ti=function(e,t){return ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},ti(e,t)};function ni(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ti(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function ri(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function ai(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ii(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function oi(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function si(e){return this instanceof si?(this.v=e,this):new si(e)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var li,ci=((li=function(e){var t;t=this,Error.call(t),t.stack=(new Error).stack,this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}).prototype=Object.create(Error.prototype),li.prototype.constructor=li,li);function ui(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var di=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,a;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var o=ai(i),s=o.next();!s.done;s=o.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else i.remove(this);var l=this.initialTeardown;if(Ja(l))try{l()}catch(e){a=e instanceof ci?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=ai(c),d=u.next();!d.done;d=u.next()){var p=d.value;try{fi(p)}catch(e){a=null!=a?a:[],e instanceof ci?a=oi(oi([],ii(a)),ii(e.errors)):a.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}if(a)throw new ci(a)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)fi(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ui(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&ui(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();function pi(e){return e instanceof di||e&&"closed"in e&&Ja(e.remove)&&Ja(e.add)&&Ja(e.unsubscribe)}function fi(e){Ja(e)?e():e.unsubscribe()}di.EMPTY;var hi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},gi={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=gi.delegate;return(null==a?void 0:a.setTimeout)?a.setTimeout.apply(a,oi([e,t],ii(n))):setTimeout.apply(void 0,oi([e,t],ii(n)))},clearTimeout:function(e){var t=gi.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function mi(e){gi.setTimeout((function(){var t=hi.onUnhandledError;if(!t)throw e;t(e)}))}function bi(){}var vi=yi("C",void 0,void 0);function yi(e,t,n){return{kind:e,value:t,error:n}}var wi=null,Si=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,pi(t)&&t.add(n)):n.destination=Di,n}return ni(t,e),t.create=function(e,t,n){return new Ci(e,t,n)},t.prototype.next=function(e){this.isStopped?Pi(function(e){return yi("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?Pi(yi("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?Pi(vi,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(di),xi=Function.prototype.bind;function Oi(e,t){return xi.call(e,t)}var _i=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Ei(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Ei(e)}else Ei(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Ei(e)}},e}(),Ci=function(e){function t(t,n,r){var a,i,o=e.call(this)||this;return Ja(t)||!t?a={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:o&&hi.useDeprecatedNextContext?((i=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},a={next:t.next&&Oi(t.next,i),error:t.error&&Oi(t.error,i),complete:t.complete&&Oi(t.complete,i)}):a=t,o.destination=new _i(a),o}return ni(t,e),t}(Si);function Ei(e){var t;hi.useDeprecatedSynchronousErrorHandling?(t=e,hi.useDeprecatedSynchronousErrorHandling&&wi&&(wi.errorThrown=!0,wi.error=t)):mi(e)}function Pi(e,t){var n=hi.onStoppedNotification;n&&gi.setTimeout((function(){return n(e,t)}))}var Di={closed:!0,next:bi,error:function(e){throw e},complete:bi};function ki(e,t,n,r,a){return new Ti(e,t,n,r,a)}var Ti=function(e){function t(t,n,r,a,i,o){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=o,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return ni(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Si);function Ri(e,t){return ei((function(n,r){var a=0;n.subscribe(ki(r,(function(n){r.next(e.call(t,n,a++))})))}))}var ji=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},Ii="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ai(e){return e}var Li=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,a=this,i=(r=e)&&r instanceof Si||function(e){return e&&Ja(e.next)&&Ja(e.error)&&Ja(e.complete)}(r)&&pi(r)?e:new Ci(e,t,n);return function(e){if(hi.useDeprecatedSynchronousErrorHandling){var t=!wi;if(t&&(wi={errorThrown:!1,error:null}),e(),t){var n=wi,r=n.errorThrown,a=n.error;if(wi=null,r)throw a}}else e()}((function(){var e=a,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?a._subscribe(i):a._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Ni(t))((function(t,r){var a=new Ci({next:function(t){try{e(t)}catch(e){r(e),a.unsubscribe()}},error:r,complete:t});n.subscribe(a)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Ii]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(n=e).length?Ai:1===n.length?n[0]:function(e){return n.reduce((function(e,t){return t(e)}),e)})(this);var n},e.prototype.toPromise=function(e){var t=this;return new(e=Ni(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Ni(e){var t;return null!==(t=null!=e?e:hi.Promise)&&void 0!==t?t:Promise}var Fi="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Mi(e){if(e instanceof Li)return e;if(null!=e){if(function(e){return Ja(e[Ii])}(e))return i=e,new Li((function(e){var t=i[Ii]();if(Ja(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(ji(e))return a=e,new Li((function(e){for(var t=0;t<a.length&&!e.closed;t++)e.next(a[t]);e.complete()}));if(Ja(null==(r=e)?void 0:r.then))return n=e,new Li((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,mi)}));if(function(e){return Symbol.asyncIterator&&Ja(null==e?void 0:e[Symbol.asyncIterator])}(e))return Bi(e);if(function(e){return Ja(null==e?void 0:e[Fi])}(e))return t=e,new Li((function(e){var n,r;try{for(var a=ai(t),i=a.next();!i.done;i=a.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}e.complete()}));if(function(e){return Ja(null==e?void 0:e.getReader)}(e))return Bi(function(e){return function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),i=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){a[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=a[e](t)).value instanceof si?Promise.resolve(n.value.v).then(l,c):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}(this,arguments,(function(){var t,n,r;return ri(this,(function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,si(t.read())];case 3:return n=a.sent(),r=n.value,n.done?[4,si(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,si(r)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,n,r,a,i;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function Bi(e){return new Li((function(t){(function(e,t){var n,r,a,i,o,s,l,c;return o=this,s=void 0,c=function(){var o,s;return ri(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=ai(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,a){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,a,(t=e[n](t)).done,t.value)}))}}}(e),l.label=1;case 1:return[4,n.next()];case 2:if((r=l.sent()).done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=l.sent(),a={error:s},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{a(c.next(e))}catch(e){t(e)}}function r(e){try{a(c.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof l?a:new l((function(e){e(a)}))).then(n,r)}a((c=c.apply(o,s||[])).next())}))})(e,t).catch((function(e){return t.error(e)}))}))}function Vi(e,t,n){return void 0===n&&(n=1/0),Ja(t)?Vi((function(n,r){return Ri((function(e,a){return t(n,e,r,a)}))(Mi(e(n,r)))}),n):("number"==typeof t&&(n=t),ei((function(t,r){return function(e,t,n,r,a,i,o,s){var l=[],c=0,u=0,d=!1,p=function(){!d||l.length||c||t.complete()},f=function(e){return c<r?h(e):l.push(e)},h=function(e){c++;var a=!1;Mi(n(e,u++)).subscribe(ki(t,(function(e){t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{c--;for(var e=function(){var e=l.shift();h(e)};l.length&&c<r;)e();p()}catch(e){t.error(e)}})))};return e.subscribe(ki(t,f,(function(){d=!0,p()}))),function(){}}(t,r,e,n)})))}var zi=Object.defineProperty,Wi=Object.defineProperties,Hi=Object.getOwnPropertyDescriptors,$i=Object.getOwnPropertySymbols,Ui=Object.prototype.hasOwnProperty,Gi=Object.prototype.propertyIsEnumerable,qi=(e,t,n)=>t in e?zi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Qi={prepareAnnotation:e=>{if((0,ee.isString)(null==e?void 0:e.query)){const n=e,{query:r}=n;return t=((e,t)=>{for(var n in t||(t={}))Ui.call(t,n)&&qi(e,n,t[n]);if($i)for(var n of $i(t))Gi.call(t,n)&&qi(e,n,t[n]);return e})({},((e,t)=>{var n={};for(var r in e)Ui.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&$i)for(var r of $i(e))t.indexOf(r)<0&&Gi.call(e,r)&&(n[r]=e[r]);return n})(n,["query"])),Wi(t,Hi({target:{refId:"annotation_query",query:r},mappings:{}}))}var t;return e},prepareQuery:e=>e.target,processEvents:(t,n)=>function(t,n){return(0,m.of)(t).pipe((t=>t.pipe(Vi((t=>{if(!(null==t?void 0:t.length))return(0,m.of)(void 0);if(1===t.length)return(0,m.of)(t[0]);return(0,m.of)(t).pipe(e.standardTransformers.mergeTransformer.operator({},{interpolate:e=>e}),Ri((e=>e[0])))})))),Ri((t=>{if(!(null==t?void 0:t.length))return[];let r=!1,a=!1;const i={};for(const n of t.fields)i[(0,e.getFieldDisplayName)(n,t).toLowerCase()]=n;n||(n={});const o=[];for(const s of Ki){const l=n[s.key]||{};if(l.source===e.AnnotationEventFieldSource.Skip)continue;const c={key:s.key,split:s.split};if(l.source===e.AnnotationEventFieldSource.Text)c.text=l.value;else{const e=(l.value||s.key).toLowerCase();c.field=i[e],!c.field&&s.field&&(c.field=s.field(t))}(c.field||c.text)&&(o.push(c),"time"===c.key?r=!0:"text"===c.key&&(a=!0))}if(!r||!a)return console.error("Cannot process annotation fields. No time or text present."),[];const s=[];for(let e=0;e<t.length;e++){const t={type:"default",color:"red"};for(const n of o){let r;if(n.text)r=n.text;else if(n.field&&(r=n.field.values.get(e),void 0!==r&&n.regex)){const e=n.regex.exec(r);e&&(r=e[1]?e[1]:e[0])}null!=r&&(n.split&&"string"==typeof r&&(r=r.split(",")),t[n.key]=r)}s.push(t)}return s})))}(n,t.mappings)},Yi=[{key:"time",field:t=>t.fields.find((t=>t.type===e.FieldType.time)),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:t=>t.fields.find((t=>t.type===e.FieldType.string)),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],Ki=[...a.config.publicDashboardAccessToken?[{key:"color"},{key:"isRegion"},{key:"source"}]:[],...Yi,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}],Xi=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];var Zi=Object.defineProperty,Ji=Object.defineProperties,eo=Object.getOwnPropertyDescriptors,to=Object.getOwnPropertySymbols,no=Object.prototype.hasOwnProperty,ro=Object.prototype.propertyIsEnumerable,ao=(e,t,n)=>t in e?Zi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,io=(e,t)=>{for(var n in t||(t={}))no.call(t,n)&&ao(e,n,t[n]);if(to)for(var n of to(t))ro.call(t,n)&&ao(e,n,t[n]);return e},oo=(e,t)=>Ji(e,eo(t));let so=100;var lo=Object.defineProperty,co=Object.getOwnPropertySymbols,uo=Object.prototype.hasOwnProperty,po=Object.prototype.propertyIsEnumerable,fo=(e,t,n)=>t in e?lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function ho(e){return"panel-alert"===e.eventType}var go=Object.defineProperty,mo=Object.defineProperties,bo=Object.getOwnPropertyDescriptors,vo=Object.getOwnPropertySymbols,yo=Object.prototype.hasOwnProperty,wo=Object.prototype.propertyIsEnumerable,So=(e,t,n)=>t in e?go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xo=(e,t)=>{for(var n in t||(t={}))yo.call(t,n)&&So(e,n,t[n]);if(vo)for(var n of vo(t))wo.call(t,n)&&So(e,n,t[n]);return e},Oo=(e,t)=>mo(e,bo(t));(class extends Ka{constructor(e){super(xo({isEnabled:!0},e),["query"]),this._scopedVars={__sceneObject:{value:this,text:"__sceneObject"}}}onEnable(){const e=pt.getTimeRange(this);this._timeRangeSub=e.subscribeToState((()=>{this.runWithTimeRange(e)}))}onDisable(){var e;null==(e=this._timeRangeSub)||e.unsubscribe()}runLayer(){yt("AnnotationsDataLayer","run layer");const e=pt.getTimeRange(this);this.runWithTimeRange(e)}async runWithTimeRange(t){const{query:n}=this.state;if(this.querySub&&this.querySub.unsubscribe(),this._variableDependency.hasDependencyInLoadingState())yt("AnnotationsDataLayer","Variable dependency is in loading state, skipping query execution");else try{let r=function(t,n,r,i){var o;if(t.annotationQuery&&function(e){const{type:t}=e;return!e.annotations||Xi.includes(t)}(t))return console.warn("Using deprecated annotationQuery method, please upgrade your datasource"),(0,m.from)(t.annotationQuery({range:n.state.value,rangeRaw:n.state.value.raw,annotation:r,dashboard:{}})).pipe(Ri((e=>({state:ie.Done,events:e}))));const s=io(io({},Qi),t.annotations),l=io(io({},null==(o=s.getDefaultQuery)?void 0:o.call(s)),r),c=s.prepareAnnotation(l);if(!c)return(0,m.of)({state:ie.Done,events:[]});const u=s.prepareQuery(c);if(!u)return(0,m.of)({state:ie.Done,events:[]});const d=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,p=e.rangeUtil.calculateInterval(n.state.value,d,t.interval),f={__interval:{text:p.interval,value:p.interval},__interval_ms:{text:p.intervalMs.toString(),value:p.intervalMs},__annotation:{text:c.name,value:c},__sceneObject:{text:"__sceneObject",value:i}},h=io(oo(io({startTime:Date.now(),requestId:"AQ"+so++,range:n.state.value,maxDataPoints:d,scopedVars:f},p),{app:e.CoreApp.Dashboard,timezone:n.getTimeZone(),targets:[oo(io({},u),{refId:"Anno"})]}),Vt(i));return(0,a.getRunRequest)()(t,h).pipe(Vi((t=>{const n=(null==t?void 0:t.series.length)?t.series:t.annotations;return(null==n?void 0:n.length)?(n.forEach((t=>{var n;(null==(n=t.meta)?void 0:n.dataTopic)||(t.meta=oo(io({},t.meta||{}),{dataTopic:e.DataTopic.Annotations}))})),s.processEvents(c,n).pipe(Ri((e=>({state:t.state,events:e||[]}))))):(0,m.of)({state:t.state,events:[]})})))}(await this.resolveDataSource(n),t,n,this).pipe(Ht({type:"annotations",origin:this,cancel:()=>this.cancelQuery()}),(0,m.map)((e=>this.processEvents(n,e))));this.querySub=r.subscribe((e=>{this.publishResults(e)}))}catch(e){this.publishResults(Oo(xo({},pe),{state:ie.Error,errors:[{message:$a(e)}]})),console.error("AnnotationsDataLayer error",e)}}async resolveDataSource(e){return await vt(e.datasource||void 0,this._scopedVars)}processEvents(t,n){let r=(i=t,o=n.events||[],i.snapshotData&&delete(i=(0,ee.cloneDeep)(i)).snapshotData,o.map((e=>{var t;const n=((e,t)=>{for(var n in t||(t={}))uo.call(t,n)&&fo(e,n,t[n]);if(co)for(var n of co(t))po.call(t,n)&&fo(e,n,t[n]);return e})({},e);switch(n.source=i,n.color=a.config.theme2.visualization.getColorByName(i.iconColor),n.type=i.name,n.isRegion=Boolean(n.timeEnd&&n.time!==n.timeEnd),null==(t=n.newState)?void 0:t.toLowerCase()){case"pending":n.color="yellow";break;case"alerting":n.color="red";break;case"ok":case"normal":n.color="green";break;case"no_data":case"nodata":n.color="gray"}return n})));var i,o;r=function(e){let t=[];const n=(0,ee.partition)(e,"id"),r=(0,ee.groupBy)(n[0],"id");return t=(0,ee.map)(r,(e=>e.length>1&&!(0,ee.every)(e,ho)?(0,ee.find)(e,(e=>"panel-alert"!==e.eventType)):(0,ee.head)(e))),t=(0,ee.concat)(t,n[1]),t}(r);const s=Oo(xo({},pe),{state:n.state}),l=(0,e.arrayToDataFrame)(r);return l.meta=Oo(xo({},l.meta),{dataTopic:e.DataTopic.Annotations}),s.series=[l],s}}).Component=function({model:e}){const{isHidden:t}=e.useState();return t?null:n().createElement(Xa,{layer:e})},Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var _o=Object.defineProperty,Co=Object.defineProperties,Eo=Object.getOwnPropertyDescriptors,Po=Object.getOwnPropertySymbols,Do=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,To=(e,t,n)=>t in e?_o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class Ro extends H{constructor(){super(...arguments),this.isDataLayer=!0,this._results=new m.ReplaySubject(1),this._dataLayersMerger=new fr}subscribeToAllLayers(e){e.length>0?this.querySub=this._dataLayersMerger.getMergedStream(e).subscribe(this._onLayerUpdateReceived.bind(this)):(this._results.next({origin:this,data:pe}),this.setStateHelper({data:pe}))}_onLayerUpdateReceived(e){var t;let n=[];for(const r of e)(null==(t=r.data)?void 0:t.series)&&(n=n.concat(r.data.series));const r=(a=((e,t)=>{for(var n in t||(t={}))Do.call(t,n)&&To(e,n,t[n]);if(Po)for(var n of Po(t))ko.call(t,n)&&To(e,n,t[n]);return e})({},pe),Co(a,Eo({series:n})));var a;this._results.next({origin:this,data:r}),this.setStateHelper({data:r})}getResultsStream(){return this._results}cancelQuery(){var e;null==(e=this.querySub)||e.unsubscribe()}setStateHelper(e){Ut(this,e)}}class jo extends Ro{constructor(e){var t,n;super({name:null!=(t=e.name)?t:"Data layers",layers:null!=(n=e.layers)?n:[]}),this.addActivationHandler((()=>this._onActivate()))}_onActivate(){return this._subs.add(this.subscribeToState(((e,t)=>{var n;e.layers!==t.layers&&(null==(n=this.querySub)||n.unsubscribe(),this.subscribeToAllLayers(e.layers))}))),this.subscribeToAllLayers(this.state.layers),()=>{var e;null==(e=this.querySub)||e.unsubscribe()}}}jo.Component=({model:e})=>{const{layers:t}=e.useState();return n().createElement(n().Fragment,null,t.map((e=>n().createElement(e.Component,{model:e,key:e.state.key}))))};var Io=Object.defineProperty,Ao=Object.defineProperties,Lo=Object.getOwnPropertyDescriptors,No=Object.getOwnPropertySymbols,Fo=Object.prototype.hasOwnProperty,Mo=Object.prototype.propertyIsEnumerable,Bo=(e,t,n)=>t in e?Io(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vo=(e,t)=>{for(var n in t||(t={}))Fo.call(t,n)&&Bo(e,n,t[n]);if(No)for(var n of No(t))Mo.call(t,n)&&Bo(e,n,t[n]);return e},zo=(e,t)=>Ao(e,Lo(t));class Wo extends H{constructor(e){super(e),this._results=new m.ReplaySubject(1),this._variableDependency=new wt(this,{statePaths:["transformations"],onReferencedVariableValueChanged:()=>this.reprocessTransformations()}),this.addActivationHandler((()=>this.activationHandler()))}activationHandler(){const e=this.getSourceData();return this._subs.add(e.subscribeToState((e=>this.transform(e.data)))),e.state.data&&this.transform(e.state.data),()=>{this._transformSub&&this._transformSub.unsubscribe()}}getSourceData(){if(this.state.$data){if(this.state.$data instanceof jo)throw new Error("SceneDataLayerSet can not be used as data provider for SceneDataTransformer.");return this.state.$data}if(!this.parent||!this.parent.parent)throw new Error("SceneDataTransformer must either have $data set on it or have a parent.parent with $data");return pt.getData(this.parent.parent)}setContainerWidth(e){this.state.$data&&this.state.$data.setContainerWidth&&this.state.$data.setContainerWidth(e)}isDataReadyToDisplay(){const e=this.getSourceData();return!e.isDataReadyToDisplay||e.isDataReadyToDisplay()}reprocessTransformations(){this.transform(this.getSourceData().state.data,!0)}cancelQuery(){var e,t;null==(t=(e=this.getSourceData()).cancelQuery)||t.call(e)}getResultsStream(){return this._results}clone(e){const t=super.clone(e);return this._prevDataFromSource&&(t._prevDataFromSource=this._prevDataFromSource),t}haveAlreadyTransformedData(e){if(!this._prevDataFromSource)return!1;if(e===this._prevDataFromSource)return!0;const{series:t,annotations:n}=this._prevDataFromSource;return e.series===t&&e.annotations===n&&(this.state.data&&e.state!==this.state.data.state&&this.setState({data:zo(Vo({},this.state.data),{state:e.state})}),!0)}transform(t,n=!1){var r;if(0===this.state.transformations.length||!t)return this._prevDataFromSource=t,this.setState({data:t}),void(t&&this._results.next({origin:this,data:t}));if(!n&&this.haveAlreadyTransformedData(t))return;const i=this.state.transformations.filter((t=>!("options"in t)&&!("topic"in t)||null==t.topic||t.topic===e.DataTopic.Series)).map((e=>"operator"in e?e.operator:e)),o=this.state.transformations.filter((t=>("options"in t||"topic"in t)&&t.topic===e.DataTopic.Annotations)).map((e=>"operator"in e?e.operator:e));this._transformSub&&this._transformSub.unsubscribe();const s={interpolate:e=>{var n;return pt.interpolate(this,e,null==(n=t.request)?void 0:n.scopedVars)}};let l=[(0,e.transformDataFrame)(i,t.series,s)];t.annotations&&t.annotations.length>0&&o.length>0&&l.push((0,e.transformDataFrame)(o,null!=(r=t.annotations)?r:[])),this._transformSub=(0,m.forkJoin)(l).pipe((0,m.map)((e=>{const n=e[0],r=e[1];return zo(Vo({},t),{series:n,annotations:null!=r?r:t.annotations})})),(0,m.catchError)((n=>{var r;console.error("Error transforming data: ",n);const i=(null==(r=this.getSourceData().state.data)?void 0:r.errors)||[],o=(0,a.toDataQueryError)(n);o.message=`Error transforming data: ${o.message}`;const s=zo(Vo({},t),{state:e.LoadingState.Error,errors:[...i,o]});return(0,m.of)(s)}))).subscribe((e=>{this.setState({data:e}),this._results.next({origin:this,data:e}),this._prevDataFromSource=t}))}}class Ho extends H{}function $o({variable:t,layout:r,showAlways:a,hideLabel:i}){return $(t,{shouldActivateOrKeepAlive:!0}).hide!==e.VariableHide.hideVariable||a?"vertical"===r?n().createElement("div",{className:qo,"data-testid":Xt.pages.Dashboard.SubMenu.submenuItem},n().createElement(Uo,{variable:t,layout:r,hideLabel:i}),n().createElement(t.Component,{model:t})):n().createElement("div",{className:Go,"data-testid":Xt.pages.Dashboard.SubMenu.submenuItem},n().createElement(Uo,{variable:t,hideLabel:i}),n().createElement(t.Component,{model:t})):null}function Uo({variable:t,layout:r,hideLabel:a}){var i,o;const{state:s}=t;if(t.state.hide===e.VariableHide.hideLabel||a)return null;const l=`var-${s.key}`,c=null!=(i=s.label)?i:s.name;return n().createElement(zn,{htmlFor:l,isLoading:s.loading,onCancel:()=>{var e;return null==(e=t.onCancel)?void 0:e.call(t)},label:c,error:s.error,layout:r,description:null!=(o=s.description)?o:void 0})}Ho.Component=function({model:e}){const t=pt.getVariables(e).useState();return n().createElement(n().Fragment,null,t.variables.map((t=>n().createElement($o,{key:t.state.key,variable:t,layout:e.state.layout}))))};const Go=(0,Zt.css)({display:"flex"}),qo=(0,Zt.css)({display:"flex",flexDirection:"column"});(class extends H{}).Component=function({model:e}){const t=pt.lookupVariable(e.state.variableName,e);return t?n().createElement($o,{key:t.state.key,variable:t,layout:e.state.layout,showAlways:!0}):null};class Qo extends H{constructor(e){super(e),this._variablesThatHaveChanged=new Set,this._variablesToUpdate=new Set,this._updating=new Map,this._variableValueRecorder=new St,this._variableDependency=new Ko(this._handleParentVariableUpdatesCompleted.bind(this)),this._onActivate=()=>{const e=pt.getTimeRange(this);this._subs.add(this.subscribeToEvent(Pe,(e=>this._handleVariableValueChanged(e.payload)))),this._subs.add(e.subscribeToState((()=>{this._refreshTimeRangeBasedVariables()}))),this._subs.add(this.subscribeToState(this._onStateChanged)),this._checkForVariablesThatChangedWhileInactive();for(const e of this.state.variables)this._variableNeedsUpdate(e)&&this._variablesToUpdate.add(e);return this._updateNextBatch(),this._onDeactivate},this._onDeactivate=()=>{var e;for(const t of this._updating.values())null==(e=t.subscription)||e.unsubscribe();for(const e of this.state.variables)this._variablesToUpdate.has(e)||this._updating.has(e)||this._variableValueRecorder.recordCurrentValue(e);this._variablesToUpdate.clear(),this._updating.clear()},this._onStateChanged=(e,t)=>{const n=this._variablesToUpdate.size;for(const n of t.variables)if(!e.variables.includes(n)){const e=this._updating.get(n);(null==e?void 0:e.subscription)&&e.subscription.unsubscribe(),this._updating.delete(n),this._variablesToUpdate.delete(n)}for(const n of e.variables)t.variables.includes(n)||this._variableNeedsUpdate(n)&&this._variablesToUpdate.add(n);0===n&&this._variablesToUpdate.size>0&&this._updateNextBatch()},this.addActivationHandler(this._onActivate)}getByName(e){return this.state.variables.find((t=>t.state.name===e))}_refreshTimeRangeBasedVariables(){for(const t of this.state.variables)"refresh"in t.state&&t.state.refresh===e.VariableRefresh.onTimeRangeChanged&&this._variablesToUpdate.add(t);this._updateNextBatch()}_checkForVariablesThatChangedWhileInactive(){if(this._variableValueRecorder.hasValues())for(const e of this.state.variables)this._variableValueRecorder.hasValueChanged(e)&&(Yo(e,"Changed while in-active"),this._addDependentVariablesToUpdateQueue(e))}_variableNeedsUpdate(e){return!(e.isLazy||!e.validateAndUpdate||this._variableValueRecorder.hasRecordedValue(e)&&(Yo(e,"Skipping updateAndValidate current value valid"),1))}_updateNextBatch(){for(const e of this._variablesToUpdate){if(!e.validateAndUpdate)throw new Error("Variable added to variablesToUpdate but does not have validateAndUpdate");if(this._updating.has(e))continue;if(pt.hasVariableDependencyInLoadingState(e))continue;const t={variable:e};this._updating.set(e,t),Yo(e,"updateAndValidate started"),t.subscription=e.validateAndUpdate().subscribe({next:()=>this._validateAndUpdateCompleted(e),complete:()=>this._validateAndUpdateCompleted(e),error:t=>this._handleVariableError(e,t)})}}_validateAndUpdateCompleted(e){var t;if(!this._updating.has(e))return;const n=this._updating.get(e);null==(t=null==n?void 0:n.subscription)||t.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e),Yo(e,"updateAndValidate completed"),this._notifyDependentSceneObjects(e),this._updateNextBatch()}cancel(e){var t;const n=this._updating.get(e);null==(t=null==n?void 0:n.subscription)||t.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e)}_handleVariableError(e,t){var n;const r=this._updating.get(e);null==(n=null==r?void 0:r.subscription)||n.unsubscribe(),this._updating.delete(e),this._variablesToUpdate.delete(e),e.setState({loading:!1,error:t.message}),console.error("SceneVariableSet updateAndValidate error",t),Yo(e,"updateAndValidate error",t)}_handleVariableValueChanged(e){this._variablesThatHaveChanged.add(e),this._addDependentVariablesToUpdateQueue(e),this._updating.has(e)||(this._updateNextBatch(),this._notifyDependentSceneObjects(e))}_handleParentVariableUpdatesCompleted(e,t){t&&this._addDependentVariablesToUpdateQueue(e),this._variablesToUpdate.size>0&&0===this._updating.size&&this._updateNextBatch()}_addDependentVariablesToUpdateQueue(e){for(const t of this.state.variables)t.variableDependency&&t.variableDependency.hasDependencyOn(e.state.name)&&(Yo(t,"Added to update queue, dependant variable value changed"),this._updating.has(t)&&t.onCancel&&t.onCancel(),this._variablesToUpdate.add(t))}_notifyDependentSceneObjects(e){this.parent&&(this._traverseSceneAndNotify(this.parent,e,this._variablesThatHaveChanged.has(e)),this._variablesThatHaveChanged.delete(e))}_traverseSceneAndNotify(e,t,n){if(this!==e&&e.isActive){if(e.state.$variables&&e.state.$variables!==this&&e.state.$variables.getByName(t.state.name))return;e.variableDependency&&e.variableDependency.variableUpdateCompleted(t,n),e.forEachChild((e=>this._traverseSceneAndNotify(e,t,n)))}}isVariableLoadingOrWaitingToUpdate(e){return!(!e.isAncestorLoading||!e.isAncestorLoading())||!(!this._variablesToUpdate.has(e)&&!this._updating.has(e))||pt.hasVariableDependencyInLoadingState(e)}}function Yo(e,t,n){n?yt("SceneVariableSet",`Variable[${e.state.name}]: ${t}`,n):yt("SceneVariableSet",`Variable[${e.state.name}]: ${t}`)}class Ko{constructor(e){this._variableUpdatesCompleted=e,this._emptySet=new Set}getNames(){return this._emptySet}hasDependencyOn(e){return!1}variableUpdateCompleted(e,t){this._variableUpdatesCompleted(e,t)}}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var Xo=Object.defineProperty,Zo=Object.getOwnPropertySymbols,Jo=Object.prototype.hasOwnProperty,es=Object.prototype.propertyIsEnumerable,ts=(e,t,n)=>t in e?Xo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class ns extends Gt{constructor(e){super(((e,t)=>{for(var n in t||(t={}))Jo.call(t,n)&&ts(e,n,t[n]);if(Zo)for(var n of Zo(t))es.call(t,n)&&ts(e,n,t[n]);return e})({type:"custom",query:"",value:"",text:"",options:[],name:""},e)),this._variableDependency=new wt(this,{statePaths:["query"]})}getValueOptions(e){var t;const n=(null!=(t=pt.interpolate(this,this.state.query).match(/(?:\\,|[^,])+/g))?t:[]).map((e=>{var t;e=e.replace(/\\,/g,",");const n=null!=(t=/^(.+)\s:\s(.+)$/g.exec(e))?t:[];if(3===n.length){const[,e,t]=n;return{label:e.trim(),value:t.trim()}}return{label:e.trim(),value:e.trim()}}));return(0,m.of)(n)}}ns.Component=({model:e})=>En(e);var rs=Object.defineProperty,as=Object.getOwnPropertySymbols,is=Object.prototype.hasOwnProperty,os=Object.prototype.propertyIsEnumerable,ss=(e,t,n)=>t in e?rs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class ls extends Gt{constructor(e){super(((e,t)=>{for(var n in t||(t={}))is.call(t,n)&&ss(e,n,t[n]);if(as)for(var n of as(t))os.call(t,n)&&ss(e,n,t[n]);return e})({type:"datasource",value:"",text:"",options:[],name:"",regex:"",pluginId:""},e)),this._variableDependency=new wt(this,{statePaths:["regex"]})}getValueOptions(t){if(!this.state.pluginId)return(0,m.of)([]);const n=(0,a.getDataSourceSrv)().getList({metrics:!0,variables:!1,pluginId:this.state.pluginId});let r;if(this.state.regex){const t=pt.interpolate(this,this.state.regex,void 0,"regex");r=(0,e.stringToJsRegex)(t)}const i=[];for(let e=0;e<n.length;e++){const t=n[e];cs(t,r)&&i.push({label:t.name,value:t.uid}),this.state.defaultOptionEnabled&&us(t,r)&&i.push({label:"default",value:"default"})}return 0===i.length?this.setState({error:"No data sources found"}):this.state.error&&this.setState({error:null}),(0,m.of)(i)}}function cs(e,t){return!t||t.exec(e.name)}function us(e,t){return!!e.isDefault&&(!t||t.exec("default"))}ls.Component=({model:e})=>En(e);const ds=e=>Boolean(e.metricFindQuery)&&!Boolean(e.variables),ps=t=>{if(!t.variables)return!1;if(t.variables.getType()!==e.VariableSupportType.Standard)return!1;const n=t.variables;return"toDataQuery"in n&&Boolean(n.toDataQuery)},fs=t=>{if(!t.variables)return!1;if(t.variables.getType()!==e.VariableSupportType.Custom)return!1;const n=t.variables;return"query"in n&&"editor"in n&&Boolean(n.query)&&Boolean(n.editor)};var hs=Object.defineProperty,gs=Object.defineProperties,ms=Object.getOwnPropertyDescriptors,bs=Object.getOwnPropertySymbols,vs=Object.prototype.hasOwnProperty,ys=Object.prototype.propertyIsEnumerable,ws=(e,t,n)=>t in e?hs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ss=(e,t)=>{for(var n in t||(t={}))vs.call(t,n)&&ws(e,n,t[n]);if(bs)for(var n of bs(t))ys.call(t,n)&&ws(e,n,t[n]);return e},xs=(e,t)=>gs(e,ms(t));class Os{constructor(e,t=(0,a.getRunRequest)()){this.datasource=e,this._runRequest=t}getTarget(e){if(ps(this.datasource))return this.datasource.variables.toDataQuery(function(e){var t;const n=null!=(t=e.state.query)?t:"";return"string"==typeof n?{query:n,refId:`variable-${e.state.name}`}:null==n.refId?xs(Ss({},n),{refId:`variable-${e.state.name}`}):e.state.query}(e));throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){return ps(this.datasource)?this.datasource.variables.query?this._runRequest(this.datasource,t,this.datasource.variables.query.bind(this.datasource.variables)):this._runRequest(this.datasource,t):Es()}}class _s{constructor(e){this.datasource=e}getTarget(e){if(ds(this.datasource))return e.state.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({variable:t,searchFilter:n},r){return ds(this.datasource)?(0,m.from)(this.datasource.metricFindQuery(t.state.query,xs(Ss({},r),{variable:{name:t.state.name,type:t.state.type},searchFilter:n}))).pipe((0,m.mergeMap)((t=>{if(!t||!t.length)return Es();const n=t;return(0,m.of)({series:n,state:e.LoadingState.Done,timeRange:r.range})}))):Es()}}class Cs{constructor(e,t=(0,a.getRunRequest)()){this.datasource=e,this._runRequest=t}getTarget(e){if(fs(this.datasource))return e.state.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest(e,t){return fs(this.datasource)?this.datasource.variables.query?this._runRequest(this.datasource,t,this.datasource.variables.query.bind(this.datasource.variables)):this._runRequest(this.datasource,t):Es()}}function Es(){return(0,m.of)({state:e.LoadingState.Done,series:[],timeRange:(0,e.getDefaultTimeRange)()})}const Ps=(e,t)=>{const n=[];let r=null;t.lastIndex=0;do{r=t.exec(e),r&&n.push(r)}while(t.global&&r&&""!==r[0]&&void 0!==r[0]);return n};var Ds=Object.defineProperty,ks=Object.getOwnPropertySymbols,Ts=Object.prototype.hasOwnProperty,Rs=Object.prototype.propertyIsEnumerable,js=(e,t,n)=>t in e?Ds(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function Is(e,t){const n=["A","B","C","D","E","F","G","H"],r=[];if(t>5)return[];for(const a of n){const n=`${e}${a}`;r.push({name:n,children:Is(n,t+1)})}return r}function As(e,t,n){if(n>=t.length)return e;if("*"===t[n])return e;const r=t[n];let a=[],i=[r];r.startsWith("{")&&(i=r.replace(/\{|\}/g,"").split(","));for(const r of e)for(const e of i)if(-1!==e.indexOf("*")){const i=e.replace("*","");new RegExp(`^${i}.*`,"gi").test(r.name)&&(a=a.concat(As([r],t,n+1)))}else r.name===e&&(a=a.concat(As(r.children,t,n+1)));return a}function Ls(e){return 0===e.indexOf("value")?[{name:e,children:[]}]:As(Is("",0),e.split("."),0)}(class extends Gt{constructor(t){super(((e,t)=>{for(var n in t||(t={}))Ts.call(t,n)&&js(e,n,t[n]);if(ks)for(var n of ks(t))Rs.call(t,n)&&js(e,n,t[n]);return e})({type:"query",name:"",value:"",text:"",options:[],datasource:null,regex:"",query:{refId:"A"},refresh:e.VariableRefresh.onDashboardLoad,sort:e.VariableSort.disabled},t)),this._variableDependency=new wt(this,{statePaths:["regex","query","datasource"]}),this.onSearchChange=e=>{kr(this.state.query).indexOf("__searchFilter")>-1&&this._updateOptionsBasedOnSearchFilter(e)},this._updateOptionsBasedOnSearchFilter=(0,ee.debounce)((async e=>{const t=await(0,m.lastValueFrom)(this.getValueOptions({searchFilter:e}));this.setState({options:t,loading:!1})}),400)}getValueOptions(t){return this.state.query?(this.setState({loading:!0,error:null}),(0,m.from)(vt(this.state.datasource,{__sceneObject:{text:"__sceneObject",value:this}})).pipe((0,m.mergeMap)((n=>{const r=function(e){if(ps(e))return new Os(e,(0,a.getRunRequest)());if(ds(e))return new _s(e);if(fs(e))return new Cs(e);throw new Error(`Couldn't create a query runner for datasource ${e.type}`)}(n),i=r.getTarget(this),o=this.getRequest(i,t.searchFilter);return r.runRequest({variable:this,searchFilter:t.searchFilter},o).pipe(Ht({type:"variable",request:o,origin:this}),(0,m.filter)((t=>t.state===e.LoadingState.Done||t.state===e.LoadingState.Error)),(0,m.take)(1),(0,m.mergeMap)((t=>t.state===e.LoadingState.Error?(0,m.throwError)((()=>t.error)):(0,m.of)(t))),(t=>t.pipe((0,m.map)((t=>{const n=t.series;if(!n||!n.length)return[];if(function(t){if(!t)return!1;if(!t.length)return!0;const n=t[0];if((0,e.isDataFrame)(n))return!1;for(const e in n){if(!n.hasOwnProperty(e))continue;if(null!==n[e]&&"string"!=typeof n[e]&&"number"!=typeof n[e])continue;const t=e.toLowerCase();if("text"===t||"value"===t)return!0}return!1}(n))return n;if(0===n[0].fields.length)return[];const r=(0,e.getProcessedDataFrames)(n),a=[];let i=-1,o=-1,s=-1,l=-1;for(const t of r)for(let r=0;r<t.fields.length;r++){const a=t.fields[r],c=(0,e.getFieldDisplayName)(a,t,n).toLowerCase();a.type===e.FieldType.string&&-1===s&&(s=r),"text"===c&&a.type===e.FieldType.string&&-1===o&&(o=r),"value"===c&&a.type===e.FieldType.string&&-1===i&&(i=r),"expandable"!==c||a.type!==e.FieldType.boolean&&a.type!==e.FieldType.number||-1!==l||(l=r)}if(-1===s)throw new Error("Couldn't find any field of type string in the results.");for(const e of n)for(let t=0;t<e.length;t++){const n=-1!==l?e.fields[l].values.get(t):void 0,r=e.fields[s].values.get(t),c=-1!==o?e.fields[o].values.get(t):null,u=-1!==i?e.fields[i].values.get(t):null;-1!==i||-1!==o?-1!==i||-1===o?-1===i||-1!==o?a.push({text:c,value:u,expandable:n}):a.push({text:u,value:u,expandable:n}):a.push({text:c,value:c,expandable:n}):a.push({text:r,value:r,expandable:n})}return a})))),(0,m.mergeMap)((t=>{let n="";return this.state.regex&&(n=pt.interpolate(this,this.state.regex,void 0,"regex")),(0,m.of)(((t,n,r)=>{var a,i,o,s,l,c;let u,d=[];t&&(u=(0,e.stringToJsRegex)(t));for(let e=0;e<r.length;e++){const t=r[e];let n=void 0===t.text||null===t.text?t.value:t.text,p=void 0===t.value||null===t.value?t.text:t.value;if((0,ee.isNumber)(p)&&(p=p.toString()),(0,ee.isNumber)(n)&&(n=n.toString()),u){const e=Ps(p,u);if(!e.length)continue;const t=e.find((e=>e.groups&&e.groups.value)),r=e.find((e=>e.groups&&e.groups.text)),f=e.find((e=>e.length>1)),h=e.length>1&&f;if(t||r)p=null!=(o=null==(a=null==t?void 0:t.groups)?void 0:a.value)?o:null==(i=null==r?void 0:r.groups)?void 0:i.text,n=null!=(c=null==(s=null==r?void 0:r.groups)?void 0:s.text)?c:null==(l=null==t?void 0:t.groups)?void 0:l.value;else{if(h){for(let t=0;t<e.length;t++){const n=e[t];d.push({label:n[1],value:n[1]})}continue}f&&(n=f[1],p=f[1])}}d.push({label:n,value:p})}return d=(0,ee.uniqBy)(d,"value"),((t,n)=>{if(n===e.VariableSort.disabled)return t;const r=e=>{if(!e.text)return-1;const t=e.text.match(/.*?(\d+).*/);return!t||t.length<2?-1:parseInt(t[1],10)},a=e=>e.sort(((e,t)=>e.text?t.text?e.text.localeCompare(t.text,void 0,{numeric:!0}):1:-1));switch(n){case e.VariableSort.alphabeticalAsc:t=(0,ee.sortBy)(t,"label");break;case e.VariableSort.alphabeticalDesc:t=(0,ee.sortBy)(t,"label").reverse();break;case e.VariableSort.numericalAsc:t=(0,ee.sortBy)(t,r);break;case e.VariableSort.numericalDesc:t=(t=(0,ee.sortBy)(t,r)).reverse();break;case e.VariableSort.alphabeticalCaseInsensitiveAsc:t=(0,ee.sortBy)(t,(e=>(0,ee.toLower)(e.label)));break;case e.VariableSort.alphabeticalCaseInsensitiveDesc:t=(t=(0,ee.sortBy)(t,(e=>(0,ee.toLower)(e.label)))).reverse();break;case e.VariableSort.naturalAsc||7:t=a(t);break;case e.VariableSort.naturalDesc||8:t=(t=a(t)).reverse()}return t})(d,n)})(n,this.state.sort,t))})),(0,m.catchError)((e=>e.cancelled?(0,m.of)([]):(0,m.throwError)((()=>e)))))})))):(0,m.of)([])}getRequest(t,n){const r={__sceneObject:{text:"__sceneObject",value:this}};n&&(r.__searchFilter={value:n,text:n});const a=pt.getTimeRange(this).state.value;return{app:e.CoreApp.Dashboard,requestId:x(),timezone:"",range:a,interval:"",intervalMs:0,targets:[t],scopedVars:r,startTime:Date.now()}}}).Component=({model:e})=>En(e);var Ns=Object.defineProperty,Fs=Object.getOwnPropertySymbols,Ms=Object.prototype.hasOwnProperty,Bs=Object.prototype.propertyIsEnumerable,Vs=(e,t,n)=>t in e?Ns(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function zs({model:e}){const{value:r,key:a,loading:i}=e.useState(),o=(0,t.useCallback)((t=>{e.setValue(t.currentTarget.value)}),[e]),s=(0,t.useCallback)((t=>{"Enter"===t.key&&e.setValue(t.currentTarget.value)}),[e]);return n().createElement(Yt.AutoSizeInput,{id:a,placeholder:"Enter value",minWidth:15,defaultValue:r,loading:i,onBlur:o,onKeyDown:s})}(class extends Gt{constructor(t,n=!1){super(((e,t)=>{for(var n in t||(t={}))Ms.call(t,n)&&Vs(e,n,t[n]);if(Fs)for(var n of Fs(t))Bs.call(t,n)&&Vs(e,n,t[n]);return e})({type:"custom",name:"Test",value:"Value",text:"Text",query:"Query",options:[],refresh:e.VariableRefresh.onDashboardLoad},t)),this.completeUpdate=new m.Subject,this.isGettingValues=!0,this.getValueOptionsCount=0,this.isLazy=!1,this._variableDependency=new wt(this,{statePaths:["query"]}),this.isLazy=n}getValueOptions(e){const{delayMs:t}=this.state;this.getValueOptionsCount+=1;const n=pt.getQueryController(this);return new m.Observable((e=>{const r={type:"variable",origin:this,cancel:()=>e.complete()};if(n&&n.queryStarted(r),this.setState({loading:!0}),this.state.throwError)throw new Error(this.state.throwError);const a=pt.interpolate(this,this.state.query),i=this.getOptions(a),o=this.completeUpdate.subscribe({next:()=>{this.setState({issuedQuery:a,options:i,loading:!1}),e.next(i),e.complete()}});let s;return t?s=window.setTimeout((()=>this.signalUpdateCompleted()),t):0===t&&this.signalUpdateCompleted(),this.isGettingValues=!0,()=>{o.unsubscribe(),window.clearTimeout(s),this.isGettingValues=!1,this.state.loading&&this.setState({loading:!1}),n&&n.queryCompleted(r)}}))}cancel(){const e=Z(this,(e=>e instanceof Qo?e:void 0));null==e||e.cancel(this)}getOptions(e){return this.state.optionsToReturn?this.state.optionsToReturn:Ls(e).map((e=>({label:e.name,value:e.name})))}signalUpdateCompleted(){this.completeUpdate.next(1)}}).Component=({model:e})=>En(e);var Ws=Object.defineProperty,Hs=Object.getOwnPropertySymbols,$s=Object.prototype.hasOwnProperty,Us=Object.prototype.propertyIsEnumerable,Gs=(e,t,n)=>t in e?Ws(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;(class extends H{constructor(e){super(((e,t)=>{for(var n in t||(t={}))$s.call(t,n)&&Gs(e,n,t[n]);if(Hs)for(var n of Hs(t))Us.call(t,n)&&Gs(e,n,t[n]);return e})({type:"textbox",value:"",name:""},e)),this._urlSync=new fe(this,{keys:()=>[this.getKey()]})}getValue(){return this.state.value}setValue(e){e!==this.state.value&&(this.setState({value:e}),this.publishEvent(new Pe(this),!0))}getKey(){return`var-${this.state.name}`}getUrlState(){return{[this.getKey()]:this.state.value}}updateFromUrl(e){const t={},n=e[this.getKey()];"string"==typeof n&&(t.value=n),this.setState(t)}}).Component=({model:e})=>n().createElement(zs,{model:e}),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var qs=Object.defineProperty,Qs=Object.getOwnPropertySymbols,Ys=Object.prototype.hasOwnProperty,Ks=Object.prototype.propertyIsEnumerable,Xs=(e,t,n)=>t in e?qs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;(class extends H{constructor(e){super(((e,t)=>{for(var n in t||(t={}))Ys.call(t,n)&&Xs(e,n,t[n]);if(Qs)for(var n of Qs(t))Ks.call(t,n)&&Xs(e,n,t[n]);return e})({type:"interval",value:"",intervals:["1m","10m","30m","1h","6h","12h","1d","7d","14d","30d"],name:"",autoStepCount:30,autoMinInterval:"10s",autoEnabled:!1,refresh:Vr.onTimeRangeChanged},e)),this._onChange=e=>{this.setState({value:e.value}),this.publishEvent(new Pe(this),!0)},this._urlSync=new fe(this,{keys:()=>[this.getKey()]})}getKey(){return`var-${this.state.name}`}getUrlState(){return{[this.getKey()]:this.state.value}}updateFromUrl(e){const t={},n=e[this.getKey()];"string"==typeof n&&(n.startsWith("$__auto_interval_")?t.value=He:t.value=n),this.setState(t)}getOptionsForSelect(){const{value:e,intervals:t,autoEnabled:n}=this.state;let r=t.map((e=>({value:e,label:e})));return n&&(r=[{value:He,label:"Auto"},...r]),e&&!r.some((t=>t.value===e))&&r.push({value:e,label:e}),r}getValue(){const{value:e,autoStepCount:t,autoMinInterval:n}=this.state;return e===He?this.getAutoRefreshInteval(t,n):e}getAutoRefreshInteval(t,n){const r=pt.getTimeRange(this).state.value;return e.rangeUtil.calculateInterval(r,t,n).interval}validateAndUpdate(){const{value:e,intervals:t}=this.state;let n=!1;if(e===He)n=!0;else if(!e&&t.length>0){const e=t[0];this.setState({value:e}),n=!0}return n&&this.publishEvent(new Pe(this),!0),(0,m.of)({})}}).Component=({model:e})=>{const{key:t,value:r}=e.useState();return n().createElement(Yt.Select,{id:t,placeholder:"Select value",width:"auto",value:r,tabSelectsValue:!1,options:e.getOptionsForSelect(),onChange:e._onChange})};var Zs,Js,el,tl=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},nl=(e,t,n)=>(tl(e,t,"read from private field"),n?n.call(e):t.get(e)),rl=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},al=(e,t,n,r)=>(tl(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);class il{constructor(){this._urlKeyMapper=new ft,this._stateSub=null,this._paramsCache=new ol,rl(this,Zs,(({payload:e})=>{const t=e.changedObject;if(t.urlSync){const e=t.urlSync.getUrlState(),n=a.locationService.getSearch(),r={};for(const[a,i]of Object.entries(e)){const e=this._urlKeyMapper.getUniqueKey(a,t);bt(n.getAll(e),i)||(r[e]=i)}Object.keys(r).length>0&&(yt("UrlSyncManager","onStateChange updating URL"),a.locationService.partial(r,!0),this._lastLocation=a.locationService.getLocation())}}))}initSync(e){var t;this._stateSub&&(yt("UrlSyncManager","Unregister previous scene state subscription",null==(t=this._sceneRoot)?void 0:t.state.key),this._stateSub.unsubscribe()),yt("UrlSyncManager","init",e.state.key),this._sceneRoot=e,this._stateSub=e.subscribeToEvent(j,nl(this,Zs)),this._urlKeyMapper.clear(),this._lastLocation=a.locationService.getLocation(),this.handleNewObject(this._sceneRoot)}cleanUp(e){this._sceneRoot===e&&(yt("UrlSyncManager","Clean up"),this._stateSub&&(this._stateSub.unsubscribe(),this._stateSub=null,yt("UrlSyncManager","Root deactived, unsub to state","same key",this._sceneRoot.state.key===e.state.key)),this._sceneRoot=void 0,this._lastLocation=void 0)}handleNewLocation(e){this._sceneRoot&&this._lastLocation!==e&&(yt("UrlSyncManager","handleNewLocation"),this._lastLocation=e,gt(this._sceneRoot,this._paramsCache.getParams(),this._urlKeyMapper))}handleNewObject(e){this._sceneRoot&&gt(e,this._paramsCache.getParams(),this._urlKeyMapper)}getUrlState(e){return function(e){const t=new ft,n={},r=e=>{if(e.urlSync){const r=e.urlSync.getUrlState();for(const[a,i]of Object.entries(r))if(null!=i){const r=t.getUniqueKey(a,e);n[r]=i}}e.forEachChild(r)};return r(e),n}(e)}}Zs=new WeakMap;class ol{constructor(){rl(this,Js,void 0),rl(this,el,void 0)}getParams(){const e=a.locationService.getLocation();return nl(this,el)===e||(al(this,el,e),al(this,Js,new URLSearchParams(e.search))),nl(this,Js)}}let sl;function ll(){return sl||(sl=new il),sl}Js=new WeakMap,el=new WeakMap;class cl extends H{constructor(e){super(e),this.addActivationHandler((()=>{const e=function(e){const t=window.__grafanaSceneContext;return yt("setWindowGrafanaScene","set window.__grafanaSceneContext",e),window.__grafanaSceneContext=e,()=>{window.__grafanaSceneContext===e&&(yt("setWindowGrafanaScene","restore window.__grafanaSceneContext",t),window.__grafanaSceneContext=t)}}(this);return()=>{e()}}))}}cl.Component=function({model:e}){const{body:t,controls:r}=e.useState(),a=(0,Yt.useStyles2)(ul);return n().createElement("div",{className:a.container},r&&n().createElement("div",{className:a.controls},r.map((e=>n().createElement(e.Component,{key:e.state.key,model:e})))),n().createElement("div",{className:a.body},n().createElement(t.Component,{model:t})))};const ul=e=>({container:(0,Zt.css)({flexGrow:1,display:"flex",gap:e.spacing(2),minHeight:"100%",flexDirection:"column"}),body:(0,Zt.css)({flexGrow:1,display:"flex",gap:e.spacing(1)}),controls:(0,Zt.css)({display:"flex",gap:e.spacing(2),alignItems:"flex-end",flexWrap:"wrap"})});function dl(e){return e instanceof bc}(class extends H{addItem(e){this.setState({items:this.state.items?[...this.state.items,e]:[e]})}setItems(e){this.setState({items:e})}}).Component=function({model:e}){const{items:r=[]}=e.useState(),a=n().useRef(null);(0,t.useEffect)((()=>{a.current&&a.current.focus()}),[]);const i=e=>e.map((e=>{switch(e.type){case"divider":return n().createElement(Yt.Menu.Divider,{key:e.text});case"group":return n().createElement(Yt.Menu.Group,{key:e.text,label:e.text},e.subMenu?i(e.subMenu):void 0);default:return n().createElement(Yt.Menu.Item,{key:e.text,label:e.text,icon:e.iconClassName,childItems:e.subMenu?i(e.subMenu):void 0,url:e.href,onClick:e.onClick,shortcut:e.shortcut,testId:Xt.components.Panels.Panel.menuItems(e.text)})}}));return n().createElement(Yt.Menu,{ref:a},i(r))},class extends H{}.Component=function({model:e}){const{body:t}=e.useState(),r=e.parent;if(r&&!(r instanceof sc)&&!dl(r))throw new Error("SceneGridItem must be a child of SceneGridLayout or SceneGridRow");return t?n().createElement(t.Component,{model:t}):null};var pl=f(548),fl=f.n(pl);let hl;hl="undefined"!=typeof window?window:"undefined"!=typeof self?self:f.g;let gl=null,ml=null;const bl=hl.clearTimeout,vl=hl.setTimeout,yl=hl.cancelAnimationFrame||hl.mozCancelAnimationFrame||hl.webkitCancelAnimationFrame,wl=hl.requestAnimationFrame||hl.mozRequestAnimationFrame||hl.webkitRequestAnimationFrame;null==yl||null==wl?(gl=bl,ml=function(e){return vl(e,20)}):(gl=function([e,t]){yl(e),bl(t)},ml=function(e){const t=wl((function(){bl(n),e()})),n=vl((function(){yl(t),e()}),20);return[t,n]});class Sl extends t.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:e,disableWidth:t,onResize:n}=this.props;if(this._parentNode){const r=window.getComputedStyle(this._parentNode)||{},a=parseFloat(r.paddingLeft||"0"),i=parseFloat(r.paddingRight||"0"),o=parseFloat(r.paddingTop||"0"),s=parseFloat(r.paddingBottom||"0"),l=this._parentNode.getBoundingClientRect(),c=l.height-o-s,u=l.width-a-i,d=this._parentNode.offsetHeight-o-s,p=this._parentNode.offsetWidth-a-i;(e||this.state.height===d&&this.state.scaledHeight===c)&&(t||this.state.width===p&&this.state.scaledWidth===u)||(this.setState({height:d,width:p,scaledHeight:c,scaledWidth:u}),"function"==typeof n&&n({height:d,scaledHeight:c,scaledWidth:u,width:p}))}},this._setRef=e=>{this._autoSizer=e}}componentDidMount(){const{nonce:e}=this.props,t=this._autoSizer?this._autoSizer.parentNode:null;if(null!=t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){this._parentNode=t;const n=t.ownerDocument.defaultView.ResizeObserver;null!=n?(this._resizeObserver=new n((()=>{this._timeoutId=setTimeout(this._onResize,0)})),this._resizeObserver.observe(t)):(this._detectElementResize=function(e){let t,n,r,a,i,o,s;const l="undefined"!=typeof document&&document.attachEvent;if(!l){o=function(e){const t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,a=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,a.style.width=n.offsetWidth+1+"px",a.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},i=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},s=function(e){if(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)return;const t=this;o(this),this.__resizeRAF__&&gl(this.__resizeRAF__),this.__resizeRAF__=ml((function(){i(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))};let e=!1,l="";r="animationstart";const c="Webkit Moz O ms".split(" ");let u="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),d="";{const t=document.createElement("fakeelement");if(void 0!==t.style.animationName&&(e=!0),!1===e)for(let n=0;n<c.length;n++)if(void 0!==t.style[c[n]+"AnimationName"]){d=c[n],l="-"+d.toLowerCase()+"-",r=u[n],e=!0;break}}n="resizeanim",t="@"+l+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",a=l+"animation: 1ms "+n+"; "}return{addResizeListener:function(i,c){if(l)i.attachEvent("onresize",c);else{if(!i.__resizeTriggers__){const l=i.ownerDocument,c=hl.getComputedStyle(i);c&&"static"===c.position&&(i.style.position="relative"),function(n){if(!n.getElementById("detectElementResize")){const r=(t||"")+".resize-triggers { "+(a||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',i=n.head||n.getElementsByTagName("head")[0],o=n.createElement("style");o.id="detectElementResize",o.type="text/css",null!=e&&o.setAttribute("nonce",e),o.styleSheet?o.styleSheet.cssText=r:o.appendChild(n.createTextNode(r)),i.appendChild(o)}}(l),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=l.createElement("div")).className="resize-triggers";const u=l.createElement("div");u.className="expand-trigger",u.appendChild(l.createElement("div"));const d=l.createElement("div");d.className="contract-trigger",i.__resizeTriggers__.appendChild(u),i.__resizeTriggers__.appendChild(d),i.appendChild(i.__resizeTriggers__),o(i),i.addEventListener("scroll",s,!0),r&&(i.__resizeTriggers__.__animationListener__=function(e){e.animationName===n&&o(i)},i.__resizeTriggers__.addEventListener(r,i.__resizeTriggers__.__animationListener__))}i.__resizeListeners__.push(c)}},removeResizeListener:function(e,t){if(l)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",s,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(r,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),null!==this._timeoutId&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:n,defaultWidth:r,disableHeight:a=!1,disableWidth:i=!1,doNotBailOutOnEmptyChildren:o=!1,nonce:s,onResize:l,style:c={},tagName:u="div",...d}=this.props,{height:p,scaledHeight:f,scaledWidth:h,width:g}=this.state,m={overflow:"visible"},b={};let v=!1;return a||(0===p&&(v=!0),m.height=0,b.height=p,b.scaledHeight=f),i||(0===g&&(v=!0),m.width=0,b.width=g,b.scaledWidth=h),o&&(v=!1),(0,t.createElement)(u,{ref:this._setRef,style:{...m,...c},...d},!v&&e(b))}}const xl=function(e){(0,t.useEffect)(e,[])};var Ol=Object.defineProperty,_l=Object.getOwnPropertySymbols,Cl=Object.prototype.hasOwnProperty,El=Object.prototype.propertyIsEnumerable,Pl=(e,t,n)=>t in e?Ol(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function Dl(){const e=(0,t.useRef)(void 0);return null!=e.current||(e.current=(0,ee.uniqueId)()),e.current}const kl=n().forwardRef(((e,r)=>{var a=e,{children:i,onLoad:o,onChange:s}=a,l=((e,t)=>{var n={};for(var r in e)Cl.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&_l)for(var r of _l(e))t.indexOf(r)<0&&El.call(e,r)&&(n[r]=e[r]);return n})(a,["children","onLoad","onChange"]);const c=Dl(),[u,d]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),h=(0,t.useRef)(null);return(0,t.useImperativeHandle)(r,(()=>h.current)),xl((()=>{kl.addCallback(c,(e=>{!u&&e.isIntersecting&&(d(!0),null==o||o()),f(e.isIntersecting),null==s||s(e.isIntersecting)}));const e=h.current;return e&&kl.observer.observe(e),()=>{delete kl.callbacks[c],e&&kl.observer.unobserve(e),0===Object.keys(kl.callbacks).length&&kl.observer.disconnect()}})),n().createElement("div",((e,t)=>{for(var n in t||(t={}))Cl.call(t,n)&&Pl(e,n,t[n]);if(_l)for(var n of _l(t))El.call(t,n)&&Pl(e,n,t[n]);return e})({id:c,ref:h},l),u&&("function"==typeof i?i({isInView:p}):i))}));kl.displayName="LazyLoader",kl.callbacks={},kl.addCallback=(e,t)=>kl.callbacks[e]=t,kl.observer=new IntersectionObserver((e=>{for(const t of e)kl.callbacks[t.target.id](t)}),{rootMargin:"100px"});var Tl=Object.defineProperty,Rl=Object.defineProperties,jl=Object.getOwnPropertyDescriptors,Il=Object.getOwnPropertySymbols,Al=Object.prototype.hasOwnProperty,Ll=Object.prototype.propertyIsEnumerable,Nl=(e,t,n)=>t in e?Tl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fl=(e,t)=>{for(var n in t||(t={}))Al.call(t,n)&&Nl(e,n,t[n]);if(Il)for(var n of Il(t))Ll.call(t,n)&&Nl(e,n,t[n]);return e},Ml=(e,t)=>Rl(e,jl(t)),Bl=(e,t)=>{var n={};for(var r in e)Al.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Il)for(var r of Il(e))t.indexOf(r)<0&&Ll.call(e,r)&&(n[r]=e[r]);return n};const Vl=n().forwardRef(((e,t)=>{var r;const a=e,{grid:i,layoutItem:o,index:s,totalCount:l,isLazy:c,style:u,onLoad:d,onChange:p,children:f}=a,h=Bl(a,["grid","layoutItem","index","totalCount","isLazy","style","onLoad","onChange","children"]),g=i.getSceneLayoutChild(o.i),m=null==(r=g.getClassName)?void 0:r.call(g),b=n().createElement(g.Component,{model:g,key:g.state.key});return c?n().createElement(kl,Ml(Fl({},h),{key:g.state.key,"data-griditem-key":g.state.key,className:(0,Zt.cx)(m,e.className),style:u,ref:t}),b,f):n().createElement("div",Ml(Fl({},h),{ref:t,key:g.state.key,"data-griditem-key":g.state.key,className:(0,Zt.cx)(m,e.className),style:u}),b,f)}));function zl(e,t,n){e.current?t?e.current.classList.add("react-grid-layout--enable-move-animations"):e.current.classList.remove("react-grid-layout--enable-move-animations"):n||setTimeout((()=>zl(e,t,!0)),50)}Vl.displayName="GridItemWrapper";const Wl=n().forwardRef(((e,t)=>{var r=Bl(e,["handleAxis"]);const a=(0,Yt.useStyles2)(Hl);return n().createElement("div",Ml(Fl({ref:t},r),{className:`${a} scene-resize-handle`}),n().createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{d:"M21 15L15 21M21 8L8 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))}));function Hl(e){return(0,Zt.css)({position:"absolute",bottom:0,right:0,zIndex:999,padding:e.spacing(1.5,0,0,1.5),color:e.colors.border.strong,cursor:"se-resize","&:hover":{color:e.colors.text.link},svg:{display:"block"},".react-resizable-hide &":{display:"none"}})}Wl.displayName="ResizeHandle";var $l=Object.defineProperty,Ul=Object.defineProperties,Gl=Object.getOwnPropertyDescriptors,ql=Object.getOwnPropertySymbols,Ql=Object.prototype.hasOwnProperty,Yl=Object.prototype.propertyIsEnumerable,Kl=(e,t,n)=>t in e?$l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Xl=Object.defineProperty,Zl=Object.defineProperties,Jl=Object.getOwnPropertyDescriptors,ec=Object.getOwnPropertySymbols,tc=Object.prototype.hasOwnProperty,nc=Object.prototype.propertyIsEnumerable,rc=(e,t,n)=>t in e?Xl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ac=(e,t)=>{for(var n in t||(t={}))tc.call(t,n)&&rc(e,n,t[n]);if(ec)for(var n of ec(t))nc.call(t,n)&&rc(e,n,t[n]);return e},ic=(e,t)=>Zl(e,Jl(t));const oc=class extends H{constructor(e){super(ic(ac({},e),{children:lc(e.children)})),this._skipOnLayoutChange=!1,this._oldLayout=[],this._loadOldLayout=!1,this.onLayoutChange=e=>{if(this._skipOnLayoutChange)this._skipOnLayoutChange=!1;else{this._loadOldLayout&&(e=[...this._oldLayout],this._loadOldLayout=!1);for(const r of e){const e=this.getSceneLayoutChild(r.i),a={x:r.x,y:r.y,width:r.w,height:r.h};n=a,((t=e.state).x!==n.x||t.y!==n.y||t.width!==n.width||t.height!==n.height)&&e.setState(ac({},a))}var t,n;this.setState({children:lc(this.state.children)})}},this.onResizeStop=(e,t,n)=>{this.getSceneLayoutChild(n.i).setState({width:n.w,height:n.h})},this.onDragStart=e=>{this._oldLayout=[...e]},this.onDragStop=(e,t,n)=>{const r=this.getSceneLayoutChild(n.i);e=cc(e);for(let t=0;t<e.length;t++){const n=e[t],r=this.getSceneLayoutChild(n.i),a=r.state;(null==a?void 0:a.x)===n.x&&(null==a?void 0:a.y)===n.y||r.setState({x:n.x,y:n.y})}const a=e.findIndex((e=>e.i===n.i));let i=this.findGridItemSceneParent(e,a-1),o=this.state.children;r instanceof bc&&i instanceof bc&&(this.isRowDropValid(e,n,a)||(this._loadOldLayout=!0),i=this),i!==r.parent&&(o=this.moveChildTo(r,i)),this.setState({children:lc(o)}),this._skipOnLayoutChange=!0}}isDraggable(){var e;return null!=(e=this.state.isDraggable)&&e}getDragClass(){return`grid-drag-handle-${this.state.key}`}getDragClassCancel(){return"grid-drag-cancel"}toggleRow(e){var t,n;if(!e.state.isCollapsed)return e.setState({isCollapsed:!0}),void this.setState({});const r=e.state.children;if(0===r.length)return e.setState({isCollapsed:!1}),void this.setState({});const a=e.state.y,i=(null!=(t=r[0].state.y)?t:a)-(a+1);let o=a;for(const e of r){const t=ac({},e.state);t.y=null!=(n=t.y)?n:a,t.y-=i,t.y!==e.state.y&&e.setState(t),o=Math.max(o,Number(t.y)+Number(t.height))}const s=o-a-1;for(const t of this.state.children)if(t.state.y>a&&this.pushChildDown(t,s),dl(t)&&t!==e)for(const e of t.state.children)e.state.y>a&&this.pushChildDown(e,s);e.setState({isCollapsed:!1}),this.setState({})}getSceneLayoutChild(e){for(const t of this.state.children){if(t.state.key===e)return t;if(t instanceof bc)for(const n of t.state.children)if(n.state.key===e)return n}throw new Error("Scene layout child not found for GridItem")}pushChildDown(e,t){e.setState({y:e.state.y+t})}findGridItemSceneParent(e,t){for(let n=t;n>=0;n--){const t=e[n],r=this.getSceneLayoutChild(t.i);if(r instanceof bc)return r.state.isCollapsed?this:r}return this}isRowDropValid(e,t,n){if(e[e.length-1].i===t.i)return!0;const r=this.getSceneLayoutChild(e[n+1].i);return r instanceof bc||r.parent instanceof oc}moveChildTo(e,t){const n=e.parent;let r=this.state.children;const a=e.clone({key:e.state.key});if(n instanceof bc){const i=n.clone();if(i.setState({children:i.state.children.filter((t=>t.state.key!==e.state.key))}),r=r.map((e=>e===n?i:e)),t instanceof bc){const e=t.clone();e.setState({children:[...e.state.children,a]}),r=r.map((n=>n===t?e:n))}else r=[...r,a]}else if(!(t instanceof oc)){r=r.filter((t=>t.state.key!==e.state.key));const n=t.clone();n.setState({children:[...n.state.children,a]}),r=r.map((e=>e===t?n:e))}return r}toGridCell(e){var t,n;const r=e.state;let a=null!=(t=r.x)?t:0,i=null!=(n=r.y)?n:0;const o=Number.isInteger(Number(r.width))?Number(r.width):4,s=Number.isInteger(Number(r.height))?Number(r.height):4;let l=e.state.isDraggable,c=e.state.isResizable;return e instanceof bc&&(l=!!e.state.isCollapsed,c=!1),{i:e.state.key,x:a,y:i,h:s,w:o,isResizable:c,isDraggable:l}}buildGridLayout(e,t){let n=[];for(const e of this.state.children)if(n.push(this.toGridCell(e)),e instanceof bc&&!e.state.isCollapsed)for(const t of e.state.children)n.push(this.toGridCell(t));return n=cc(n),this.state.UNSAFE_fitPanels&&(n=function(e,t){const n=t-32,r=Math.max(...e.map((e=>e.h+e.y)))/Math.floor(n/38);return e.map((e=>{return t=((e,t)=>{for(var n in t||(t={}))Ql.call(t,n)&&Kl(e,n,t[n]);if(ql)for(var n of ql(t))Yl.call(t,n)&&Kl(e,n,t[n]);return e})({},e),n={y:Math.round(e.y/r)||0,h:Math.round(e.h/r)||1},Ul(t,Gl(n));var t,n}))}(n,t)),e<768?(this._skipOnLayoutChange=!0,n.map((e=>ic(ac({},e),{w:24})))):(this._skipOnLayoutChange=!1,n)}};let sc=oc;function lc(e){return e.forEach((e=>{e instanceof bc&&e.setState({children:lc(e.state.children)})})),[...e].sort(((e,t)=>e.state.y-t.state.y||e.state.x-t.state.x))}function cc(e){return[...e].sort(((e,t)=>e.y-t.y||e.x-t.x))}sc.Component=function({model:e}){const{children:r,isLazy:a,isDraggable:i,isResizable:o}=e.useState(),s=(0,t.useRef)(null);return(0,t.useEffect)((()=>{zl(s,!!i)}),[i]),function(e){if(e.some((e=>void 0===e.state.height||void 0===e.state.width||void 0===e.state.x||void 0===e.state.y)))throw new Error("All children must have a size specified")}(r),n().createElement(Sl,null,(({width:t,height:r})=>{if(0===t)return null;const l=e.buildGridLayout(t,r);return n().createElement("div",{ref:s,style:{width:`${t}px`,height:"100%",position:"relative",zIndex:1},className:"react-grid-layout"},n().createElement(fl(),{width:t,isDraggable:i&&t>768,isResizable:null!=o&&o,containerPadding:[0,0],useCSSTransforms:!0,margin:[8,8],cols:24,rowHeight:30,draggableHandle:`.grid-drag-handle-${e.state.key}`,draggableCancel:".grid-drag-cancel",layout:l,onDragStart:e.onDragStart,onDragStop:e.onDragStop,onResizeStop:e.onResizeStop,onLayoutChange:e.onLayoutChange,isBounded:!1,resizeHandle:n().createElement(Wl,null)},l.map(((t,r)=>n().createElement(Vl,{key:t.i,grid:e,layoutItem:t,index:r,isLazy:a,totalCount:l.length})))))}))};var uc=Object.defineProperty,dc=Object.defineProperties,pc=Object.getOwnPropertyDescriptors,fc=Object.getOwnPropertySymbols,hc=Object.prototype.hasOwnProperty,gc=Object.prototype.propertyIsEnumerable,mc=(e,t,n)=>t in e?uc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class bc extends H{constructor(e){var t;super((t=((e,t)=>{for(var n in t||(t={}))hc.call(t,n)&&mc(e,n,t[n]);if(fc)for(var n of fc(t))gc.call(t,n)&&mc(e,n,t[n]);return e})({children:e.children||[],isCollapsible:e.isCollapsible||!0,title:e.title||""},e),dc(t,pc({x:0,height:1,width:24})))),this.onCollapseToggle=()=>{this.state.isCollapsible&&this.getGridLayout().toggleRow(this)}}getGridLayout(){const e=this.parent;if(!(e&&e instanceof sc))throw new Error("SceneGridRow must be a child of SceneGridLayout");return e}getUrlState(){return{rowc:this.state.isCollapsed?"1":"0"}}updateFromUrl(e){null!=e.rowc&&e.rowc!==this.getUrlState().rowc&&this.onCollapseToggle()}}bc.Component=function({model:e}){const t=(0,Yt.useStyles2)(vc),{isCollapsible:r,isCollapsed:a,title:i,actions:o,children:s}=e.useState(),l=e.getGridLayout(),c=l.getDragClass(),u=l.isDraggable(),d=s?s.length:0,p=1===d?"panel":"panels";return n().createElement("div",{className:(0,Zt.cx)(t.row,a&&t.rowCollapsed)},n().createElement("div",{className:t.rowTitleAndActionsGroup},n().createElement("button",{onClick:e.onCollapseToggle,className:t.rowTitleButton,"aria-label":a?"Expand row":"Collapse row","data-testid":Xt.components.DashboardRow.title(pt.interpolate(e,i,void 0,"text"))},r&&n().createElement(Yt.Icon,{name:a?"angle-right":"angle-down"}),n().createElement("span",{className:t.rowTitle,role:"heading"},pt.interpolate(e,i,void 0,"text"))),n().createElement("span",{className:(0,Zt.cx)(t.panelCount,a&&t.panelCountCollapsed)},"(",d," ",p,")"),o&&n().createElement("div",{className:t.rowActions},n().createElement(o.Component,{model:o}))),u&&a&&n().createElement("div",{className:(0,Zt.cx)(t.dragHandle,c)},n().createElement(Yt.Icon,{name:"draggabledots"})))};const vc=e=>({row:(0,Zt.css)({width:"100%",height:"30px",display:"flex",justifyContent:"space-between",gap:e.spacing(1)}),rowTitleButton:(0,Zt.css)({display:"flex",alignItems:"center",cursor:"pointer",background:"transparent",border:"none",gap:e.spacing(1)}),rowCollapsed:(0,Zt.css)({borderBottom:`1px solid ${e.colors.border.weak}`}),rowTitle:(0,Zt.css)({fontSize:e.typography.h5.fontSize,fontWeight:e.typography.fontWeightMedium}),collapsedInfo:(0,Zt.css)({fontSize:e.typography.bodySmall.fontSize,color:e.colors.text.secondary,display:"flex",alignItems:"center",flexGrow:1}),rowTitleAndActionsGroup:(0,Zt.css)({display:"flex","&:hover, &:focus-within":{"& > div":{opacity:1}}}),rowActions:(0,Zt.css)({display:"flex",opacity:0,transition:"200ms opacity ease-in 200ms","&:hover, &:focus-within":{opacity:1}}),dragHandle:(0,Zt.css)({display:"flex",padding:e.spacing(0,1),alignItems:"center",justifyContent:"flex-end",cursor:"move",color:e.colors.text.secondary,"&:hover":{color:e.colors.text.primary}}),panelCount:(0,Zt.css)({paddingLeft:e.spacing(2),color:e.colors.text.secondary,fontStyle:"italic",fontSize:e.typography.size.sm,fontWeight:"normal",display:"none",lineHeight:"30px"}),panelCountCollapsed:(0,Zt.css)({display:"inline-block"})});(class extends H{constructor(){super(...arguments),this.onToggle=()=>{this.setState({isCollapsed:!this.state.isCollapsed})},this.onRemove=()=>{const e=this.parent;"body"in e.state&&e.setState({body:void 0})}}}).Component=function({model:e}){const{title:t,isCollapsed:r,canCollapse:a,canRemove:i,body:o,controls:s}=e.useState(),l=(0,Yt.useStyles2)(vc),c=(0,Yt.useStyles2)(yc),u=(null!=s?s:[]).map((e=>n().createElement(e.Component,{key:e.state.key,model:e})));return i&&u.push(n().createElement(Yt.ToolbarButton,{icon:"times",variant:"default",onClick:e.onRemove,key:"remove-button","aria-label":"Remove scene"})),n().createElement("div",{className:c.wrapper},n().createElement("div",{className:(0,Zt.cx)(c.row,r&&c.rowCollapsed)},n().createElement("button",{onClick:e.onToggle,className:l.rowTitleButton,"aria-label":r?"Expand scene":"Collapse scene"},a&&n().createElement(Yt.Icon,{name:r?"angle-right":"angle-down"}),n().createElement("span",{className:l.rowTitle,role:"heading"},pt.interpolate(e,t,void 0,"text"))),n().createElement("div",{className:c.actions},u)),!r&&n().createElement(o.Component,{model:o}))};const yc=e=>({wrapper:(0,Zt.css)({display:"flex",flexDirection:"column",flexGrow:1,gap:e.spacing(1)}),row:(0,Zt.css)({width:"100%",display:"flex",justifyContent:"space-between",gap:e.spacing(1)}),rowCollapsed:(0,Zt.css)({borderBottom:`1px solid ${e.colors.border.weak}`,paddingBottom:e.spacing(1)}),actions:(0,Zt.css)({display:"flex",alignItems:"center",gap:e.spacing(1),justifyContent:"flex-end",flexGrow:1})});(class extends H{constructor(){super(...arguments),this._variableDependency=new wt(this,{statePaths:["text"]})}}).Component=({model:e})=>{const{text:t,fontSize:r=20,align:a="left",key:i,spacing:o}=e.useState(),s=(0,Yt.useTheme2)(),l=(0,Zt.css)({fontSize:r,display:"flex",flexGrow:1,alignItems:"center",padding:o?s.spacing(o,0):void 0,justifyContent:a});return n().createElement("div",{className:l,"data-testid":i},pt.interpolate(e,t))},class extends H{}.Component=({model:e})=>{const t=e.useState();return n().createElement(Yt.ToolbarButton,{onClick:t.onClick,icon:t.icon})},class extends H{}.Component=({model:e})=>{const t=e.useState();return n().createElement("div",{style:{display:"flex"}},t.label&&n().createElement(zn,{label:t.label}),n().createElement(Yt.Input,{defaultValue:t.value,width:8,onBlur:t=>{e.state.onChange(parseInt(t.currentTarget.value,10))}}))};class wc extends H{constructor(){super(...arguments),this.onZoom=()=>{const t=pt.getTimeRange(this),n=function(t,n){const r=t.to.valueOf()-t.from.valueOf(),a=t.to.valueOf()-r/2,i=0===r?3e4:2*r,o=a+i/2,s=a-i/2;return{from:(0,e.toUtc)(s),to:(0,e.toUtc)(o),raw:{from:(0,e.toUtc)(s),to:(0,e.toUtc)(o)}}}(t.state.value);t.onTimeRangeChange(n)},this.onChangeFiscalYearStartMonth=e=>{pt.getTimeRange(this).setState({fiscalYearStartMonth:e})},this.onMoveBackward=()=>{const e=pt.getTimeRange(this),{state:{value:t}}=e;e.onTimeRangeChange(xc(Sc.Backward,t,Date.now()))},this.onMoveForward=()=>{const e=pt.getTimeRange(this),{state:{value:t}}=e;e.onTimeRangeChange(xc(Sc.Forward,t,Date.now()))}}}wc.Component=function({model:e}){const{hidePicker:t,isOnCanvas:r}=e.useState(),a=pt.getTimeRange(e),i=a.getTimeZone(),o=a.useState();return t?null:n().createElement(Yt.TimeRangePicker,{isOnCanvas:null==r||r,value:o.value,onChange:a.onTimeRangeChange,timeZone:i,fiscalYearStartMonth:o.fiscalYearStartMonth,onMoveBackward:e.onMoveBackward,onMoveForward:e.onMoveForward,onZoom:e.onZoom,onChangeTimeZone:a.onTimeZoneChange,onChangeFiscalYearStartMonth:e.onChangeFiscalYearStartMonth})};var Sc=(e=>(e[e.Backward=0]="Backward",e[e.Forward=1]="Forward",e))(Sc||{});function xc(t,n,r){const a=n.to.valueOf(),i=n.from.valueOf(),o=(a-i)/2;let s,l;0===t?(s=i-o,l=a-o):(s=i+o,l=a+o,l>r&&a<r&&(l=r,s=i));const c=(0,e.toUtc)(s),u=(0,e.toUtc)(l);return{from:c,to:u,raw:{from:c,to:u}}}var Oc=Object.defineProperty,_c=Object.defineProperties,Cc=Object.getOwnPropertyDescriptors,Ec=Object.getOwnPropertySymbols,Pc=Object.prototype.hasOwnProperty,Dc=Object.prototype.propertyIsEnumerable,kc=(e,t,n)=>t in e?Oc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const Tc=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class Rc extends H{constructor(t){var n,r,i,o,s;super((o=((e,t)=>{for(var n in t||(t={}))Pc.call(t,n)&&kc(e,n,t[n]);if(Ec)for(var n of Ec(t))Dc.call(t,n)&&kc(e,n,t[n]);return e})({refresh:""},t),s={autoValue:void 0,autoEnabled:null==(n=t.autoEnabled)||n,autoMinInterval:null!=(r=t.autoMinInterval)?r:a.config.minRefreshInterval,intervals:null!=(i=t.intervals)?i:Tc},_c(o,Cc(s)))),this._urlSync=new fe(this,{keys:["refresh"]}),this.onRefresh=()=>{const e=pt.getQueryController(this);if(null==e?void 0:e.state.isRunning)return void e.cancelAll();const t=pt.getTimeRange(this);this._intervalTimer&&clearInterval(this._intervalTimer),t.onRefresh(),this.setupIntervalTimer()},this.onIntervalChanged=e=>{this.setState({refresh:e}),this.setupIntervalTimer()},this.setupAutoTimeRangeListener=()=>pt.getTimeRange(this).subscribeToState(((e,t)=>{e.from===t.from&&e.to===t.to||this.setupIntervalTimer()})),this.calculateAutoRefreshInterval=()=>{var t;const n=pt.getTimeRange(this),r=null!=(t=null==window?void 0:window.innerWidth)?t:2e3;return e.rangeUtil.calculateInterval(n.state.value,r,this.state.autoMinInterval)},this.setupIntervalTimer=()=>{var t;const n=pt.getTimeRange(this),{refresh:r,intervals:a}=this.state;if((this._intervalTimer||""===r)&&clearInterval(this._intervalTimer),""===r)return;if(r!==Yt.RefreshPicker.autoOption.value&&a&&!a.includes(r))return;let i;if(null==(t=this._autoTimeRangeListener)||t.unsubscribe(),r===Yt.RefreshPicker.autoOption.value){const e=this.calculateAutoRefreshInterval();i=e.intervalMs,this._autoTimeRangeListener=this.setupAutoTimeRangeListener(),e.interval!==this.state.autoValue&&this.setState({autoValue:e.interval})}else i=e.rangeUtil.intervalToMs(r);this._intervalTimer=setInterval((()=>{n.onRefresh()}),i)},this.addActivationHandler((()=>(this.setupIntervalTimer(),()=>{var e;this._intervalTimer&&clearInterval(this._intervalTimer),null==(e=this._autoTimeRangeListener)||e.unsubscribe()})))}getUrlState(){return{refresh:""!==this.state.refresh?this.state.refresh:void 0}}updateFromUrl(e){const t=e.refresh;"string"==typeof t?this.setState({refresh:t}):null==t&&this.setState({refresh:""})}}Rc.Component=function({model:e}){var t;const{refresh:r,intervals:a,autoEnabled:i,autoValue:o,isOnCanvas:s,primary:l,withText:c}=e.useState(),u=function(e){const t=pt.getQueryController(e);return!!t&&t.useState().isRunning}(e);let d,p,f=r===(null==(t=Yt.RefreshPicker.autoOption)?void 0:t.value)?o:c?"Refresh":void 0;return u&&(d="Cancel all queries",c&&(f="Cancel")),c&&(p="96px"),n().createElement(Yt.RefreshPicker,{showAutoInterval:i,value:r,intervals:a,tooltip:d,width:p,text:f,onRefresh:e.onRefresh,primary:l,onIntervalChanged:e.onIntervalChanged,isLoading:u,isOnCanvas:null==s||s})};const jc=e=>`${e}-compare`;var Ic=Object.defineProperty,Ac=Object.defineProperties,Lc=Object.getOwnPropertyDescriptors,Nc=Object.getOwnPropertySymbols,Fc=Object.prototype.hasOwnProperty,Mc=Object.prototype.propertyIsEnumerable,Bc=(e,t,n)=>t in e?Ic(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vc=(e,t)=>{for(var n in t||(t={}))Fc.call(t,n)&&Bc(e,n,t[n]);if(Nc)for(var n of Nc(t))Mc.call(t,n)&&Bc(e,n,t[n]);return e},zc=(e,t)=>Ac(e,Lc(t));const Wc="__previousPeriod",Hc="__noPeriod",$c={label:"Previous period",value:Wc},Uc={label:"No comparison",value:Hc},Gc=[{label:"Day before",value:"24h"},{label:"Week before",value:"1w"},{label:"Month before",value:"1M"}];(class extends H{constructor(t){super(Vc({compareOptions:Gc},t)),this._urlSync=new fe(this,{keys:["compareWith"]}),this._onActivate=()=>{const e=pt.getTimeRange(this);this.setState({compareOptions:this.getCompareOptions(e.state.value)}),this._subs.add(e.subscribeToState((e=>{const t=this.getCompareOptions(e.value),n={compareOptions:t};Boolean(this.state.compareWith)&&!t.find((({value:e})=>e===this.state.compareWith))&&(n.compareWith=Wc),this.setState(n)})))},this.getCompareOptions=t=>{const n=Math.ceil(t.to.diff(t.from)),r=Gc.findIndex((({value:t})=>e.rangeUtil.intervalToMs(t)>=n));return[Uc,$c,...Gc.slice(r).map((({label:e,value:t})=>({label:e,value:t})))]},this.onCompareWithChanged=e=>{e===Hc?this.onClearCompare():this.setState({compareWith:e})},this.onClearCompare=()=>{this.setState({compareWith:void 0})},this.addActivationHandler(this._onActivate)}getExtraQueries(e){const t=[],n=this.getCompareTimeRange(e.range);if(!n)return t;const r=e.targets.filter((e=>!1!==e.timeRangeCompare));return r.length&&t.push({req:zc(Vc({},e),{targets:r,range:n}),processor:qc}),t}shouldRerun(e,t){return e.compareWith!==t.compareWith}getCompareTimeRange(t){let n,r;if(this.state.compareWith){if(this.state.compareWith===Wc){const a=t.to.diff(t.from);n=(0,e.dateTime)(t.from).subtract(a),r=(0,e.dateTime)(t.to).subtract(a)}else n=(0,e.dateTime)(t.from).subtract(e.rangeUtil.intervalToMs(this.state.compareWith)),r=(0,e.dateTime)(t.to).subtract(e.rangeUtil.intervalToMs(this.state.compareWith));return{from:n,to:r,raw:{from:n,to:r}}}}getUrlState(){return{compareWith:this.state.compareWith}}updateFromUrl(e){if(!e.compareWith)return;const t=ge(e.compareWith);t&&(this.getCompareOptions(pt.getTimeRange(this).state.value).find((({value:e})=>e===t))?this.setState({compareWith:t}):this.setState({compareWith:"__previousPeriod"}))}}).Component=function({model:e}){var t;const r=(0,Yt.useStyles2)(Qc),{compareWith:a,compareOptions:i}=e.useState(),[o,s]=n().useState(a),l=null!=(t=i.find((({value:e})=>e===o)))?t:$c,c=i.find((({value:e})=>e===a)),u=Boolean(c),d=()=>{u?(s(a),e.onClearCompare()):u||e.onCompareWithChanged(l.value)};return n().createElement(Yt.ButtonGroup,null,n().createElement(Yt.ToolbarButton,{variant:"canvas",tooltip:"Enable time frame comparison",onClick:e=>{e.stopPropagation(),e.preventDefault(),d()}},n().createElement(Yt.Checkbox,{label:" ",value:u,onClick:d}),"Comparison"),u?n().createElement(Yt.ButtonSelect,{variant:"canvas",value:c,options:i,onChange:t=>{e.onCompareWithChanged(t.value)}}):n().createElement(Yt.ToolbarButton,{className:r.previewButton,disabled:!0,variant:"canvas",isOpen:!1},l.label))};const qc=(t,n)=>{const r=n.timeRange.from.diff(t.timeRange.from);return n.series.forEach((t=>{t.refId=jc(t.refId||""),t.meta=zc(Vc({},t.meta),{timeCompare:{diffMs:r,isTimeShiftQuery:!0}}),t.fields.forEach((t=>(t.type===e.FieldType.time&&(t.values=t.values.map((e=>r<0?e-r:e+r))),t.config=zc(Vc({},t.config),{color:{mode:"fixed",fixedColor:a.config.theme.palette.gray60}}),t)))})),(0,m.of)(n)};function Qc(e){return{previewButton:(0,Zt.css)({"&:disabled":{border:`1px solid ${e.colors.secondary.border}`,color:e.colors.text.disabled,opacity:1}})}}(class extends H{constructor(t){super(t),this.addActivationHandler((()=>{const t=pt.getData(this);this._subs.add(t.subscribeToState((t=>{var n;(null==(n=t.data)?void 0:n.state)===e.LoadingState.Done&&this.performRepeat(t.data)}))),t.state.data&&this.performRepeat(t.state.data)}))}performRepeat(e){const t=[];for(let n=0;n<e.series.length;n++){const r=this.state.getLayoutChild(e,e.series[n],n);t.push(r)}this.state.body.setState({children:t})}}).Component=({model:e})=>{const{body:t}=e.useState();return n().createElement(t.Component,{model:t})},class extends H{constructor(e){super(e),this._variableDependency=new wt(this,{variableNames:[this.state.variableName],onVariableUpdateCompleted:()=>this.performRepeat()}),this.addActivationHandler((()=>this.performRepeat()))}performRepeat(){if(this._variableDependency.hasDependencyInLoadingState())return;const e=pt.lookupVariable(this.state.variableName,this);if(!(e instanceof Gt))return void console.error("SceneByVariableRepeater: variable is not a MultiValueVariable");const t=function(e){const{value:t,text:n,options:r}=e.state;return e.hasAllValue()?r:Array.isArray(t)&&Array.isArray(n)?t.map(((e,t)=>({value:e,label:n[t]}))):[{value:t,label:n}]}(e),n=[];for(const e of t){const t=this.state.getLayoutChild(e);n.push(t)}this.state.body.setState({children:n})}}.Component=({model:e})=>{const{body:t}=e.useState();return n().createElement(t.Component,{model:t})};const Yc=class extends H{constructor(){super({})}get Component(){return Yc.Component}};let Kc=Yc;Kc.Component=e=>n().createElement("div",{style:{flexGrow:1}});class Xc extends H{toggleDirection(){this.setState({direction:"row"===this.state.direction?"column":"row"})}isDraggable(){return!1}}Xc.Component=function({model:e,parentState:r}){const{children:i,isHidden:o}=e.useState(),s=function(e,n){return(0,t.useMemo)((()=>{var t,r,i,o,s,l,c,u,d,p;const{direction:f="row",wrap:h}=e,g=a.config.theme2,m={};return n?Jc(m,e,n):(m.display="flex",m.flexGrow=1,m.minWidth=e.minWidth,m.minHeight=e.minHeight),m.flexDirection=f,m.gap="8px",m.flexWrap=h||"nowrap",m.alignContent="baseline",m.minWidth=m.minWidth||0,m.minHeight=m.minHeight||0,m[g.breakpoints.down("md")]={flexDirection:null!=(r=null==(t=e.md)?void 0:t.direction)?r:"column",maxWidth:null!=(o=null==(i=e.md)?void 0:i.maxWidth)?o:"unset",maxHeight:null!=(l=null==(s=e.md)?void 0:s.maxHeight)?l:"unset",height:null!=(u=null==(c=e.md)?void 0:c.height)?u:"unset",width:null!=(p=null==(d=e.md)?void 0:d.width)?p:"unset"},(0,Zt.css)(m)}),[n,e])}(e.state,r);return o?null:n().createElement("div",{className:s},i.map((t=>{const r=t.Component;return n().createElement(r,{key:t.state.key,model:t,parentState:e.state})})))};class Zc extends H{}function Jc(e,t,n){var r,a,i;const o=null!=(r=n.direction)?r:"row",{xSizing:s="fill",ySizing:l="fill"}=t;return e.display="flex",e.position="relative",e.flexDirection=o,"column"===o?(t.height?e.height=t.height:e.flexGrow="fill"===l?1:0,t.width?e.width=t.width:e.alignSelf="fill"===s?"stretch":"flex-start"):(t.height?e.height=t.height:e.alignSelf="fill"===l?"stretch":"flex-start",t.width?e.width=t.width:e.flexGrow="fill"===s?1:0),e.minWidth=t.minWidth,e.maxWidth=t.maxWidth,e.maxHeight=t.maxHeight,e.minHeight=null!=(a=t.minHeight)?a:n.minHeight,e.height=null!=(i=t.height)?i:n.height,e}Zc.Component=function({model:e,parentState:r}){if(!r)throw new Error("SceneFlexItem must be a child of SceneFlexLayout");const{body:i,isHidden:o}=e.useState(),s=function(e,n){return(0,t.useMemo)((()=>{var t,r,i,o,s,l,c,u,d,p;const f=a.config.theme2,h=Jc({},e,n);return h[f.breakpoints.down("md")]={maxWidth:null!=(r=null==(t=e.md)?void 0:t.maxWidth)?r:"unset",maxHeight:null!=(o=null==(i=e.md)?void 0:i.maxHeight)?o:"unset",height:null!=(c=null==(s=e.md)?void 0:s.height)?c:null==(l=n.md)?void 0:l.height,width:null!=(p=null==(u=e.md)?void 0:u.width)?p:null==(d=n.md)?void 0:d.width},(0,Zt.css)(h)}),[e,n])}(e.state,r);return!i||o?null:n().createElement("div",{className:s},n().createElement(i.Component,{model:i}))};var eu=Object.defineProperty,tu=Object.getOwnPropertySymbols,nu=Object.prototype.hasOwnProperty,ru=Object.prototype.propertyIsEnumerable,au=(e,t,n)=>t in e?eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class iu extends H{constructor(e){var t,n;super(((e,t)=>{for(var n in t||(t={}))nu.call(t,n)&&au(e,n,t[n]);if(tu)for(var n of tu(t))ru.call(t,n)&&au(e,n,t[n]);return e})({rowGap:1,columnGap:1,templateColumns:"repeat(auto-fit, minmax(400px, 1fr))",autoRows:null!=(t=e.autoRows)?t:"320px",children:null!=(n=e.children)?n:[]},e))}isDraggable(){return!1}}iu.Component=function({model:e}){const{children:r,isHidden:i,isLazy:o}=e.useState(),s=(l=e.state,(0,t.useMemo)((()=>{var e,t,n,r,i,o,s,c,u,d,p;const f={},h=a.config.theme2;return f.display="grid",f.gridTemplateColumns=l.templateColumns,f.gridTemplateRows=l.templateRows||"unset",f.gridAutoRows=l.autoRows||"unset",f.rowGap=h.spacing(null!=(e=l.rowGap)?e:1),f.columnGap=h.spacing(null!=(t=l.columnGap)?t:1),f.justifyItems=l.justifyItems||"unset",f.alignItems=l.alignItems||"unset",f.justifyContent=l.justifyContent||"unset",f.flexGrow=1,l.md&&(f[h.breakpoints.down("md")]={gridTemplateRows:null==(n=l.md)?void 0:n.templateRows,gridTemplateColumns:null==(r=l.md)?void 0:r.templateColumns,rowGap:l.md.rowGap?h.spacing(null!=(o=null==(i=l.md)?void 0:i.rowGap)?o:1):void 0,columnGap:l.md.columnGap?h.spacing(null!=(c=null==(s=l.md)?void 0:s.rowGap)?c:1):void 0,justifyItems:null==(u=l.md)?void 0:u.justifyItems,alignItems:null==(d=l.md)?void 0:d.alignItems,justifyContent:null==(p=l.md)?void 0:p.justifyContent}),(0,Zt.css)(f)}),[l]));var l;return i?null:n().createElement("div",{className:s},r.map((t=>{const r=t.Component;return o?n().createElement(kl,{key:t.state.key,className:s},n().createElement(r,{key:t.state.key,model:t,parentState:e.state})):n().createElement(r,{key:t.state.key,model:t,parentState:e.state})})))};class ou extends H{}ou.Component=function({model:e,parentState:r}){if(!r)throw new Error("SceneCSSGridItem must be a child of SceneCSSGridLayout");const{body:a,isHidden:i}=e.useState(),o=(s=e.state,(0,t.useMemo)((()=>{const e={};return e.gridColumn=s.gridColumn||"unset",e.gridRow=s.gridRow||"unset",e.position="relative",(0,Zt.css)(e)}),[s]));var s;return!a||i?null:n().createElement("div",{className:o},n().createElement(a.Component,{model:a}))};var su=Object.defineProperty,lu=Object.getOwnPropertySymbols,cu=Object.prototype.hasOwnProperty,uu=Object.prototype.propertyIsEnumerable,du=(e,t,n)=>t in e?su(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pu=(e,t)=>{for(var n in t||(t={}))cu.call(t,n)&&du(e,n,t[n]);if(lu)for(var n of lu(t))uu.call(t,n)&&du(e,n,t[n]);return e};const fu=new Set(["ArrowUp","ArrowDown"]),hu=new Set(["ArrowLeft","ArrowRight"]),gu={row:{dim:"width",axis:"clientX",min:"minWidth",max:"maxWidth"},column:{dim:"height",axis:"clientY",min:"minHeight",max:"maxHeight"}};function mu({direction:e="row",handleSize:r=32,initialSize:a="auto",primaryPaneStyles:i,secondaryPaneStyles:o,onDragFinished:s,children:l}){const c=n().Children.toArray(l),u=(0,t.useRef)(null),d=(0,t.useRef)(null),p=(0,t.useRef)(null),f=(0,t.useRef)(null),h=(0,t.useRef)(null),g=(0,t.useRef)("1fr"),m=(0,t.useRef)(void 0),b=(0,t.useRef)(void 0),v=gu[e].dim,y=gu[e].axis,w=gu[e].min,S=gu[e].max;!function(e,n,r=0,a){const i=(0,ee.throttle)(n,r);(0,t.useLayoutEffect)((()=>{if(!e)return;const t=new ResizeObserver(i);return t.observe(e,{box:"device-pixel-content-box"}),()=>t.disconnect()}),a)}(f.current,(e=>{for(const t of e){if(!t.target.isSameNode(f.current))return;const e=d.current.getBoundingClientRect()[v],n=vu(d.current);u.current.ariaValueNow=`${(0,ee.clamp)((e-n[w])/(n[S]-n[w])*100,0,100)}`}}),500,[S,w,e,v]);const x=(0,t.useRef)(null),O=(0,t.useCallback)((e=>{g.current=d.current.getBoundingClientRect()[v],h.current=f.current.getBoundingClientRect()[v],x.current=e[y],u.current.setPointerCapture(e.pointerId),m.current=vu(d.current),b.current=void 0}),[v,y]),_=(0,t.useCallback)((e=>{if(null!==x.current&&"1fr"!==g.current){const t=e[y]-x.current,n=m.current,a=(0,ee.clamp)(g.current+t,n[w],n[S]),i=a/(h.current-r);d.current.style.flexGrow=`${i}`,p.current.style.flexGrow=""+(1-i);const o=(0,ee.clamp)((a-n[w])/(n[S]-n[w])*100,0,100);u.current.ariaValueNow=`${o}`}}),[r,y,w,S]),C=(0,t.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),u.current.releasePointerCapture(e.pointerId),x.current=null,null==s||s(parseFloat(d.current.style.flexGrow))}),[s]),E=(0,t.useRef)(new Set),P=(0,t.useRef)(null),D=(0,t.useCallback)((t=>{var n;if(0===E.current.size)return void(P.current=null);if("1fr"===g.current)return;const a=.3*(t-(null!=(n=P.current)?n:t));let i=0;"row"===e?(E.current.has("ArrowLeft")&&(i-=a),E.current.has("ArrowRight")&&(i+=a)):(E.current.has("ArrowUp")&&(i-=a),E.current.has("ArrowDown")&&(i+=a));const o=m.current,s=d.current.getBoundingClientRect()[v],l=(0,ee.clamp)(s+i,o[w],o[S]),c=l/(h.current-r);d.current.style.flexGrow=`${c}`,p.current.style.flexGrow=""+(1-c);const f=(l-o[w])/(o[S]-o[w])*100;u.current.ariaValueNow=`${(0,ee.clamp)(f,0,100)}`,P.current=t,window.requestAnimationFrame(D)}),[e,r,w,S,v]),k=(0,t.useCallback)((t=>{if("Enter"!==t.key){if("Home"===t.key){m.current=vu(d.current),h.current=f.current.getBoundingClientRect()[v];const e=m.current[w]/(h.current-r);return d.current.style.flexGrow=`${e}`,p.current.style.flexGrow=""+(1-e),void(u.current.ariaValueNow="0")}if("End"===t.key){m.current=vu(d.current),h.current=f.current.getBoundingClientRect()[v];const e=m.current[S]/(h.current-r);return d.current.style.flexGrow=`${e}`,p.current.style.flexGrow=""+(1-e),void(u.current.ariaValueNow="100")}if(("column"===e&&fu.has(t.key)||"row"===e&&hu.has(t.key))&&!E.current.has(t.key)&&(b.current=void 0,t.preventDefault(),t.stopPropagation(),g.current=d.current.getBoundingClientRect()[v],h.current=f.current.getBoundingClientRect()[v],m.current=vu(d.current),!E.current.has(t.key))){const e=0===E.current.size;E.current.add(t.key),e&&window.requestAnimationFrame(D)}}else void 0===b.current?(b.current=d.current.style.flexGrow,d.current.style.flexGrow="0",p.current.style.flexGrow="1"):(d.current.style.flexGrow=b.current,p.current.style.flexGrow=""+(1-parseFloat(b.current)),b.current=void 0)}),[e,D,r,S,v,w]),T=(0,t.useCallback)((t=>{"row"===e&&!hu.has(t.key)||"column"===e&&!fu.has(t.key)||(E.current.delete(t.key),null==s||s(parseFloat(d.current.style.flexGrow)))}),[e,s]),R=(0,t.useCallback)((()=>{d.current.style.flexGrow="0.5",p.current.style.flexGrow="0.5";const e=vu(d.current);m.current=e,g.current=d.current.getBoundingClientRect()[v],u.current.ariaValueNow=""+(g.current-e[w])/(e[S]-e[w])*100}),[S,v,w]),j=(0,t.useCallback)((()=>{E.current.size>0&&(E.current.clear(),x.current=null,null==s||s(parseFloat(d.current.style.flexGrow)))}),[s]),I=(0,Yt.useStyles2)(bu),A=Dl(),L=2===c.length?"visible":"hidden";return n().createElement("div",{ref:f,className:I.container,style:{flexDirection:e}},n().createElement("div",{ref:d,className:I.panel,style:pu({flexGrow:"auto"===a?.5:(0,ee.clamp)(a,0,1),[w]:"min-content"},i),id:`start-panel-${A}`},c[0]),c[1]&&n().createElement(n().Fragment,null,n().createElement("div",{ref:u,style:{[v]:`${r}px`},className:(0,Zt.cx)(I.handle,{[I.handleHorizontal]:"column"===e}),onPointerUp:C,onPointerDown:O,onPointerMove:_,onKeyDown:k,onKeyUp:T,onDoubleClick:R,onBlur:j,role:"separator","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":50,"aria-controls":`start-panel-${A}`,"aria-label":"Pane resize widget",tabIndex:0}),n().createElement("div",{ref:p,className:I.panel,style:pu({flexGrow:"auto"===a?.5:(0,ee.clamp)(1-a,0,1),[w]:"min-content",visibility:`${L}`},o),id:`end-panel-${A}`},c[1])))}function bu(e){return{handle:(0,Zt.css)({cursor:"col-resize",position:"relative",flexShrink:0,userSelect:"none","&::before":{content:'""',position:"absolute",backgroundColor:e.colors.primary.main,left:"50%",transform:"translate(-50%)",top:0,height:"100%",width:"1px",opacity:0,transition:"opacity ease-in-out 0.2s"},"&::after":{content:'""',width:"4px",borderRadius:"4px",backgroundColor:e.colors.border.weak,transition:"background-color ease-in-out 0.2s",height:"50%",top:"calc(50% - (50%) / 2)",transform:"translateX(-50%)",position:"absolute",left:"50%"},"&:hover, &:focus-visible":{outline:"none","&::before":{opacity:1},"&::after":{backgroundColor:e.colors.primary.main}}}),handleHorizontal:(0,Zt.css)({cursor:"row-resize","&::before":{left:"inherit",transform:"translateY(-50%)",top:"50%",height:"1px",width:"100%"},"&::after":{width:"50%",height:"4px",top:"50%",transform:"translateY(-50%)",left:"calc(50% - (50%) / 2)"}}),container:(0,Zt.css)({display:"flex",width:"100%",flexGrow:1,overflow:"hidden"}),panel:(0,Zt.css)({display:"flex",position:"relative",flexBasis:0})}}function vu(e){if(null===e)return;const t=document.body.style.overflow,n=e.style.width,r=e.style.height,a=e.style.flexGrow;document.body.style.overflow="hidden",e.style.flexGrow="0";const{width:i,height:o}=e.getBoundingClientRect();e.style.flexGrow="100";const{width:s,height:l}=e.getBoundingClientRect();return document.body.style.overflow=t,e.style.width=n,e.style.height=r,e.style.flexGrow=a,{minWidth:i,maxWidth:s,minHeight:o,maxHeight:l}}(class extends H{toggleDirection(){this.setState({direction:"row"===this.state.direction?"column":"row"})}isDraggable(){return!1}}).Component=function({model:e}){const{primary:t,secondary:r,direction:a,isHidden:i,initialSize:o,primaryPaneStyles:s,secondaryPaneStyles:l}=e.useState();if(i)return null;const c=t.Component,u=null==r?void 0:r.Component;let d=r?o:1;return n().createElement(mu,{direction:a,initialSize:null!=d?d:.5,primaryPaneStyles:s,secondaryPaneStyles:l},n().createElement(c,{key:t.state.key,model:t,parentState:e.state}),u&&r&&n().createElement(u,{key:r.state.key,model:r,parentState:e.state}))};class yu extends H{enrichDataRequest(){return{app:this.state.name||"app"}}}yu.Component=({model:e})=>{const{pages:t}=e.useState();return n().createElement(r.Switch,null,t.map((e=>n().createElement(r.Route,{key:e.state.url,exact:!1,path:e.state.url,render:t=>p(e,t)}))))};const wu=new Map;var Su=Object.defineProperty,xu=Object.getOwnPropertySymbols,Ou=Object.prototype.hasOwnProperty,_u=Object.prototype.propertyIsEnumerable,Cu=(e,t,n)=>t in e?Su(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class Eu extends H{}function Pu({node:e}){const t=e.useState(),r=(0,Yt.useStyles2)(Du);return n().createElement("div",{className:r.container},Object.keys(t).map((a=>n().createElement("div",{className:r.row,key:a},n().createElement("div",{className:r.keyName},a),n().createElement("div",{className:r.value},function(e,t,r){if(null===t)return"null";switch(typeof t){case"number":return n().createElement(Yt.Input,{type:"number",defaultValue:t,onBlur:t=>r.setState({[e]:t.currentTarget.valueAsNumber})});case"string":return n().createElement(Yt.Input,{type:"text",defaultValue:t,onBlur:t=>r.setState({[e]:t.currentTarget.value})});case"object":return ot(t)?t.constructor.name:(0,ee.isPlainObject)(t)||(0,ee.isArray)(t)?n().createElement(Yt.JSONFormatter,{json:t,open:0}):String(t);default:return typeof t}}(a,t[a],e))))))}function Du(e){return{container:(0,Zt.css)({flexGrow:1,display:"flex",gap:e.spacing(.5),flexDirection:"column"}),row:(0,Zt.css)({display:"flex",gap:e.spacing(2)}),keyName:(0,Zt.css)({display:"flex",flexGrow:"0",width:120,alignItems:"center",height:e.spacing(e.components.height.md)}),value:(0,Zt.css)({flexGrow:1,minHeight:e.spacing(e.components.height.md),display:"flex",alignItems:"center"})}}function ku({node:e,selectedObject:t,onSelect:r}){const a=(0,Yt.useStyles2)(Tu),i=[],o=e===t;return e.forEachChild((e=>{i.push(n().createElement(ku,{node:e,key:e.state.key,selectedObject:t,onSelect:r}))})),n().createElement("div",{className:a.container},n().createElement("div",{className:(0,Zt.cx)(a.name,o&&a.selected),onClick:()=>r(e)},e.constructor.name),n().createElement("div",{className:a.children},i))}function Tu(e){return{container:(0,Zt.css)({flexGrow:1,display:"flex",gap:e.spacing(.5),flexDirection:"column"}),name:(0,Zt.css)({flexGrow:1,display:"flex",gap:e.spacing(1),fontSize:e.typography.bodySmall.fontSize,cursor:"pointer",padding:e.spacing(0,1),borderRadius:e.shape.borderRadius(2),position:"relative","&:hover":{background:e.colors.background.secondary}}),selected:(0,Zt.css)({"&::before":{display:"block",content:"' '",position:"absolute",left:0,width:4,bottom:2,top:2,borderRadius:e.shape.radius.default,backgroundImage:e.colors.gradients.brandVertical}}),children:(0,Zt.css)({flexGrow:1,display:"flex",flexDirection:"column",paddingLeft:e.spacing(1)})}}function Ru({scene:e}){const r=(0,Yt.useStyles2)(ju),[a,i]=(0,t.useState)(!1),[o,s]=(0,t.useState)();return n().createElement(n().Fragment,null,n().createElement(Yt.ToolbarButton,{variant:"canvas",icon:"bug",onClick:()=>i(!0)}),a&&n().createElement(Yt.Drawer,{title:"Scene debugger",onClose:()=>i(!1),size:"lg"},n().createElement("div",{className:r.panes},n().createElement("div",{className:r.pane1},n().createElement("div",{className:r.paneHeading},"Scene graph"),n().createElement(Yt.CustomScrollbar,{autoHeightMin:"100%"},n().createElement("div",{className:r.treeWrapper},n().createElement(ku,{node:e,selectedObject:o,onSelect:s})))),n().createElement("div",{className:r.pane2},n().createElement("div",{className:r.paneHeading},"Object details"),o&&n().createElement(Pu,{node:o})))))}function ju(e){return{panes:(0,Zt.css)({flexGrow:1,display:"flex",height:"100%",flexDirection:"row",marginTop:e.spacing(-2)}),pane1:(0,Zt.css)({flexGrow:0,display:"flex",height:"100%",flexDirection:"column",borderRight:`1px solid ${e.colors.border.weak}`}),pane2:(0,Zt.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column",paddingLeft:e.spacing(2)}),treeWrapper:(0,Zt.css)({paddingRight:e.spacing(2),height:"100%",marginLeft:e.spacing(-1)}),paneHeading:(0,Zt.css)({padding:e.spacing(1,0),fontWeight:e.typography.fontWeightMedium})}}function Iu({page:e,routeProps:i}){const o=function(e){return e.parent instanceof Nu?e.parent:e}(e),s=o.useState(),l=function(){const e=(0,r.useLocation)();return(0,a.locationSearchToObject)(e.search||"")}(),c=e.getScene(i.match),u=s.initializedScene===c,{layout:p}=e.state;(0,t.useLayoutEffect)((()=>{u||o.initializeScene(c)}),[c,o,u]),(0,t.useEffect)((()=>()=>o.setState({initializedScene:void 0})),[o]);const f=function(e){const n=ll(),i=(0,r.useLocation)(),[o,s]=(0,t.useState)(!1);return(0,t.useEffect)((()=>(n.initSync(e),s(!0),()=>n.cleanUp(e))),[e,n]),(0,t.useEffect)((()=>{const e=a.locationService.getLocation(),t=e!==i?e:i;e!==i&&console.log("latestLocation different from location"),n.handleNewLocation(t)}),[e,n,i]),o}(o);if(!u&&!f)return null;const h={text:s.title,img:s.titleImg,icon:s.titleIcon,url:d(s.url,s.preserveUrlKeys),hideFromBreadcrumbs:s.hideFromBreadcrumbs,parentItem:Au(s.getParentPage?s.getParentPage():o.parent)};s.tabs&&(h.children=s.tabs.map((t=>({text:t.state.title,icon:t.state.titleIcon,tabSuffix:t.state.tabSuffix,active:e===t,url:d(t.state.url,t.state.preserveUrlKeys),parentItem:h}))));let g=[];return s.controls&&(g=s.controls.map((e=>n().createElement(e.Component,{model:e,key:e.state.key})))),l["scene-debugger"]&&g.push(n().createElement(Ru,{scene:o,key:"scene-debugger"})),n().createElement(a.PluginPage,{layout:p,pageNav:h,actions:g,renderTitle:s.renderTitle,subTitle:s.subTitle},n().createElement(c.Component,{model:c}))}function Au(e,t){if(e instanceof Nu)return{text:e.state.title,url:d(e.state.url,e.state.preserveUrlKeys),hideFromBreadcrumbs:e.state.hideFromBreadcrumbs,parentItem:Au(e.state.getParentPage?e.state.getParentPage():e.parent)}}function Lu({drilldown:e,parent:t,routeProps:n}){return p(t.getDrilldownPage(e,n.match),n)}Eu.Component=({model:e})=>{const{component:t,props:r,reactNode:a}=e.useState();return t?n().createElement(t,((e,t)=>{for(var n in t||(t={}))Ou.call(t,n)&&Cu(e,n,t[n]);if(xu)for(var n of xu(t))_u.call(t,n)&&Cu(e,n,t[n]);return e})({},r)):a||null};class Nu extends H{constructor(e){super(e),this._sceneCache=new Map,this._drilldownCache=new Map}initializeScene(e){this.setState({initializedScene:e})}getScene(e){let t=this._sceneCache.get(e.url);if(t)return t;if(!this.state.getScene)throw new Error("Missing getScene on SceneAppPage "+this.state.title);return t=this.state.getScene(e),this._sceneCache.set(e.url,t),t}getDrilldownPage(e,t){let n=this._drilldownCache.get(t.url);return n||(n=e.getPage(t,this),this._drilldownCache.set(t.url,n),n)}enrichDataRequest(e){if(this.state.getParentPage)return this.state.getParentPage().enrichDataRequest(e);if(!this.parent)return null;const t=this.getRoot();return st(t)?t.enrichDataRequest(e):null}}Nu.Component=function({model:e,routeProps:t}){var a,i;const{tabs:o,drilldowns:s}=e.useState(),l=[];if(o&&o.length>0)for(let t=0;t<o.length;t++){const s=o[t];if(0===t&&l.push(n().createElement(r.Route,{exact:!0,key:e.state.url,path:null!=(a=e.state.routePath)?a:e.state.url,render:e=>p(s,e)})),l.push(n().createElement(r.Route,{exact:!0,key:s.state.url,path:null!=(i=s.state.routePath)?i:s.state.url,render:e=>p(s,e)})),s.state.drilldowns)for(const e of s.state.drilldowns)l.push(n().createElement(r.Route,{exact:!1,key:e.routePath,path:e.routePath,render:t=>n().createElement(Lu,{drilldown:e,parent:s,routeProps:t})}))}if(s)for(const t of s)l.push(n().createElement(r.Route,{key:t.routePath,exact:!1,path:t.routePath,render:r=>n().createElement(Lu,{drilldown:t,parent:e,routeProps:r})}));return!o&&(c=e,(u=t.match).isExact&&(u.url===c.state.url||c.parent instanceof Nu&&c.parent.state.tabs[0]===c&&c.parent.state.url===u.url))?n().createElement(Iu,{page:e,routeProps:t}):(l.push(function(e,t){return n().createElement(r.Route,{key:"fallback route",render:r=>{var a,i,o;const s=null!=(o=null==(i=(a=e.state).getFallbackPage)?void 0:i.call(a))?o:new Nu({url:"",title:"Not found",subTitle:"The url did not match any page",getScene:()=>new cl({body:new Xc({direction:"column",children:[new Zc({body:new Eu({component:()=>n().createElement("div",{"data-testid":"default-fallback-content"},"If you found your way here using a link then there might be a bug in this application.")})})]})})});return n().createElement(Iu,{page:s,routeProps:t})}})}(e,t)),n().createElement(r.Switch,null,l));var c,u};var Fu=(e=>(e.Always="always",e.Auto="auto",e.Never="never",e))(Fu||{}),Mu=(e=>(e.Hue="hue",e.None="none",e.Opacity="opacity",e.Scheme="scheme",e))(Mu||{}),Bu=(e=>(e.None="none",e.Normal="normal",e.Percent="percent",e))(Bu||{}),Vu=(e=>(e.Auto="auto",e.Horizontal="horizontal",e.Vertical="vertical",e))(Vu||{}),zu=(e=>(e.Background="background",e.BackgroundSolid="background_solid",e.None="none",e.Value="value",e))(zu||{}),Wu=(e=>(e.Area="area",e.Line="line",e.None="none",e))(Wu||{}),Hu=(e=>(e.Auto="auto",e.Center="center",e))(Hu||{}),$u=(e=>(e.Auto="auto",e.Name="name",e.None="none",e.Value="value",e.ValueAndName="value_and_name",e))($u||{}),Uu=(e=>(e.Multi="multi",e.None="none",e.Single="single",e))(Uu||{}),Gu=(e=>(e.Basic="basic",e.Gradient="gradient",e.Lcd="lcd",e))(Gu||{}),qu=(e=>(e.Color="color",e.Hidden="hidden",e.Text="text",e))(qu||{}),Qu=(e=>(e.Auto="auto",e.Left="left",e.Top="top",e))(Qu||{}),Yu=(e=>(e.Auto="auto",e.Manual="manual",e))(Yu||{}),Ku=(e=>(e.Lg="lg",e.Md="md",e.Sm="sm",e))(Ku||{});Vu.Auto,Fu.Auto,Bu.None,Mu.None,Gu.Gradient,Qu.Auto,Yu.Auto,qu.Color,Yu.Auto,Fu.Auto,Uu.Single,Mu.None,zu.Value,Wu.Area,Hu.Auto,$u.Auto,Fu.Auto,Fu.Auto,Ku.Sm,Fu.Auto;class Xu{constructor(){this._overrides=[]}overrideColor(e){return this._overrides[this._overrides.length-1].properties.push({id:"color",value:e}),this}overrideDecimals(e){return this._overrides[this._overrides.length-1].properties.push({id:"decimals",value:e}),this}overrideDisplayName(e){return this._overrides[this._overrides.length-1].properties.push({id:"displayName",value:e}),this}overrideFilterable(e){return this._overrides[this._overrides.length-1].properties.push({id:"filterable",value:e}),this}overrideLinks(e){return this._overrides[this._overrides.length-1].properties.push({id:"links",value:e}),this}overrideMappings(e){return this._overrides[this._overrides.length-1].properties.push({id:"mappings",value:e}),this}overrideMax(e){return this._overrides[this._overrides.length-1].properties.push({id:"max",value:e}),this}overrideMin(e){return this._overrides[this._overrides.length-1].properties.push({id:"min",value:e}),this}overrideNoValue(e){return this._overrides[this._overrides.length-1].properties.push({id:"noValue",value:e}),this}overrideThresholds(e){return this._overrides[this._overrides.length-1].properties.push({id:"thresholds",value:e}),this}overrideUnit(e){return this._overrides[this._overrides.length-1].properties.push({id:"unit",value:e}),this}}class Zu extends Xu{match(e){return this._overrides.push({matcher:e,properties:[]}),this}matchFieldsWithName(t){return this._overrides.push({matcher:{id:e.FieldMatcherID.byName,options:t},properties:[]}),this}matchFieldsWithNameByRegex(t){return this._overrides.push({matcher:{id:e.FieldMatcherID.byRegexp,options:t},properties:[]}),this}matchFieldsByType(t){return this._overrides.push({matcher:{id:e.FieldMatcherID.byType,options:t},properties:[]}),this}matchFieldsByQuery(t){return this._overrides.push({matcher:{id:e.FieldMatcherID.byFrameRefID,options:t},properties:[]}),this}matchFieldsByValue(t){return this._overrides.push({matcher:{id:e.FieldMatcherID.byValue,options:t},properties:[]}),this}matchComparisonQuery(e){return this.matchFieldsByQuery(jc(e))}overrideCustomFieldConfig(e,t){const n=`custom.${String(e)}`;return this._overrides[this._overrides.length-1].properties.push({id:n,value:t}),this}build(){return this._overrides}}var Ju=Object.defineProperty,ed=Object.defineProperties,td=Object.getOwnPropertyDescriptors,nd=Object.getOwnPropertySymbols,rd=Object.prototype.hasOwnProperty,ad=Object.prototype.propertyIsEnumerable,id=(e,t,n)=>t in e?Ju(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,od=(e,t)=>{for(var n in t||(t={}))rd.call(t,n)&&id(e,n,t[n]);if(nd)for(var n of nd(t))ad.call(t,n)&&id(e,n,t[n]);return e},sd=(e,t)=>ed(e,td(t));class ld{constructor(e){this.defaultFieldConfig=e,this._fieldConfig={defaults:{},overrides:[]},this._overridesBuilder=new Zu,this.setDefaults()}setDefaults(){const e={defaults:{custom:this.defaultFieldConfig?(0,ee.cloneDeep)(this.defaultFieldConfig()):{}},overrides:[]};this._fieldConfig=e}setColor(e){return this.setFieldConfigDefaults("color",e)}setDecimals(e){return this.setFieldConfigDefaults("decimals",e)}setDisplayName(e){return this.setFieldConfigDefaults("displayName",e)}setFilterable(e){return this.setFieldConfigDefaults("filterable",e)}setLinks(e){return this.setFieldConfigDefaults("links",e)}setMappings(e){return this.setFieldConfigDefaults("mappings",e)}setMax(e){return this.setFieldConfigDefaults("max",e)}setMin(e){return this.setFieldConfigDefaults("min",e)}setNoValue(e){return this.setFieldConfigDefaults("noValue",e)}setThresholds(e){return this.setFieldConfigDefaults("thresholds",e)}setUnit(e){return this.setFieldConfigDefaults("unit",e)}setCustomFieldConfig(e,t){return this._fieldConfig.defaults=sd(od({},this._fieldConfig.defaults),{custom:(0,ee.merge)(this._fieldConfig.defaults.custom,{[e]:t})}),this}setOverrides(e){return e(this._overridesBuilder),this}setFieldConfigDefaults(e,t){return this._fieldConfig.defaults=sd(od({},this._fieldConfig.defaults),{[e]:t}),this}build(){return{defaults:this._fieldConfig.defaults,overrides:this._overridesBuilder.build()}}}class cd{constructor(e){this.defaultOptions=e,this._options={},this.setDefaults()}setDefaults(){this._options=this.defaultOptions?(0,ee.cloneDeep)(this.defaultOptions()):{}}setOption(e,t){return this._options=(0,ee.merge)(this._options,{[e]:t}),this}build(){return this._options}}var ud=Object.defineProperty,dd=Object.defineProperties,pd=Object.getOwnPropertyDescriptors,fd=Object.getOwnPropertySymbols,hd=Object.prototype.hasOwnProperty,gd=Object.prototype.propertyIsEnumerable,md=(e,t,n)=>t in e?ud(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;class bd{constructor(e,t,n,r){this._state={},this._state.title="",this._state.description="",this._state.displayMode="default",this._state.hoverHeader=!1,this._state.pluginId=e,this._state.pluginVersion=t,this._fieldConfigBuilder=new ld(r),this._panelOptionsBuilder=new cd(n)}setTitle(e){return this._state.title=e,this}setDescription(e){return this._state.description=e,this}setDisplayMode(e){return this._state.displayMode=e,this}setHoverHeader(e){return this._state.hoverHeader=e,this}setMenu(e){return this._state.menu=e,this}setHeaderActions(e){return this._state.headerActions=e,this}setColor(e){return this._fieldConfigBuilder.setColor(e),this}setDecimals(e){return this._fieldConfigBuilder.setDecimals(e),this}setDisplayName(e){return this._fieldConfigBuilder.setDisplayName(e),this}setFilterable(e){return this._fieldConfigBuilder.setFilterable(e),this}setLinks(e){return this._fieldConfigBuilder.setLinks(e),this}setMappings(e){return this._fieldConfigBuilder.setMappings(e),this}setMax(e){return this._fieldConfigBuilder.setMax(e),this}setMin(e){return this._fieldConfigBuilder.setMin(e),this}setNoValue(e){return this._fieldConfigBuilder.setNoValue(e),this}setThresholds(e){return this._fieldConfigBuilder.setThresholds(e),this}setUnit(e){return this._fieldConfigBuilder.setUnit(e),this}setCustomFieldConfig(e,t){return this._fieldConfigBuilder.setCustomFieldConfig(e,t),this}setOverrides(e){return this._fieldConfigBuilder.setOverrides(e),this}setOption(e,t){return this._panelOptionsBuilder.setOption(e,t),this}setData(e){return this._state.$data=e,this}setTimeRange(e){return this._state.$timeRange=e,this}setVariables(e){return this._state.$variables=e,this}setBehaviors(e){return this._state.$behaviors=e,this}build(){const e=new za((t=((e,t)=>{for(var n in t||(t={}))hd.call(t,n)&&md(e,n,t[n]);if(fd)for(var n of fd(t))gd.call(t,n)&&md(e,n,t[n]);return e})({},this._state),n={options:this._panelOptionsBuilder.build(),fieldConfig:this._fieldConfigBuilder.build()},dd(t,pd(n))));var t,n;return e}}const vd=()=>new bd("logs","10.0.0"),yd=()=>new bd("timeseries","10.0.0"),wd=JSON.parse('{"id":"grafana-lokiexplore-app"}'),Sd="filters",xd="fields",Od="patterns",_d="fieldBy",Cd="labelBy",Ed="ds",Pd="${ds}",Dd="logsFormat",kd="lineFilter",Td="${filters} ${patterns} ${logsFormat} ${fields} ${lineFilter}",Rd={uid:Pd},jd="$__all",Id="detected_level";let Ad;class Ld{getServiceSceneState(){return this.serviceSceneState}setServiceSceneState(e){this.serviceSceneState={fields:e.fields,labels:e.labels,patterns:e.patterns,fieldsCount:e.fieldsCount,loading:e.loading}}constructor(){var e,t;t=void 0,(e="serviceSceneState")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}}function Nd(){return Ad}function Fd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Fd(e,t,n[t])}))}return e}const Bd=wd.id,Vd=`/a/${Bd}`;var zd;function Wd(e){return e.replace(/\//g,"-")}!function(e){e.explore="explore",e.logs="logs",e.labels="labels",e.patterns="patterns",e.fields="fields"}(zd||(zd={}));const Hd={explore:()=>Ud("explore"),logs:e=>Ud(`explore/service/${Wd(e)}/logs`),fields:e=>Ud(`explore/service/${Wd(e)}/fields`),patterns:e=>Ud(`explore/service/${Wd(e)}/patterns`),labels:e=>Ud(`explore/service/${Wd(e)}/labels`)},$d={explore:Ud("explore"),logs:Ud("explore/service/:service/logs"),fields:Ud("explore/service/:service/fields"),patterns:Ud("explore/service/:service/patterns"),labels:Ud("explore/service/:service/labels")};function Ud(e){return`${Vd}/${e}`}const Gd=["from","to",`var-${Ed}`],qd=["from","to","mode","urlColumns","visualizationType","selectedLine",Od,`var-${Od}`,`var-${Ed}`,`var-${Sd}`,`var-${xd}`,`var-${_d}`,`var-${Cd}`,`var-${Ed}`,`var-${Dd}`,`var-${kd}`];function Qd(){const t=a.locationService.getLocation(),n=(r=Hd.explore(),e.urlUtil.renderUrl(r,function(t){return Md({},Object.entries(e.urlUtil.getUrlSearchParams()).reduce(((e,[t,n])=>(Gd.includes(t)&&(e[t]=n),e)),{}),t)}(undefined)));var r;n!==t.pathname+t.search&&a.locationService.push(n)}function Yd(t,n,r){const i=a.locationService.getLocation(),o=i.pathname.split("/"),s=o[o.length-1],l=function(t,n){return e.urlUtil.renderUrl(t,function(t){return Md({},Object.entries(e.urlUtil.getUrlSearchParams()).reduce(((e,[t,n])=>(qd.includes(t)&&(e[t]=n),e)),{}),t)}(n))}(t,r);l!==s+i.search&&(n&&Nd().setServiceSceneState(n),a.locationService.push(l))}function Kd(){const e=a.locationService.getLocation();return e.pathname.slice(e.pathname.lastIndexOf("/")+1,e.pathname.length)}const Xd=`${wd.id}.services.favorite`,Zd=`${wd.id}.datasource`;function Jd(e){return`${Xd}_${e}`}const ep=`${wd.id}.values.sort`;function tp(e,t,n){var r;const a=(null!==(r=localStorage.getItem(`${ep}.${e}.by`))&&void 0!==r?r:"").split(".");return a[0]&&a[1]?{sortBy:a[0],direction:a[1]}:{sortBy:t,direction:n}}function np(e,t,n){t&&n&&localStorage.setItem(`${ep}.${e}.by`,`${t}.${n}`)}const rp=`${wd.id}.logs.option`;function ap(e){return localStorage.getItem(`${rp}.${e}`)}const ip=(e,t,n)=>{(0,a.reportInteraction)(((e,t)=>`${wd.id.replace(/-/g,"_")}_${e}_${t}`)(e,t),n)},op="service_selection",sp="service_details",lp={[op]:{search_services_changed:"search_services_changed",service_selected:"service_selected"},[sp]:{open_in_explore_clicked:"open_in_explore_clicked",action_view_changed:"action_view_changed",add_to_filters_in_breakdown_clicked:"add_to_filters_in_breakdown_clicked",select_field_in_breakdown_clicked:"select_field_in_breakdown_clicked",layout_type_changed:"layout_type_changed",search_string_in_logs_changed:"search_string_in_logs_changed",pattern_removed:"pattern_removed",pattern_selected:"pattern_selected",pattern_field_clicked:"pattern_field_clicked",logs_visualization_toggle:"logs_visualization_toggle",logs_detail_filter_applied:"logs_detail_filter_applied",logs_popover_line_filter:"logs_popover_line_filter",value_breakdown_sort_change:"value_breakdown_sort_change",wasm_not_supported:"wasm_not_supported"}};function cp(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function up(e){return pt.getAncestor(e,cx)}function dp(e){const t=a.config.theme2.visualization;return t.getColorByName(t.palette[e%8])}function pp(e){return fp.apply(this,arguments)}function fp(){var e;return e=function*(e){return yield(0,a.getDataSourceSrv)().get(Pd,{__sceneObject:{value:e}})},fp=function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){cp(i,r,a,o,s,"next",e)}function s(e){cp(i,r,a,o,s,"throw",e)}o(void 0)}))},fp.apply(this,arguments)}function hp(e,t){const n=pt.lookupVariable(e,t);return n?n instanceof sr?n:(console.warn(`Could not get AdHocFiltersVariable ${e}. Variable is not an instance of AdHocFiltersVariable`),null):(console.warn(`Could not get AdHocFiltersVariable ${e}. Variable not found.`),null)}var gp=Object.defineProperty,mp=Object.getOwnPropertySymbols,bp=Object.prototype.hasOwnProperty,vp=Object.prototype.propertyIsEnumerable,yp=(e,t,n)=>t in e?gp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wp=(e=>(e[e.dontHide=0]="dontHide",e[e.hideLabel=1]="hideLabel",e[e.hideVariable=2]="hideVariable",e))(wp||{});((e,t)=>{for(var n in t||(t={}))bp.call(t,n)&&yp(e,n,t[n]);if(mp)for(var n of mp(t))vp.call(t,n)&&yp(e,n,t[n])})({},{includeAll:!1,multi:!1,options:[],skipUrlSync:!1});const Sp="data-testid search-services",xp="data-testid search-logs",Op="data-testid open-explore",_p="data-testid tab-patterns",Cp="data-testid tab-logs",Ep="data-testid tab-fields",Pp="data-testid tab-labels",Dp="data-testid button-remove-pattern",kp="data-testid button-filter-include",Tp="data-testid button-filter-exclude",Rp="data-testid table-wrapper",jp="data-testid button-included-pattern",Ip="data-testid button-excluded-pattern",Ap="data-testid table-wrapper",Lp="data-testid inspect",Np=e=>{const{isExcluded:t,isIncluded:r,onInclude:a,onExclude:i,onClear:o}=e,s=(0,Yt.useStyles2)(Fp,r,t);return n().createElement("div",{className:s.container},n().createElement(Yt.Button,{variant:r?"primary":"secondary",fill:"outline",size:"sm",className:s.includeButton,onClick:r?o:a,"data-testid":kp},"Include"),n().createElement(Yt.Button,{variant:t?"primary":"secondary",fill:"outline",size:"sm",className:s.excludeButton,onClick:t?o:i,"data-testid":Tp},"Exclude"))},Fp=(e,t,n)=>({container:(0,Zt.css)({display:"flex",justifyContent:"center"}),includeButton:(0,Zt.css)({borderRadius:0,borderRight:t?void 0:"none"}),excludeButton:(0,Zt.css)({borderRadius:`0 ${e.shape.radius.default} ${e.shape.radius.default} 0`,borderLeft:n?void 0:"none"})});var Mp;function Bp(e,t){return 1===e.cardinality?1:1===t.cardinality?-1:e.cardinality-t.cardinality}function Vp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zp(e,t,n,r,a){a||(a=function(e,t){var n;return(null===(n=pt.getAncestor(t,US).state.labels)||void 0===n?void 0:n.find((t=>t===e)))?Sd:xd}(e,r));const i=hp(Wp(e,a),r);if(!i)return;let o=i.state.filters.filter((n=>!(n.key===e&&n.value===t)));const s=o.length!==i.state.filters.length;("include"===n||"exclude"===n||!s&&"toggle"===n)&&(o=[...o,{key:e,operator:"exclude"===n?Mp.NotEqual:Mp.Equal,value:t}]),i.setState({filters:o,hide:wp.hideLabel})}function Wp(e,t){return e===Id?xd:t}!function(e){e.Equal="=",e.NotEqual="!="}(Mp||(Mp={}));class Hp extends H{constructor(...e){super(...e),Vp(this,"onClick",(e=>{const t=$p(this.state.frame);if(!t)return;zp(t.name,t.value,e,this,this.state.variableName);const n=hp(Wp(t.name,this.state.variableName),this);ip(sp,lp.service_details.add_to_filters_in_breakdown_clicked,{filterType:this.state.variableName,key:t.name,action:e,filtersLength:(null==n?void 0:n.state.filters.length)||0})})),Vp(this,"isSelected",(()=>{const e=$p(this.state.frame);if(!e)return{isIncluded:!1,isExcluded:!1};const t=hp(Wp(e.name,this.state.variableName),this);if(!t)return{isIncluded:!1,isExcluded:!1};const n=t.state.filters.find((t=>t.key===e.name&&t.value===e.value));return n?{isIncluded:n.operator===Mp.Equal,isExcluded:n.operator===Mp.NotEqual}:{isIncluded:!1,isExcluded:!1}}))}}Vp(Hp,"Component",(({model:e})=>{const{isIncluded:t,isExcluded:r}=e.isSelected();return n().createElement(Np,{isIncluded:t,isExcluded:r,onInclude:()=>e.onClick("include"),onClear:()=>e.onClick("clear"),onExclude:()=>e.onClick("exclude")})}));const $p=e=>{var t,n;const r=null!==(n=null===(t=e.fields[1])||void 0===t?void 0:t.labels)&&void 0!==n?n:{};if(1!==Object.keys(r).length)return;const a=Object.keys(r)[0];return{name:a,value:r[a]}},Up="logs";function Gp(e){e.matchFieldsWithName("info").overrideColor({mode:"fixed",fixedColor:"semi-dark-green"}),e.matchFieldsWithName("debug").overrideColor({mode:"fixed",fixedColor:"semi-dark-blue"}),e.matchFieldsWithName("error").overrideColor({mode:"fixed",fixedColor:"semi-dark-red"}),e.matchFieldsWithName("warn").overrideColor({mode:"fixed",fixedColor:"semi-dark-orange"}),e.matchFieldsWithName("logs").overrideColor({mode:"fixed",fixedColor:"darkgray"})}function qp(){return e=>e.pipe((0,m.map)((e=>e.map((e=>(e.fields[1].config.displayNameFromDS||(e.fields[1].config.displayNameFromDS=Up),e))).sort(((e,t)=>{const n=e.fields[1].config.displayNameFromDS,r=(null==n?void 0:n.includes("error"))?4:(null==n?void 0:n.includes("warn"))?3:(null==n?void 0:n.includes("info"))?2:1,a=t.fields[1].config.displayNameFromDS;return r-((null==a?void 0:a.includes("error"))?4:(null==a?void 0:a.includes("warn"))?3:(null==a?void 0:a.includes("info"))?2:1)})))))}function Qp(e){var t;return(null===(t=e.legendFormat)||void 0===t?void 0:t.toLowerCase().includes("level"))?new Wo({$data:new Cr({datasource:Rd,queries:[e]}),transformations:[qp]}):new Cr({datasource:Rd,queries:[e]})}function Yp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Yp(e,t,n[t])}))}return e}function Xp(e,t,n){return(r,a,i)=>{const o=yd().setOption("legend",{showLegend:!1}).setCustomFieldConfig("fillOpacity",9).setTitle(e(a)).setData(new de({data:(s=Kp({},r),l={series:[a]},l=null!=l?l:{},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(l)).forEach((function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(l,e))})),s)})).setColor({mode:"fixed",fixedColor:dp(i)}).setOverrides(Gp).setHeaderActions(new Hp({frame:a,variableName:n}));var s,l;return t===Yt.DrawStyle.Bars&&o.setCustomFieldConfig("stacking",{mode:Yt.StackingMode.Normal}).setCustomFieldConfig("fillOpacity",100).setCustomFieldConfig("lineWidth",0).setCustomFieldConfig("pointSize",0).setOverrides(Gp).setCustomFieldConfig("drawStyle",Yt.DrawStyle.Bars),new ou({body:o.build()})}}var Zp;function Jp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.Indexed="I",e.StructuredMetadata="S",e.Parsed="P"}(Zp||(Zp={}));const ef=(e,t)=>{return n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Jp(e,t,n[t])}))}return e}({},tf,t),r=null!=(r={expr:e})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})),n;var n,r},tf={refId:"A",queryType:"range",editorMode:"code",supportingQueryType:Bd};function nf(e){return"{"+e.map((e=>af(e))).join(", ")+"}"}function rf(e){return e.map((e=>`| ${af(e)}`)).join(" ")}function af(e){return`${e.key}${e.operator}\`${e.value}\``}var of=f(308);function sf(e){var t;const n=null===(t=e.fields[1])||void 0===t?void 0:t.labels;if(!n)return null;const r=Object.keys(n);return 0===r.length?null:n[r[0]]}function lf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class cf extends H{performRepeat(t){const n=[],r=((t,n,r)=>{if("alphabetical"===n)return((e,t)=>{const n=[...e];return n.sort(((e,t)=>{const n=sf(e),r=sf(t);return n&&r&&null!==(a=null==n?void 0:n.localeCompare(r))&&void 0!==a?a:0;var a})),"desc"===t&&n.reverse(),n})(t,r);const a=t=>{var r;if("changepoint"===n){if("object"==typeof WebAssembly)return(t=>{const n=t.fields.filter((t=>t.type===e.FieldType.number)),r=n[0].values.length;let a=Math.floor(r/100)||1;a>1&&(a=Math.ceil(a/2));const i=n[0].values.filter(((e,t)=>t%a==0)),o=new Float64Array(i);return of.R1.defaultArgpcp().detectChangepoints(o).indices.length})(t);console.warn("Changepoint not supported, using stdDev"),ip(sp,lp.service_details.wasm_not_supported),n=e.ReducerID.stdDev}const a=e.fieldReducers.get(n);var i,o;return null!==(o=(null!==(i=null===(r=a.reduce)||void 0===r?void 0:r.call(a,t.fields[1],!0,!0))&&void 0!==i?i:(0,e.doStandardCalcs)(t.fields[1],!0,!0))[n])&&void 0!==o?o:0},i=t.map((e=>({value:a(e),dataFrame:e})));return i.sort(((e,t)=>void 0!==e.value&&void 0!==t.value?t.value-e.value:0)),"asc"===r&&i.reverse(),i.map((({dataFrame:e})=>e))})(t.series,this.sortBy,this.direction);for(let e=0;e<r.length;e++){const a=this.state.getLayoutChild(t,r[e],e);n.push(a)}this.sortedSeries=r,this.state.body.setState({children:n}),this.unfilteredChildren=n}constructor(t){var{sortBy:n,direction:r}=t;super(function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,["sortBy","direction"])),lf(this,"unfilteredChildren",void 0),lf(this,"sortBy",void 0),lf(this,"direction",void 0),lf(this,"sortedSeries",[]),lf(this,"sort",((e,t)=>{const n=pt.getData(this);if(e===this.sortBy&&this.direction!==t)return this.direction=t,void this.state.body.setState({children:this.state.body.state.children.reverse()});this.sortBy=e,this.direction=t,n.state.data&&this.performRepeat(n.state.data)})),lf(this,"iterateFrames",(e=>{if(pt.getData(this).state.data)for(let t=0;t<this.sortedSeries.length;t++)e(this.sortedSeries,t)})),lf(this,"filterFrames",(e=>{const t=[];this.iterateFrames(((n,r)=>{e(n[r])&&t.push(this.unfilteredChildren[r])})),this.state.body.setState({children:t})})),this.sortBy=n,this.direction=r,this.unfilteredChildren=[],this.addActivationHandler((()=>{const t=pt.getData(this);this._subs.add(t.subscribeToState((t=>{var n;(null===(n=t.data)||void 0===n?void 0:n.state)===e.LoadingState.Done&&this.performRepeat(t.data)}))),t.state.data&&this.performRepeat(t.state.data)}))}}function uf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function df({options:e,value:r,onChange:a,label:i}){const o=(0,Yt.useStyles2)(ff),[s,l]=(0,t.useState)(!1);return n().createElement(Yt.InlineField,{label:i},n().createElement(Yt.Select,{options:e,value:r,onOpenMenu:()=>l(!0),onCloseMenu:()=>l(!1),onChange:e=>a(e.value),className:o.select,prefix:s?void 0:n().createElement(Yt.Icon,{name:"search"})}))}function pf({options:e,value:r,onChange:a,label:i,selectOption:o,isLoading:s}){var l;const c=(0,Yt.useStyles2)(ff),[u,d]=(0,t.useState)(!1),[p,f]=(0,t.useState)(),h=p&&r&&(null===(l=p.value)||void 0===l?void 0:l.includes(r))?[p,...e]:e,g=null==h?void 0:h.find((e=>e.value===r));return n().createElement(Yt.InlineField,{grow:!0,label:i},n().createElement(Yt.Select,{isLoading:s,"data-testid":Sp,placeholder:"Search services",options:h,isClearable:!0,value:r,onOpenMenu:()=>d(!0),onCloseMenu:()=>d(!1),allowCustomValue:!0,className:c.asyncSelect,prefix:u||(null==g?void 0:g.__isNew__)?void 0:n().createElement(Yt.Icon,{name:"search"}),onChange:(e,t)=>{return(null==e?void 0:e.__isNew__)?(f((n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){uf(e,t,n[t])}))}return e}({},e),r=null!=(r={icon:"filter"})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})),n)),a(e.value)):"clear"===t.action?a(""):void("select-option"===t.action&&e.value&&!e.__isNew__&&o(e.value));var n,r},onInputChange:(e,t)=>{const n=t;return"input-change"===n.action?a(e):"menu-close"===n.action&&n.prevInputValue?(f({value:n.prevInputValue,label:n.prevInputValue,icon:"filter",__isNew__:!0}),a(n.prevInputValue)):void 0}}))}function ff(e){return{select:(0,Zt.css)({maxWidth:e.spacing(64),minWidth:e.spacing(20)}),asyncSelect:(0,Zt.css)({maxWidth:e.spacing(54.5)})}}function hf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}lf(cf,"Component",(({model:e})=>{const{body:t}=e.useState();return n().createElement(t.Component,{model:t})}));class gf extends H{Selector({model:e}){const{active:t,options:r}=e.useState();return n().createElement(Yt.Field,null,n().createElement(Yt.RadioButtonGroup,{options:r,value:t,onChange:e.onLayoutChange}))}constructor(...e){super(...e),hf(this,"onLayoutChange",(e=>{ip(sp,lp.service_details.layout_type_changed,{layout:e,view:Kd()}),this.setState({active:e})}))}}function mf({blockingMessage:e,isLoading:t,children:r}){const a=(0,Yt.useStyles2)(bf);return t&&!e&&(e="Loading..."),t?n().createElement(Yt.LoadingPlaceholder,{className:a.statusMessage,text:e}):e?n().createElement("div",{className:a.statusMessage},e):n().createElement(n().Fragment,null,r)}function bf(e){return{statusMessage:(0,Zt.css)({fontStyle:"italic",marginTop:e.spacing(7),textAlign:"center"})}}function vf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}hf(gf,"Component",(({model:e})=>{const{layouts:t,options:r,active:a}=e.useState(),i=r.findIndex((e=>e.value===a));if(-1===i)return null;const o=t[i];return n().createElement(o.Component,{model:o})}));const yf=e=>{var{value:t,onChange:r,placeholder:a,onClear:i}=e,o=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["value","onChange","placeholder","onClear"]);return n().createElement(Yt.Input,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){vf(e,t,n[t])}))}return e}({value:t,onChange:r,suffix:t?n().createElement(Yt.Icon,{onClick:i,title:"Clear search",name:"times",className:wf.clearIcon}):void 0,prefix:n().createElement(Yt.Icon,{name:"search"}),placeholder:a},o))},wf={clearIcon:(0,Zt.css)({cursor:"pointer"})};function Sf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class xf extends e.BusEventBase{constructor(e,t,n){super(),Sf(this,"target",void 0),Sf(this,"sortBy",void 0),Sf(this,"direction",void 0),this.target=e,this.sortBy=t,this.direction=n}}Sf(xf,"type","sort-criteria-changed");class Of extends H{constructor(t){const{sortBy:n,direction:r}=tp(t.target,"changepoint","desc");super({target:t.target,sortBy:n,direction:r}),Sf(this,"sortingOptions",[{label:"",options:[{value:"changepoint",label:"Most relevant",description:"Smart ordering of graphs based on the most significant spikes in the data"},{value:e.ReducerID.stdDev,label:"Widest spread",description:"Sort graphs by deviation from the average value"},{value:"alphabetical",label:"Name",description:"Alphabetical order"},{value:e.ReducerID.max,label:"Highest spike",description:"Sort graphs by the highest values (max)"},{value:e.ReducerID.min,label:"Lowest dip",description:"Sort graphs by the smallest values (min)"}]},{label:"Percentiles",options:[...e.fieldReducers.selectOptions([],Cf).options]}]),Sf(this,"onCriteriaChange",(e=>{e.value&&(this.setState({sortBy:e.value}),np(this.state.target,e.value,this.state.direction),this.publishEvent(new xf(this.state.target,e.value,this.state.direction),!0))})),Sf(this,"onDirectionChange",(e=>{e.value&&(this.setState({direction:e.value}),np(this.state.target,this.state.sortBy,e.value),this.publishEvent(new xf(this.state.target,this.state.sortBy,e.value),!0))}))}}Sf(Of,"Component",(({model:e})=>{const{sortBy:t,direction:r}=e.useState(),a=e.sortingOptions.find((e=>e.options.find((e=>e.value===t)))),i=null==a?void 0:a.options.find((e=>e.value===t));return n().createElement(n().Fragment,null,n().createElement(Yt.InlineField,null,n().createElement(Yt.Select,{onChange:e.onDirectionChange,"aria-label":"Sort direction",placeholder:"",value:r,options:[{label:"Asc",value:"asc"},{label:"Desc",value:"desc"}]})),n().createElement(Yt.InlineField,{label:"Sort by",htmlFor:"sort-by-criteria",tooltip:"Calculate a derived quantity from the values in your time series and sort by this criteria. Defaults to standard deviation."},n().createElement(Yt.Select,{value:i,width:20,isSearchable:!0,options:e.sortingOptions,placeholder:"Choose criteria",onChange:e.onCriteriaChange,inputId:"sort-by-criteria"})))}));const _f=["p10","p25","p75","p90","p99"];function Cf(e){return e.id>="p1"&&e.id<="p99"&&_f.includes(e.id)}function Ef(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Pf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Df extends H{onActivate(){this.subscribeToEvent(xf,this.handleSortByChange);const e=this.getVariable();e.subscribeToState(((t,n)=>{t.options===n.options&&t.value===n.value&&t.loading===n.loading||this.updateBody(e)})),this.updateBody(e)}getVariable(){const e=pt.lookupVariable(Cd,this);if(!(e instanceof ns))throw new Error("Group by variable not found");return e}onReferencedVariableValueChanged(){const e=this.getVariable();e.changeValueTo(jd),this.updateBody(e)}updateBody(t){var r,a=this;return(r=function*(){const r=yield pp(a);if(!r)return;const i=pt.getTimeRange(a).state.value,o=pt.lookupVariable(Sd,a);let s;try{const e=yield r.getResource("detected_labels",{query:o.state.filterExpression,start:i.from.utc().toISOString(),end:i.to.utc().toISOString()},{headers:{"X-Query-Tags":`Source=${Bd}`}});s=null==e?void 0:e.detectedLabels}catch(e){console.error(e),a.setState({loading:!1,error:!0})}if(!s||!Array.isArray(s))return void a.setState({loading:!1,error:!0});const l=function(e){const t=[...e];e.includes(Id)||t.unshift(Id);const n=t.map((e=>({label:e,value:String(e)})));return[{label:"All",value:jd},...n]}(s.sort(((e,t)=>Bp(e,t))).map((e=>e.label))),c={loading:!1,value:String(t.state.value),labels:l,blockingMessage:void 0,error:!1};c.body=t.hasAllValue()?function(e){const t=[];for(const n of e){const{value:e}=n;e!==jd&&e&&t.push(new ou({body:yd().setTitle(e).setData(Qp(ef(Tf(e),{legendFormat:`{{${e}}}`}))).setHeaderActions(new jf({labelName:String(e)})).setCustomFieldConfig("stacking",{mode:Yt.StackingMode.Normal}).setCustomFieldConfig("fillOpacity",100).setCustomFieldConfig("lineWidth",0).setCustomFieldConfig("pointSize",0).setCustomFieldConfig("drawStyle",Yt.DrawStyle.Bars).setOverrides(Gp).build()}))}return new gf({options:[{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],active:"grid",layouts:[new iu({isLazy:!0,templateColumns:Rf,autoRows:"200px",children:t}),new iu({isLazy:!0,templateColumns:"1fr",autoRows:"200px",children:t.map((e=>e.clone()))})]})}(l):function(t){const r=t.getValueText(),a=ef(Tf(r),{legendFormat:`{{${r}}}`});let i=yd();i=i.setCustomFieldConfig("stacking",{mode:Yt.StackingMode.Normal}).setCustomFieldConfig("fillOpacity",100).setCustomFieldConfig("lineWidth",0).setCustomFieldConfig("pointSize",0).setCustomFieldConfig("drawStyle",Yt.DrawStyle.Bars).setOverrides(Gp).setTitle(t.getValueText());const o=i.build(),{sortBy:s,direction:l}=tp("labels",e.ReducerID.stdDev,"desc");return new gf({$data:Qp(a),options:[{value:"single",label:"Single"},{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],active:"grid",layouts:[new Xc({direction:"column",children:[new Zc({minHeight:300,body:o})]}),new cf({body:new iu({templateColumns:Rf,autoRows:"200px",children:[new Zc({body:new Eu({reactNode:n().createElement(Yt.LoadingPlaceholder,{text:"Loading..."})})})]}),getLayoutChild:Xp(Bf,a.expr.includes("count_over_time")?Yt.DrawStyle.Bars:Yt.DrawStyle.Line,Sd),sortBy:s,direction:l}),new cf({body:new iu({templateColumns:"1fr",autoRows:"200px",children:[new Zc({body:new Eu({reactNode:n().createElement(Yt.LoadingPlaceholder,{text:"Loading..."})})})]}),getLayoutChild:Xp(Bf,a.expr.includes("count_over_time")?Yt.DrawStyle.Bars:Yt.DrawStyle.Line,Sd),sortBy:s,direction:l})]})}(t),c.search=new Mf,a.setState(c)},function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){Ef(i,n,a,o,s,"next",e)}function s(e){Ef(i,n,a,o,s,"throw",e)}o(void 0)}))})()}constructor(t){var n,r,a,i;super((a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pf(e,t,n[t])}))}return e}({},t),i=null!=(i={$variables:null!==(n=t.$variables)&&void 0!==n?n:new Qo({variables:[new ns({name:Cd,defaultToAll:!0,includeAll:!0})]}),labels:null!==(r=t.labels)&&void 0!==r?r:[],loading:!0,sort:new Of({target:"labels"}),search:new Mf})?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(i)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})),a)),Pf(this,"_variableDependency",new wt(this,{variableNames:[Sd],onReferencedVariableValueChanged:this.onReferencedVariableValueChanged.bind(this)})),Pf(this,"handleSortByChange",(e=>{"labels"===e.target&&(this.state.body instanceof gf&&this.state.body.state.layouts.forEach((t=>{t instanceof cf&&t.sort(e.sortBy,e.direction)})),ip(sp,lp.service_details.value_breakdown_sort_change,{target:"labels",criteria:e.sortBy,direction:e.direction}))})),Pf(this,"onChange",(t=>{if(!t)return;const n=this.getVariable();n.changeValueTo(t);const{sortBy:r,direction:a}=tp("labels",e.ReducerID.stdDev,"desc");ip(sp,lp.service_details.select_field_in_breakdown_clicked,{label:t,previousLabel:n.getValueText(),view:"labels",sortBy:r,sortByDirection:a})})),this.addActivationHandler(this.onActivate.bind(this))}}function kf(e){return{container:(0,Zt.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column"}),content:(0,Zt.css)({flexGrow:1,display:"flex",paddingTop:e.spacing(0)}),controls:(0,Zt.css)({flexGrow:0,display:"flex",alignItems:"top",justifyContent:"space-between",flexDirection:"row-reverse",gap:e.spacing(2)})}}function Tf(e){return`sum(count_over_time(${Td} | drop __error__ | ${e}!="" [$__auto])) by (${e})`}Pf(Df,"Component",(({model:e})=>{const{labels:t,body:r,loading:a,value:i,blockingMessage:o,error:s,search:l,sort:c}=e.useState(),u=(0,Yt.useStyles2)(kf);return n().createElement("div",{className:u.container},n().createElement(mf,{isLoading:a,blockingMessage:o},n().createElement("div",{className:u.controls},r instanceof gf&&n().createElement(r.Selector,{model:r}),!a&&i!==jd&&n().createElement(n().Fragment,null,n().createElement(c.Component,{model:c}),n().createElement(l.Component,{model:l})),!a&&t.length>0&&n().createElement(df,{label:"Label",options:t,value:i,onChange:e.onChange})),s&&n().createElement(Yt.Alert,{title:"",severity:"warning"},"The labels are not available at this moment. Try using a different time range or check again later."),n().createElement("div",{className:u.content},r&&n().createElement(r.Component,{model:r}))))}));const Rf="repeat(auto-fit, minmax(400px, 1fr))";class jf extends H{constructor(...e){super(...e),Pf(this,"onClick",(()=>{If(this).onChange(this.state.labelName)}))}}function If(e){if(e instanceof Df)return e;if(e.parent)return If(e.parent);throw new Error("Unable to find breakdown scene")}Pf(jf,"Component",(({model:e})=>n().createElement(Yt.Button,{variant:"secondary",size:"sm",onClick:e.onClick,"aria-label":`Select ${e.useState().labelName}`},"Select")));const Af=new ln({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1});function Lf(e,t,n){const[r,a,i]=Af.search(e,t,0,1e5);let o=[],s=new Set;if(r&&i){const t=(e,t)=>{t&&s.add(e)};for(let n=0;n<i.length;n++){let r=i[n];ln.highlight(e[a.idx[r]],a.ranges[r],t),o.push(e[a.idx[r]])}n([o,[...s]])}else t||n([])}const Nf=(0,ee.debounce)(Lf,300);function Ff(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Mf extends H{filterValues(e){if(this.parent instanceof Df||this.parent instanceof ph){const t=this.parent.state.body;null==t||t.forEachChild((t=>{if(t instanceof cf&&t.state.body.isActive){let n=[];t.iterateFrames(((e,t)=>{const r=Bf(e[t]);n.push(r)})),Lf(n,e,(e=>{e&&e[0]?t.filterFrames((t=>{const n=Bf(t);return e[0].includes(n)})):t.filterFrames((()=>!0))}))}}))}}constructor(){super({filter:""}),Ff(this,"onValueFilterChange",(e=>{this.setState({filter:e.target.value}),this.filterValues(e.target.value)})),Ff(this,"clearValueFilter",(()=>{this.setState({filter:""}),this.filterValues("")}))}}function Bf(e){var t;return null!==(t=sf(e))&&void 0!==t?t:"No labels"}Ff(Mf,"Component",(({model:e})=>{const{filter:t}=e.useState();return n().createElement(yf,{value:t,onChange:e.onValueFilterChange,onClear:e.clearValueFilter,placeholder:"Search for value"})}));var Vf=function(e){return e.split(/ ?; ?/).reduce((function(e,t){var n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}(t.split(/ ?: ?/),2),r=n[0],a=n[1];return r&&a&&(e[r.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}))]=Number.isNaN(Number(a))?a:Number(a)),e}),{})},zf=["br","col","colgroup","dl","hr","iframe","img","input","link","menuitem","meta","ol","param","select","table","tbody","tfoot","thead","tr","ul","wbr"],Wf={"accept-charset":"acceptCharset",acceptcharset:"acceptCharset",accesskey:"accessKey",allowfullscreen:"allowFullScreen",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",class:"className",classid:"classID",classname:"className",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",controlslist:"controlsList",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",datetime:"dateTime",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",enctype:"encType",for:"htmlFor",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",innerhtml:"innerHTML",inputmode:"inputMode",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",marginwidth:"marginWidth",marginheight:"marginHeight",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",nomodule:"noModule",novalidate:"noValidate",playsinline:"playsInline",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",typemustmatch:"typeMustMatch",usemap:"useMap",accentheight:"accentHeight","accent-height":"accentHeight",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",arabicform:"arabicForm","arabic-form":"arabicForm",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",diffuseconstant:"diffuseConstant",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",edgemode:"edgeMode",enablebackground:"enableBackground","enable-background":"enableBackground",externalresourcesrequired:"externalResourcesRequired",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",imagerendering:"imageRendering","image-rendering":"imageRendering",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",vmathematical:"vMathematical","v-mathematical":"vMathematical",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan",onblur:"onBlur",onchange:"onChange",onclick:"onClick",oncontextmenu:"onContextMenu",ondoubleclick:"onDoubleClick",ondrag:"onDrag",ondragend:"onDragEnd",ondragenter:"onDragEnter",ondragexit:"onDragExit",ondragleave:"onDragLeave",ondragover:"onDragOver",ondragstart:"onDragStart",ondrop:"onDrop",onerror:"onError",onfocus:"onFocus",oninput:"onInput",oninvalid:"onInvalid",onkeydown:"onKeyDown",onkeypress:"onKeyPress",onkeyup:"onKeyUp",onload:"onLoad",onmousedown:"onMouseDown",onmouseenter:"onMouseEnter",onmouseleave:"onMouseLeave",onmousemove:"onMouseMove",onmouseout:"onMouseOut",onmouseover:"onMouseOver",onmouseup:"onMouseUp",onscroll:"onScroll",onsubmit:"onSubmit",ontouchcancel:"onTouchCancel",ontouchend:"onTouchEnd",ontouchmove:"onTouchMove",ontouchstart:"onTouchStart",onwheel:"onWheel"},Hf=function(){return Hf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Hf.apply(this,arguments)},$f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},Uf=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};function Gf(e,n){var r;if(void 0===n&&(n={}),!(e&&e instanceof Node))return null;var a,i=n.actions,o=void 0===i?[]:i,s=n.index,l=void 0===s?0:s,c=n.level,u=void 0===c?0:c,d=n.randomKey,p=e,f="".concat(u,"-").concat(l),h=[];if(d&&0===u&&(f="".concat(function(e){void 0===e&&(e=6);for(var t="",n=e;n>0;--n)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())];return t}(),"-").concat(f)),Array.isArray(o)&&o.forEach((function(t){t.condition(p,f,u)&&("function"==typeof t.pre&&((p=t.pre(p,f,u))instanceof Node||(p=e)),"function"==typeof t.post&&h.push(t.post(p,f,u)))})),h.length)return h;switch(p.nodeType){case 1:return t.createElement((a=p.nodeName,/[a-z]+[A-Z]+[a-z]+/.test(a)?a:a.toLowerCase()),function(e,t){var n={key:t};if(e instanceof Element){var r=e.getAttribute("class");r&&(n.className=r),Uf([],$f(e.attributes),!1).forEach((function(e){switch(e.name){case"class":break;case"style":n[e.name]=Vf(e.value);break;case"allowfullscreen":case"allowpaymentrequest":case"async":case"autofocus":case"autoplay":case"checked":case"controls":case"default":case"defer":case"disabled":case"formnovalidate":case"hidden":case"ismap":case"itemscope":case"loop":case"multiple":case"muted":case"nomodule":case"novalidate":case"open":case"readonly":case"required":case"reversed":case"selected":case"typemustmatch":n[Wf[e.name]||e.name]=!0;break;default:n[Wf[e.name]||e.name]=e.value}}))}return n}(p,f),function(e,t,n){var r=Uf([],$f(e),!1).map((function(e,r){return Gf(e,Hf(Hf({},n),{index:r,level:t+1}))})).filter(Boolean);return r.length?r:null}(p.childNodes,u,n));case 3:var g=(null===(r=p.nodeValue)||void 0===r?void 0:r.toString())||"";if(/^\s+$/.test(g)&&!/[\u00A0\u202F]/.test(g))return null;if(!p.parentNode)return g;var m=p.parentNode.nodeName.toLowerCase();return zf.includes(m)?(/\S/.test(g)&&console.warn("A textNode is not allowed inside '".concat(m,"'. Your text \"").concat(g,'" will be ignored')),null):g;default:return null}}function qf(e,t){return void 0===t&&(t={}),"string"==typeof e?function(e,t){if(void 0===t&&(t={}),!e||"string"!=typeof e)return null;var n=t.nodeOnly,r=void 0!==n&&n,a=t.selector,i=void 0===a?"body > *":a,o=t.type,s=void 0===o?"text/html":o;try{var l=(new DOMParser).parseFromString(e,s).querySelector(i);if(!(l instanceof Node))throw new TypeError("Error parsing input");return r?l:Gf(l,t)}catch(e){}return null}(e,t):e instanceof Node?Gf(e,t):null}var Qf=f(567),Yf={FAILED:"failed",LOADED:"loaded",LOADING:"loading",PENDING:"pending",READY:"ready",UNSUPPORTED:"unsupported"};function Kf(){return Qf.canUseDOM}var Xf=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zf=function(){return Zf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Zf.apply(this,arguments)},Jf=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},eh=Object.create(null),th=function(e){function n(t){var n=e.call(this,t)||this;return Object.defineProperty(n,"isInitialized",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"isActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"hash",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"handleLoad",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!1),n.isActive&&n.setState({content:e,hasCache:t,status:Yf.LOADED},n.getElement)}}),Object.defineProperty(n,"handleError",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=n.props.onError,r="Browser does not support SVG"===e.message?Yf.UNSUPPORTED:Yf.FAILED;n.isActive&&n.setState({status:r},(function(){"function"==typeof t&&t(e)}))}}),Object.defineProperty(n,"request",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e=n.props,t=e.cacheRequests,r=e.fetchOptions,a=e.src;try{return t&&(eh[a]={content:"",status:Yf.LOADING}),fetch(a,r).then((function(e){var t=e.headers.get("content-type"),n=Jf((t||"").split(/ ?; ?/),1)[0];if(e.status>299)throw new Error("Not found");if(!["image/svg+xml","text/plain"].some((function(e){return n.includes(e)})))throw new Error("Content type isn't valid: ".concat(n));return e.text()})).then((function(e){var r=n.props.src;if(a===r){if(n.handleLoad(e),t){var i=eh[a];i&&(i.content=e,i.status=Yf.LOADED)}}else eh[a].status===Yf.LOADING&&delete eh[a]})).catch((function(e){n.handleError(e),t&&eh[a]&&delete eh[a]}))}catch(e){return n.handleError(new Error(e.message))}}}),n.state={content:"",element:null,hasCache:!!t.cacheRequests&&!!eh[t.src],status:Yf.PENDING},n.hash=t.uniqueHash||function(e){for(var t,n="abcdefghijklmnopqrstuvwxyz",r="".concat(n).concat(n.toUpperCase()).concat("1234567890"),a="",i=0;i<8;i++)a+=(t=r)[Math.floor(Math.random()*t.length)];return a}(),n}return Xf(n,e),Object.defineProperty(n.prototype,"componentDidMount",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isActive=!0,Kf()&&!this.isInitialized){var e=this.state.status,t=this.props.src;try{if(e===Yf.PENDING){if(!function(){if(!document)return!1;var e=document.createElement("div");e.innerHTML="<svg />";var t=e.firstChild;return!!t&&"http://www.w3.org/2000/svg"===t.namespaceURI}()||"undefined"==typeof window||null===window)throw new Error("Browser does not support SVG");if(!t)throw new Error("Missing src");this.load()}}catch(e){this.handleError(e)}this.isInitialized=!0}}}),Object.defineProperty(n.prototype,"componentDidUpdate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(Kf()){var n=this.state,r=n.hasCache,a=n.status,i=this.props,o=i.onLoad,s=i.src;if(t.status!==Yf.READY&&a===Yf.READY&&o&&o(s,r),e.src!==s){if(!s)return void this.handleError(new Error("Missing src"));this.load()}}}}),Object.defineProperty(n.prototype,"componentWillUnmount",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isActive=!1}}),Object.defineProperty(n.prototype,"getNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props,t=e.description,n=e.title;try{var r=qf(this.processSVG(),{nodeOnly:!0});if(!(r&&r instanceof SVGSVGElement))throw new Error("Could not convert the src to a DOM Node");var a=this.updateSVGAttributes(r);if(t){var i=a.querySelector("desc");i&&i.parentNode&&i.parentNode.removeChild(i);var o=document.createElementNS("http://www.w3.org/2000/svg","desc");o.innerHTML=t,a.prepend(o)}if(void 0!==n){var s=a.querySelector("title");if(s&&s.parentNode&&s.parentNode.removeChild(s),n){var l=document.createElementNS("http://www.w3.org/2000/svg","title");l.innerHTML=n,a.prepend(l)}}return a}catch(e){return this.handleError(e)}}}),Object.defineProperty(n.prototype,"getElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){try{var e=qf(this.getNode());if(!e||!t.isValidElement(e))throw new Error("Could not convert the src to a React element");this.setState({element:e,status:Yf.READY})}catch(e){this.handleError(new Error(e.message))}}}),Object.defineProperty(n.prototype,"load",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.isActive&&this.setState({content:"",element:null,hasCache:!1,status:Yf.LOADING},(function(){var t=e.props,n=t.cacheRequests,r=t.src,a=n&&eh[r];if(a&&a.status===Yf.LOADED)e.handleLoad(a.content,!0);else{var i,o=r.match(/data:image\/svg[^,]*?(;base64)?,(.*)/);o?i=o[1]?window.atob(o[2]):decodeURIComponent(o[2]):r.includes("<svg")&&(i=r),i?e.handleLoad(i):e.request()}}))}}),Object.defineProperty(n.prototype,"updateSVGAttributes",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=this.props,r=n.baseURL,a=void 0===r?"":r,i=n.uniquifyIDs,o=["id","href","xlink:href","xlink:role","xlink:arcrole"],s=["href","xlink:href"];return i?(function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}([],Jf(e.children),!1).map((function(e){if(e.attributes&&e.attributes.length){var n=Object.values(e.attributes).map((function(e){var n=e,r=e.value.match(/url\((.*?)\)/);return r&&r[1]&&(n.value=e.value.replace(r[0],"url(".concat(a).concat(r[1],"__").concat(t.hash,")"))),n}));o.forEach((function(e){var r,a,i=n.find((function(t){return t.name===e}));i&&(r=e,a=i.value,!s.includes(r)||!a||a.includes("#"))&&(i.value="".concat(i.value,"__").concat(t.hash))}))}return e.children.length?t.updateSVGAttributes(e):e})),e):e}}),Object.defineProperty(n.prototype,"processSVG",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.state.content,t=this.props.preProcessor;return t?t(e):e}}),Object.defineProperty(n.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.state,n=e.element,r=e.status,a=this.props,i=a.children,o=void 0===i?null:i,s=a.innerRef,l=a.loader,c=void 0===l?null:l,u=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={};for(var a in e)({}).hasOwnProperty.call(e,a)&&(t.includes(a)||(r[a]=e[a]));return r}(this.props,"baseURL","cacheRequests","children","description","fetchOptions","innerRef","loader","onError","onLoad","preProcessor","src","title","uniqueHash","uniquifyIDs");return Kf()?n?t.cloneElement(n,Zf({ref:s},u)):[Yf.UNSUPPORTED,Yf.FAILED].includes(r)?o:c:c}}),Object.defineProperty(n,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{cacheRequests:!0,uniquifyIDs:!1}}),n}(t.PureComponent);const nh=th,rh=e=>({graphicContainer:(0,Zt.css)({display:"flex",justifyContent:"center",margin:"0 auto"}),graphic:(0,Zt.css)({width:"200px",height:"120px",padding:e.spacing(1)}),text:(0,Zt.css)({display:"flex",justifyContent:"center",alignItems:"center"}),wrap:(0,Zt.css)({margin:"0 auto"})}),ah=({children:e})=>{const t=(0,Yt.useStyles2)(rh),r=(0,Yt.useTheme2)();return n().createElement("div",{className:t.wrap},n().createElement("div",{className:t.graphicContainer},n().createElement(nh,{className:t.graphic,src:r.isDark?"/public/plugins/grafana-lokiexplore-app/img/grot_err.svg":"/public/plugins/grafana-lokiexplore-app/img/grot_err_light.svg"})),n().createElement("div",{className:t.text},n().createElement(Yt.Text,{textAlignment:"center",color:"primary",element:"span"},e||"An error occurred")))};function ih(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const oh=n().forwardRef(((e,r)=>{var{children:a,onLoad:i,onChange:o,isHidden:s}=e,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["children","onLoad","onChange","isHidden"]);const c=function(){var e;const n=(0,t.useRef)(void 0);var r;return null!==(r=(e=n).current)&&void 0!==r||(e.current=(0,ee.uniqueId)()),n.current}(),[u,d]=(0,t.useState)(!1),[p,f]=(0,t.useState)(!1),h=(0,t.useRef)(null);return(0,t.useImperativeHandle)(r,(()=>h.current)),xl((()=>{oh.addCallback(c,(e=>{!u&&e.isIntersecting&&(d(!0),null==i||i()),f(e.isIntersecting),null==o||o(e.isIntersecting)}));const e=h.current;return e&&oh.observer.observe(e),()=>{delete oh.callbacks[c],e&&oh.observer.unobserve(e),0===Object.keys(oh.callbacks).length&&oh.observer.disconnect()}})),s?null:n().createElement("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ih(e,t,n[t])}))}return e}({id:c,ref:h},l),u&&("function"==typeof a?a({isInView:p}):a))}));oh.displayName="LazyLoader",oh.callbacks={},oh.addCallback=(e,t)=>oh.callbacks[e]=t,oh.observer=new IntersectionObserver((e=>{for(const t of e)oh.callbacks[t.target.id](t)}),{rootMargin:"100px"});class sh extends H{}var lh,ch,uh;function dh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}uh=({model:e,parentState:r})=>{const{body:a,isHidden:i}=e.useState(),o=(s=e.state,(0,t.useMemo)((()=>{const e={};return e.gridColumn=s.gridColumn||"unset",e.gridRow=s.gridRow||"unset",e.position="relative",e.display="grid",(0,Zt.css)(e)}),[s]));var s;return!a||i?null:n().createElement(oh,{isHidden:i,key:e.state.key,className:o},n().createElement(ou.Component,{key:e.state.key,model:e,parentState:e.state}))},(ch="Component")in(lh=sh)?Object.defineProperty(lh,ch,{value:uh,enumerable:!0,configurable:!0,writable:!0}):lh[ch]=uh;class ph extends H{onActivate(){const e=this.getVariable();this.subscribeToEvent(xf,this.handleSortByChange),pt.getAncestor(this,US).subscribeToState(((e,t)=>{e.fields!==t.fields&&this.updateFields()})),e.subscribeToState(((e,t)=>{e.options===t.options&&e.value===t.value&&e.loading===t.loading||this.updateBody()})),this.updateFields()}updateFields(){const e=pt.getAncestor(this,US);var t;this.setState({fields:[{label:"All",value:jd},...(null!==(t=e.state.fields)&&void 0!==t?t:[]).map((e=>({label:e,value:e})))],loading:e.state.loading}),this.updateBody()}getVariable(){const e=pt.lookupVariable(_d,this);if(!(e instanceof ns))throw new Error("Group by variable not found");return e}onReferencedVariableValueChanged(){this.getVariable().changeValueTo(jd),this.updateBody()}hideField(e){var t,n;const r=this.state.fields.filter((t=>t.value!==e));this.setState({fields:r}),null===(t=(n=this.state).changeFields)||void 0===t||t.call(n,r.filter((e=>e.value!==jd)).map((e=>e.value)))}updateBody(){const t=this.getVariable(),r={value:String(t.state.value),blockingMessage:void 0};if(!1===this.state.loading&&this.state.fields.length<=1){const e=pt.getAncestor(this,cx),t=pt.getVariables(e);let n=[];for(const e of t.state.variables)e instanceof sr&&e.state.filters.length&&n.push(e),e instanceof ns&&e.state.value&&"logsFormat"!==e.state.name&&n.push(e);n.length>1?r.body=this.buildClearFiltersLayout((()=>this.clearVariables(n))):r.body=this.buildEmptyLayout()}else r.body=t.hasAllValue()?this.buildFieldsLayout(this.state.fields):function(t){const r=t.getValueText(),a=ef(bh(r),{legendFormat:`{{${r}}}`}),{sortBy:i,direction:o}=tp("fields",e.ReducerID.stdDev,"desc");return new gf({$data:Qp(a),options:[{value:"single",label:"Single"},{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],active:"grid",layouts:[new Xc({direction:"column",children:[new Zc({minHeight:300,body:yd().setTitle(t.getValueText()).build()})]}),new cf({body:new iu({templateColumns:vh,autoRows:"200px",children:[new Zc({body:new Eu({reactNode:n().createElement(Yt.LoadingPlaceholder,{text:"Loading..."})})})],isLazy:!0}),getLayoutChild:Xp(Bf,a.expr.includes("count_over_time")?Yt.DrawStyle.Bars:Yt.DrawStyle.Line,xd),sortBy:i,direction:o}),new cf({body:new iu({templateColumns:"1fr",autoRows:"200px",children:[new Zc({body:new Eu({reactNode:n().createElement(Yt.LoadingPlaceholder,{text:"Loading..."})})})],isLazy:!0}),getLayoutChild:Xp(Bf,a.expr.includes("count_over_time")?Yt.DrawStyle.Bars:Yt.DrawStyle.Line,xd),sortBy:i,direction:o})]})}(t);this.setState(r)}buildEmptyLayout(){return new Xc({direction:"column",children:[new Zc({body:new Eu({reactNode:n().createElement(ah,null,n().createElement(Yt.Alert,{title:"",severity:"warning"},"We did not find any fields for the given timerange. Please"," ",n().createElement("a",{className:fh.link,href:"https://forms.gle/1sYWCTPvD72T1dPH9",target:"_blank",rel:"noopener noreferrer"},"let us know")," ","if you think this is a mistake."))})})]})}buildClearFiltersLayout(e){return new Eu({reactNode:n().createElement(ah,null,n().createElement(Yt.Alert,{title:"",severity:"info"},"No labels match these filters."," ",n().createElement(Yt.Button,{className:fh.button,onClick:()=>e()},"Clear filters")," "))})}buildFieldsLayout(e){const t=[];for(const n of e){const{value:e}=n;if(e===jd||!e)continue;const r=Qp(ef(bh(e),{legendFormat:`{{${e}}}`,refId:e}));let a=yd().setTitle(e).setData(r);mh(e)||(a=a.setHeaderActions(new yh({labelName:String(e)})).setCustomFieldConfig("stacking",{mode:Yt.StackingMode.Normal}).setCustomFieldConfig("fillOpacity",100).setCustomFieldConfig("lineWidth",0).setCustomFieldConfig("pointSize",0).setCustomFieldConfig("drawStyle",Yt.DrawStyle.Bars).setOverrides(Gp));const i=new sh({body:a.build()});r.getResultsStream().subscribe((e=>{if(e.data.errors&&e.data.errors.length>0){const t=e.data.errors[0].refId;this.hideField(t),i.setState({isHidden:!0})}})),t.push(i)}return new gf({options:[{value:"grid",label:"Grid"},{value:"rows",label:"Rows"}],active:"grid",layouts:[new iu({templateColumns:vh,autoRows:"200px",children:t}),new iu({templateColumns:"1fr",autoRows:"200px",children:t.map((e=>e.clone()))})]})}constructor(t){var n,r,a,i;super((a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){dh(e,t,n[t])}))}return e}({$variables:null!==(n=t.$variables)&&void 0!==n?n:new Qo({variables:[new ns({name:_d,defaultToAll:!0,includeAll:!0})]}),loading:!0,sort:new Of({target:"fields"}),search:new Mf},t),i=null!=(i={fields:null!==(r=t.fields)&&void 0!==r?r:[]})?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(i)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})),a)),dh(this,"_variableDependency",new wt(this,{variableNames:[Sd],onReferencedVariableValueChanged:this.onReferencedVariableValueChanged.bind(this)})),dh(this,"handleSortByChange",(e=>{"fields"===e.target&&(this.state.body instanceof gf&&this.state.body.state.layouts.forEach((t=>{t instanceof cf&&t.sort(e.sortBy,e.direction)})),ip(sp,lp.service_details.value_breakdown_sort_change,{target:"fields",criteria:e.sortBy,direction:e.direction}))})),dh(this,"clearVariables",(e=>{pt.getAncestor(this,cx).setState({patterns:[]}),e.forEach((e=>{e instanceof sr&&"adhoc_service_filter"===e.state.key?e.setState({filters:e.state.filters.filter((e=>"service_name"===e.key))}):e instanceof sr?e.setState({filters:[]}):e instanceof ns&&e.setState({value:"",text:""})}))})),dh(this,"onFieldSelectorChange",(t=>{if(!t)return;const n=this.getVariable();n.changeValueTo(t);const{sortBy:r,direction:a}=tp("fields",e.ReducerID.stdDev,"desc");ip(sp,lp.service_details.select_field_in_breakdown_clicked,{field:t,previousField:n.getValueText(),view:"fields",sortBy:r,sortByDirection:a})})),this.addActivationHandler(this.onActivate.bind(this))}}dh(ph,"Component",(({model:e})=>{const{fields:t,body:r,loading:a,value:i,blockingMessage:o,search:s,sort:l}=e.useState(),c=(0,Yt.useStyles2)(hh);return n().createElement("div",{className:c.container},n().createElement(mf,{isLoading:a,blockingMessage:o},n().createElement("div",{className:c.controls},r instanceof gf&&n().createElement(r.Selector,{model:r}),!a&&i!==jd&&n().createElement(n().Fragment,null,n().createElement(l.Component,{model:l}),n().createElement(s.Component,{model:s})),!a&&t.length>1&&n().createElement(df,{label:"Field",options:t,value:i,onChange:e.onFieldSelectorChange})),n().createElement("div",{className:c.content},r&&n().createElement(r.Component,{model:r}))))}));const fh={link:(0,Zt.css)({textDecoration:"underline"}),button:(0,Zt.css)({marginLeft:"1.5rem"})};function hh(e){return{container:(0,Zt.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column"}),content:(0,Zt.css)({flexGrow:1,display:"flex",paddingTop:e.spacing(0)}),controls:(0,Zt.css)({flexGrow:0,display:"flex",alignItems:"top",justifyContent:"space-between",flexDirection:"row-reverse",gap:e.spacing(2)})}}const gh=["duration","count","total","bytes"];function mh(e){return gh.includes(e)}function bh(e){return mh(e)?`avg_over_time(${Td} | unwrap `+("duration"===e?"duration":"bytes"===e?"bytes":"")+`(${e}) [$__auto]) by ()`:`sum by (${e}) (count_over_time(${Td} | drop __error__ | ${e}!=""   [$__auto]))`}const vh="repeat(auto-fit, minmax(400px, 1fr))";class yh extends H{constructor(...e){super(...e),dh(this,"onClick",(()=>{wh(this).onFieldSelectorChange(this.state.labelName)}))}}function wh(e){if(e instanceof ph)return e;if(e.parent)return wh(e.parent);throw new Error("Unable to find breakdown scene")}function Sh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xh(e){var t,n;const{indexScene:r,pattern:a,type:i}=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Sh(e,t,n[t])}))}return e}({},e),o=pt.getAncestor(r,cx);if(!o)return void console.warn("logs exploration scene not found");const{patterns:s=[]}=o.state,l=s.filter((e=>e.pattern!==a));var c;const u=null!==(c=null===(t=l.filter((e=>"include"===e.type)))||void 0===t?void 0:t.length)&&void 0!==c?c:0;var d;const p=null!==(d=null===(n=l.filter((e=>"exclude"===e.type)))||void 0===n?void 0:n.length)&&void 0!==d?d:0;ip(sp,lp.service_details.pattern_selected,{type:i,includePatternsLength:u+("include"===i?1:0),excludePatternsLength:p+("exclude"===i?1:0)}),"undo"===i?o.setState({patterns:l}):o.setState({patterns:[...l,{pattern:a,type:i}]})}dh(yh,"Component",(({model:e})=>n().createElement(Yt.Button,{variant:"secondary",size:"sm",onClick:e.onClick,"aria-label":`Select ${e.useState().labelName}`},"Select")));const Oh=e=>({logsStatsRow:(0,Zt.css)({margin:`${e.spacing(1.15)}px 0`}),logsStatsRowActive:(0,Zt.css)({color:e.colors.primary.text,position:"relative"}),logsStatsRowLabel:(0,Zt.css)({display:"flex",marginBottom:"1px"}),logsStatsRowValue:(0,Zt.css)({flex:1,textOverflow:"ellipsis",overflow:"hidden"}),logsStatsRowCount:(0,Zt.css)({textAlign:"right",marginLeft:e.spacing(.75)}),logsStatsRowPercent:(0,Zt.css)({textAlign:"right",marginLeft:e.spacing(.75),width:e.spacing(4.5)}),logsStatsRowBar:(0,Zt.css)({height:e.spacing(.5),overflow:"hidden",background:e.colors.text.disabled}),logsStatsRowInnerBar:(0,Zt.css)({height:e.spacing(.5),overflow:"hidden",background:e.colors.primary.main})}),_h=({active:e,count:t,proportion:r,value:a})=>{const i=(0,Yt.useStyles2)(Oh),o=`${Math.round(100*r)}%`,s={width:o};return n().createElement("div",{className:e?`${i.logsStatsRow} ${i.logsStatsRowActive}`:i.logsStatsRow},n().createElement("div",{className:i.logsStatsRowLabel},n().createElement("div",{className:i.logsStatsRowValue,title:a},a),n().createElement("div",{className:i.logsStatsRowCount},t),n().createElement("div",{className:i.logsStatsRowPercent},o)),n().createElement("div",{className:i.logsStatsRowBar},n().createElement("div",{className:i.logsStatsRowInnerBar,style:s})))};function Ch(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Eh=e=>({logsStats:(0,Zt.css)({background:"inherit",color:e.colors.text.primary,wordBreak:"break-all",width:"fit-content",maxHeight:"40vh",overflowY:"auto",marginTop:e.spacing(1)}),logsStatsHeader:(0,Zt.css)({borderBottom:`1px solid ${e.colors.border.medium}`,display:"flex"}),logsStatsTitle:(0,Zt.css)({fontWeight:e.typography.fontWeightMedium,paddingRight:e.spacing(2),display:"inline-block",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1}),logsStatsClose:(0,Zt.css)({cursor:"pointer"}),logsStatsBody:(0,Zt.css)({padding:"5px 0px"})}),Ph=e=>{const t=(0,Yt.useStyles2)(Eh),{stats:r,value:a}=e,i=r.slice(0,10);let o=i.find((e=>e.value===a)),s=r.slice(10);!o&&(o=s.find((e=>e.value===a)),s=s.filter((e=>e.value!==a)));const l=s.reduce(((e,t)=>e+t.count),0),c=i.reduce(((e,t)=>e+t.count),0)+l;let u=[...i];return l>0&&u.push({value:"Other",count:l,proportion:l/c}),u.sort(((e,t)=>t.count-e.count)),n().createElement("div",{className:t.logsStats},n().createElement("div",{className:t.logsStatsHeader},n().createElement("div",{className:t.logsStatsTitle},"From a sample of ",c," rows found")),n().createElement("div",{className:t.logsStatsBody},u.map((e=>{return n().createElement(_h,(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ch(e,t,n[t])}))}return e}({key:e.value},e),r=null!=(r={active:e.value===a})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})),t));var t,r}))))};function Dh(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}const kh=({exploration:r,pattern:a})=>{const i=function(e){const t=[];let n=e.indexOf("<_>");for(;-1!==n;)t.push(n),n=e.indexOf("<_>",n+1);return t}(a),[o,s]=(0,t.useState)(void 0),[l,c]=(0,t.useState)(!1),u=(0,Yt.useStyles2)(Th),d=(0,t.useRef)(null),p=(0,t.useRef)(null),f=function(){var t,n=(t=function*(){ip(sp,lp.service_details.pattern_field_clicked);const t=function(e,t,n){let r=1;const a=e.replace(/<_>/g,(()=>`<field_${r++}>`));return`${n.state.filterExpression} |> \`${e}\` | pattern \`${a}\` | keep ${t.map(((e,t)=>`field_${t+1}`)).join(" ,")} | line_format ""`}(a,i,pt.lookupVariable(Sd,r)),n=yield pp(r),l=pt.getTimeRange(r).state.value;o&&t===d.current&&l===p.current||(d.current=t,p.current=l,null==n||n.query({requestId:"1",interval:"",intervalMs:0,scopedVars:{},range:l,targets:[ef(t,{maxLines:1e3})],timezone:"",app:"",startTime:0}).forEach((t=>{var n,r;t.state!==e.LoadingState.Done||(null===(n=t.errors)||void 0===n?void 0:n.length)?(t.state===e.LoadingState.Error||(null===(r=t.errors)||void 0===r?void 0:r.length))&&(s(void 0),c(!0)):(s(function(e,t){const n=new Map;e.data[0].fields[0].values.toArray().forEach((e=>{Object.keys(e).forEach((t=>{var r,a;n.has(t)||n.set(t,new Map),null===(a=n.get(t))||void 0===a||a.set(e[t],((null===(r=n.get(t))||void 0===r?void 0:r.get(e[t]))||0)+1)}))}));const r=[];for(let e=0;e<=t;e++){var a;const t=[];null===(a=n.get(`field_${e+1}`))||void 0===a||a.forEach(((e,n)=>{t.push({value:n,count:e,proportion:e/1e3})})),t.sort(((e,t)=>t.count-e.count)),r.push(t)}return r}(t,i.length)),c(!1))})))},function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(e){Dh(i,r,a,o,s,"next",e)}function s(e){Dh(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}(),h=(0,t.useMemo)((()=>a.split("<_>")),[a]);return n().createElement("div",null,h.map(((e,t)=>n().createElement("span",{key:t},e,t!==i.length&&n().createElement(Yt.Toggletip,{onOpen:f,content:n().createElement(n().Fragment,null,o&&o[t].length>0&&n().createElement(Ph,{stats:o[t],value:""}),o&&0===o[t].length&&n().createElement("div",null,"No available stats for this field in the current timestamp."),!o&&l&&n().createElement("div",null,"Could not load stats for this pattern."),!o&&!l&&n().createElement("div",{style:{padding:"10px"}},n().createElement(Yt.Spinner,{size:"xl"})))},n().createElement("span",{className:u.pattern},"<_>"))))))};function Th(e){return{pattern:(0,Zt.css)({cursor:"pointer",backgroundColor:e.colors.emphasize(e.colors.background.primary,.1),margin:"0 2px","&:hover":{backgroundColor:e.colors.emphasize(e.colors.background.primary,.2)}})}}function Rh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const jh=[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"];class Ih extends H{buildColumns(t,r,a){const i=Fh(a),o=pt.getTimeRange(this).state.value,s=[{id:"volume-samples",header:"",cell:t=>{const r={timeRange:o,series:[t.cell.row.original.dataFrame],state:e.LoadingState.Done},a=new de({data:r}),s=yd().setData(a).setHoverHeader(!0).setOption("tooltip",{mode:Yt.TooltipDisplayMode.None}).setCustomFieldConfig("hideFrom",{legend:!0,tooltip:!0}).setCustomFieldConfig("axisPlacement",Yt.AxisPlacement.Hidden).setDisplayMode("transparent").build();return n().createElement("div",{className:i.tableTimeSeriesWrap},n().createElement("div",{className:i.tableTimeSeries},n().createElement(s.Component,{model:s})))}},{id:"count",header:"Count",sortType:"number",cell:t=>{const r=(0,e.scaledUnits)(1e3,jh)(t.cell.row.original.sum);var a,o;return n().createElement("div",{className:i.countTextWrap},n().createElement("div",null,null!==(a=r.prefix)&&void 0!==a?a:"",r.text,null!==(o=r.suffix)&&void 0!==o?o:""))}},{id:"percent",header:"%",sortType:"number",cell:e=>n().createElement("div",{className:i.countTextWrap},n().createElement("div",null,(100*e.cell.row.original.sum/t).toFixed(0),"%"))},{id:"pattern",header:"Pattern",cell:e=>n().createElement("div",{className:(0,Zt.cx)(Lh(),i.tablePatternTextDefault)},n().createElement(kh,{exploration:up(this),pattern:e.cell.row.original.pattern}))},{id:"include",header:void 0,disableGrow:!0,cell:e=>{const t=null==r?void 0:r.find((t=>t.pattern===e.cell.row.original.pattern)),a="include"===(null==t?void 0:t.type),i="exclude"===(null==t?void 0:t.type);return n().createElement(Np,{isExcluded:i,isIncluded:a,onInclude:()=>e.cell.row.original.includeLink(),onExclude:()=>e.cell.row.original.excludeLink(),onClear:()=>e.cell.row.original.undoLink()})}}];return s}buildTableData(e,t){const n=pt.getAncestor(this,cx);return e.filter((e=>!t.size||t.has(e.pattern))).map((e=>({dataFrame:e.dataFrame,pattern:e.pattern,sum:e.sum,includeLink:()=>xh({pattern:e.pattern,type:"include",indexScene:n}),excludeLink:()=>xh({pattern:e.pattern,type:"exclude",indexScene:n}),undoLink:()=>xh({pattern:e.pattern,type:"undo",indexScene:n})})))}constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Rh(e,t,n[t])}))}return e}({},e))}}Rh(Ih,"Component",(function({model:e}){const t=pt.getAncestor(e,cx),{patterns:r}=t.useState(),a=(0,Yt.useTheme2)(),i=Nh(a),o=pt.getAncestor(e,Wh),{legendSyncPatterns:s}=o.useState(),{patternFrames:l}=e.useState(),c=null!=l?l:[],u=c.reduce(((e,t)=>e+t.sum),0),d=e.buildTableData(c,s),p=e.buildColumns(u,r,a);return n().createElement("div",{"data-testid":Rp,className:i.tableWrap},n().createElement(Yt.InteractiveTable,{columns:p,data:d,getRowId:e=>e.pattern}))}));const Ah=a.config.theme2,Lh=()=>(0,Zt.css)({minWidth:"200px",fontFamily:Ah.typography.fontFamilyMonospace,overflow:"hidden",overflowWrap:"break-word"}),Nh=e=>({tableWrap:(0,Zt.css)({"> div":{height:"calc(100vh - 450px)",minHeight:"470px"},th:{top:0,position:"sticky",backgroundColor:e.colors.background.canvas,zIndex:e.zIndex.navbarFixed}})}),Fh=e=>({tablePatternTextDefault:(0,Zt.css)({fontFamily:e.typography.fontFamilyMonospace,minWidth:"200px",maxWidth:"100%",overflow:"hidden",overflowWrap:"break-word",fontSize:e.typography.bodySmall.fontSize,wordBreak:"break-word"}),countTextWrap:(0,Zt.css)({textAlign:"right",fontSize:e.typography.bodySmall.fontSize}),tableTimeSeriesWrap:(0,Zt.css)({width:"230px",pointerEvents:"none"}),tableTimeSeries:(0,Zt.css)({height:"30px",overflow:"hidden"})});function Mh(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Bh(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Mh(i,r,a,o,s,"next",e)}function s(e){Mh(i,r,a,o,s,"throw",e)}o(void 0)}))}}function Vh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const zh=a.config.theme2.visualization.palette;class Wh extends H{onActivate(){this.updateBody(),this._subs.add(pt.getAncestor(this,US).subscribeToState(((e,t)=>{if(JSON.stringify(e.patterns)!==JSON.stringify(t.patterns)){const e=pt.getAncestor(this,Qh);this.updatePatterns(e.state.patternFrames),e.setState({filteredPatterns:void 0})}}))),this._subs.add(pt.getAncestor(this,Qh).subscribeToState(((e,t)=>{const n=pt.getAncestor(this,Qh);e.filteredPatterns&&JSON.stringify(e.filteredPatterns)!==JSON.stringify(t.filteredPatterns)?this.updatePatterns(n.state.filteredPatterns):n.state.patternFilter||this.updatePatterns(n.state.patternFrames)})))}updatePatterns(e=[]){var t=this;return Bh((function*(){var n;null===(n=t.state.body)||void 0===n||n.forEachChild((n=>{n instanceof za&&n.setState({$data:t.getTimeseriesDataNode(e)}),n instanceof Ih&&n.setState({patternFrames:e})}))}))()}updateBody(){var e=this;return Bh((function*(){const t=pt.getAncestor(e,Qh).state.patternFrames;pt.getAncestor(e,US).state.patterns&&t?e.setState({body:e.getSingleViewLayout(),legendSyncPatterns:new Set,loading:!1}):console.warn("Failed to update PatternsFrameScene body")}))()}extendTimeSeriesLegendBus(e,t){const n=t.onToggleSeriesVisibility;t.onToggleSeriesVisibility=(t,r)=>{var a;null==n||n(t,r);const i=null===(a=e.state.fieldConfig.overrides)||void 0===a?void 0:a[0],o=null==i?void 0:i.matcher.options.names,s=new Set;o&&o.forEach(s.add,s),this.setState({legendSyncPatterns:s})}}getSingleViewLayout(){const e=pt.getAncestor(this,Qh).state.patternFrames;if(!e)return void console.warn("Failed to set getSingleViewLayout");const t=this.getTimeSeries(e);return new iu({templateColumns:"100%",autoRows:"200px",children:[t,new Ih({patternFrames:e})]})}getTimeSeries(e){const t=pt.getAncestor(this,cx),n=yd().setData(this.getTimeseriesDataNode(e)).setOption("legend",{asTable:!0,showLegend:!0,displayMode:Yt.LegendDisplayMode.Table,placement:"right",width:200}).setHoverHeader(!0).setUnit("short").setLinks([{url:"#",targetBlank:!1,onClick:e=>{xh({pattern:e.origin.name,type:"include",indexScene:t})},title:"Include"},{url:"#",targetBlank:!1,onClick:e=>{xh({pattern:e.origin.name,type:"exclude",indexScene:t})},title:"Exclude"}]).build();return n.setState({extendPanelContext:(e,t)=>this.extendTimeSeriesLegendBus(e,t)}),n}getTimeseriesDataNode(t){const n=pt.getTimeRange(this).state.value;return new de({data:{series:t.map(((e,t)=>{const n=e.dataFrame;return n.fields[1].config.color=function(e){return{mode:"fixed",fixedColor:zh[e]}}(t),n})),state:e.LoadingState.Done,timeRange:n}})}constructor(e){var t,n;super((t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Vh(e,t,n[t])}))}return e}({loading:!0},e),n=null!=(n={legendSyncPatterns:new Set})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t)),this.addActivationHandler(this.onActivate.bind(this))}}Vh(Wh,"Component",(({model:e})=>{const{body:t,loading:r}=e.useState(),a=pt.getAncestor(e,US),{patterns:i}=a.useState();return n().createElement("div",{className:Hh.container},!r&&i&&i.length>0&&n().createElement(n().Fragment,null,t&&n().createElement(t.Component,{model:t})))}));const Hh={container:(0,Zt.css)({width:"100%",".show-on-hover":{display:"none"}})};function $h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Uh extends H{onActivate(){const e=pt.getAncestor(this,Qh);this._subs.add(e.subscribeToState(((e,t)=>{if(e.patternFilter!==t.patternFilter){const e=pt.getAncestor(this,Qh);e.state.patternFrames&&Nf(e.state.patternFrames.map((e=>e.pattern)),e.state.patternFilter,this.onSearchResult)}}))),this._subs.add(e.subscribeToState(((e,t)=>{e.patternFilter&&!e.filteredPatterns&&e.patternFrames&&JSON.stringify(e.filteredPatterns)!==JSON.stringify(t.filteredPatterns)&&Lf(e.patternFrames.map((e=>e.pattern)),e.patternFilter,this.onSearchResult)})))}setFilteredPatterns(e,t){const n=pt.getAncestor(this,Qh),r=null!=t?t:n.state.patternFrames;if(r){const t=r.filter((t=>!(!n.state.patternFilter||!(null==r?void 0:r.length))&&e.find((e=>e===t.pattern))));n.setState({filteredPatterns:t})}}setEmptySearch(){pt.getAncestor(this,Qh).setState({filteredPatterns:void 0})}constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$h(e,t,n[t])}))}return e}({},e)),$h(this,"clearSearch",(()=>{pt.getAncestor(this,Qh).setState({patternFilter:""})})),$h(this,"handleSearchChange",(e=>{pt.getAncestor(this,Qh).setState({patternFilter:e.target.value})})),$h(this,"onSearchResult",(e=>{const t=pt.getAncestor(this,Qh);t.state.patternFilter?this.setFilteredPatterns(e[0]):t.state.filteredPatterns&&!t.state.patternFilter&&this.setEmptySearch()})),this.addActivationHandler(this.onActivate.bind(this))}}$h(Uh,"Component",(function({model:e}){const t=pt.getAncestor(e,Qh),{patternFilter:r}=t.useState();return n().createElement(Yt.Field,{className:Gh.field},n().createElement(yf,{onChange:e.handleSearchChange,onClear:e.clearSearch,value:r,placeholder:"Search patterns"}))}));const Gh={field:(0,Zt.css)({label:"field",marginBottom:0}),icon:(0,Zt.css)({cursor:"pointer"})};function qh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Qh extends H{onActivate(){const e=pt.getAncestor(this,US);this.setBody(),e.state.patterns&&this.updatePatternFrames(e.state.patterns),this._subs.add(e.subscribeToState(((e,t)=>{JSON.stringify(e.patterns)!==JSON.stringify(t.patterns)&&this.updatePatternFrames(e.patterns)})))}setBody(){this.setState({body:new Xc({direction:"column",children:[new Zc({ySizing:"content",body:new Uh}),new Zc({body:new Wh})]})})}updatePatternFrames(e){if(!e)return void console.warn("failed to update pattern frames");const t=this.buildPatterns(e);this.setState({patternFrames:t,loading:!1})}buildPatterns(t){const n=pt.getAncestor(this,US),r=pt.getAncestor(n,cx).state.patterns;let a=-1/0,i=0;return t.map((t=>{const n=[],o=[];let s=0;t.samples.forEach((([e,t])=>{n.push(1e3*e);const r=parseFloat(t);o.push(r),r>a&&(a=r),r<i&&(i=r),s+=r}));const l={refId:t.pattern,fields:[{name:"time",type:e.FieldType.time,values:n,config:{}},{name:t.pattern,type:e.FieldType.number,values:o,config:{}}],length:t.samples.length,meta:{preferredVisualisationType:"graph"}},c=null==r?void 0:r.find((e=>e.pattern===t.pattern));return{dataFrame:l,pattern:t.pattern,sum:s,status:null==c?void 0:c.type}})).sort(((e,t)=>t.sum-e.sum))}constructor(e){var t;super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qh(e,t,n[t])}))}return e}({$variables:null!==(t=e.$variables)&&void 0!==t?t:new Qo({variables:[new ns({name:Cd,defaultToAll:!0,includeAll:!0})]}),patternFilter:"",loading:!0},e)),this.addActivationHandler(this.onActivate.bind(this))}}function Yh(e){return{container:(0,Zt.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column"}),content:(0,Zt.css)({flexGrow:1,display:"flex",paddingTop:e.spacing(0)}),controls:(0,Zt.css)({flexGrow:0,display:"flex",alignItems:"top",gap:e.spacing(2)}),controlsRight:(0,Zt.css)({flexGrow:0,display:"flex",justifyContent:"flex-end"}),controlsLeft:(0,Zt.css)({display:"flex",justifyContent:"flex-left",justifyItems:"left",width:"100%",flexDirection:"column"}),patternMissingText:(0,Zt.css)({padding:e.spacing(2)})}}qh(Qh,"Component",(({model:e})=>{const{body:t,loading:r,blockingMessage:a}=e.useState(),i=pt.getAncestor(e,US),{patterns:o}=i.useState(),s=(0,Yt.useStyles2)(Yh);return n().createElement("div",{className:s.container},n().createElement(mf,{isLoading:r,blockingMessage:a},!r&&!o&&n().createElement("div",{className:s.patternMissingText},n().createElement(Yt.Text,{textAlignment:"center",color:"primary"},n().createElement("p",null,"There are no pattern matches."),n().createElement("p",null,"Pattern matching has not been configured."),n().createElement("p",null,"Patterns let you detect similar log lines and add or exclude them from your search."),n().createElement("p",null,"To see them in action, add the following to your configuration"),n().createElement("p",null,n().createElement("code",null,"--pattern-ingester.enabled=true")))),!r&&0===(null==o?void 0:o.length)&&n().createElement(ah,null,n().createElement("div",null,n().createElement("p",null,n().createElement("strong",null,"Sorry, we could not detect any patterns.")),n().createElement("p",null,"Check back later or reach out to the team in the"," ",n().createElement(Yt.TextLink,{href:"https://slack.grafana.com/",external:!0},"Grafana Labs community Slack channel")),n().createElement("p",null,"Patterns let you detect similar log lines to include or exclude from your search."))),!r&&o&&o.length>0&&n().createElement("div",{className:s.content},t&&n().createElement(t.Component,{model:t}))))}));const Kh=({exploration:t})=>n().createElement(Yt.ToolbarButton,{"data-testid":Op,variant:"canvas",icon:"compass",onClick:()=>{ip(sp,lp.service_details.open_in_explore_clicked);const n=function(e){return pt.interpolate(e,Pd)}(t),r=function(e){return pt.interpolate(e,Td).replace(/\s+/g," ")}(t).replace(/\s+/g," ").trimEnd(),i=pt.getTimeRange(t).state.value,o=JSON.stringify({"loki-explore":{range:(0,e.toURLRange)(i.raw),queries:[{refId:"logs",expr:r,datasource:n}],datasource:n}});var s;const l=null!==(s=a.config.appSubUrl)&&void 0!==s?s:"",c=e.urlUtil.renderUrl(`${l}/explore`,{panes:o,schemaVersion:1});window.open(c,"_blank")}},"Open in Explore");function Xh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Zh extends H{getVariable(){const e=pt.lookupVariable(kd,this);if(!(e instanceof ns))throw new Error("Logs format variable not found");return e}updateFilter(e){this.setState({lineFilter:e}),this.updateVariable(e)}constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Xh(e,t,n[t])}))}return e}({lineFilter:(null==e?void 0:e.lineFilter)||""},e)),Xh(this,"onActivate",(()=>{const e=this.getVariable().getValue();if(!e)return;const t=e.toString().match(/`\(\?i\)(.+)`/);t&&2===t.length&&this.setState({lineFilter:t[1].replace(/\\(.)/g,"$1")})})),Xh(this,"handleChange",(e=>{this.updateFilter(e.target.value)})),Xh(this,"updateVariable",(0,ee.debounce)((e=>{this.getVariable().changeValueTo(`|~ \`(?i)${(0,ee.escapeRegExp)(e)}\``),ip(sp,lp.service_details.search_string_in_logs_changed,{searchQueryLength:e.length,containsLevel:e.toLowerCase().includes("level")})}),350)),this.addActivationHandler(this.onActivate)}}Xh(Zh,"Component",(function({model:e}){const{lineFilter:t}=e.useState();return n().createElement(Yt.Field,{className:Jh.field},n().createElement(yf,{"data-testid":xp,value:t,className:Jh.input,onChange:e.handleChange,placeholder:"Search in log lines",onClear:()=>{e.updateFilter("")}}))}));const Jh={input:(0,Zt.css)({width:"100%"}),field:(0,Zt.css)({label:"field",width:"100%",marginBottom:0})};function eg(e,t,n){const r=e.getFieldByName(t);if(void 0!==r)return r.type===n?r:void 0}const tg="timestamp",ng="body";function rg(e){const t={};return Object.entries(e).forEach((([e,n])=>{t[e]="string"==typeof n?n:JSON.stringify(n)})),t}function ag(e){var t;return null!==(t=null==e?void 0:e.timeField.name)&&void 0!==t?t:tg}function ig(e){var t;return null!==(t=null==e?void 0:e.bodyField.name)&&void 0!==t?t:ng}function og(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){og(e,t,n[t])}))}return e}var lg;!function(e){e.text="text",e.labels="labels",e.auto="auto"}(lg||(lg={}));const cg=(0,t.createContext)({columns:{},filteredColumns:{},setColumns:()=>{},setFilteredColumns:()=>{},setVisible:()=>!1,visible:!1,bodyState:"auto",setBodyState:()=>{}}),ug=({children:e,initialColumns:r,logsFrame:a,setUrlColumns:i})=>{const[o,s]=(0,t.useState)(dg(r)),[l,c]=(0,t.useState)("auto"),[u,d]=(0,t.useState)(void 0),[p,f]=(0,t.useState)(!1),h=(0,t.useCallback)((e=>{if(e){const t=dg(e);s(t),i((e=>{let t=[];return Object.keys(e).forEach((n=>{e[n].active&&void 0!==e[n].index&&t.push(n)})),t.sort(((t,n)=>{const r=e[t],a=e[n];return r.index-a.index})),t})(t))}}),[i]),g=(0,t.useCallback)((e=>{f(e)}),[]);return(0,t.useEffect)((()=>{r&&h(r)}),[r,h]),(0,t.useEffect)((()=>{const e=function(e,t){if(!t)return void console.warn("missing dataframe, cannot set url state");const n=Object.keys(e).filter((t=>{var n;return null===(n=e[t])||void 0===n?void 0:n.active})).sort(((t,n)=>{const r=e[t],a=e[n];return void 0!==r.index&&void 0!==a.index?r.index-a.index:0})),r=t.timeField,a=t.bodyField;if(r&&a||n.length){const e=[];return(null==r?void 0:r.name)&&e.push(r.name),(null==a?void 0:a.name)&&e.push(a.name),n.length?n:e}return[]}(o,a);(null==e?void 0:e.length)&&(0===Object.keys(o).filter((e=>o[e].active)).length&&function(e,t,n){const r=sg({},e);r[ag(n)]={index:0,active:!0,type:"TIME_FIELD",percentOfLinesWithLabel:100,cardinality:1/0},r[ig(n)]={index:1,active:!0,type:"BODY_FIELD",percentOfLinesWithLabel:100,cardinality:1/0},t(r)}(o,h,a),d(void 0))}),[o,a,d,h]),n().createElement(cg.Provider,{value:{bodyState:l,setBodyState:c,setFilteredColumns:d,filteredColumns:u,columns:o,setColumns:h,visible:p,setVisible:g}},e)},dg=e=>{if("labelTypes"in e){const t=sg({},e),{labelTypes:n}=t;return function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,["labelTypes"])}return e},pg=()=>(0,t.useContext)(cg);var fg=f(367);const hg=(0,t.createContext)({cellIndex:{index:null,numberOfMenuItems:3},setActiveCellIndex:e=>!1}),gg=({children:e})=>{const[r,a]=(0,t.useState)({index:null}),i=(0,t.useCallback)((e=>{a(e)}),[]);return n().createElement(hg.Provider,{value:{cellIndex:r,setActiveCellIndex:i}},e)},mg=()=>(0,t.useContext)(hg),bg=(0,t.createContext)({isHeaderMenuActive:!1,setHeaderMenuActive:e=>!1}),vg=({children:e})=>{const[r,a]=(0,t.useState)(!1),i=(0,t.useCallback)((e=>{a(e)}),[]);return n().createElement(bg.Provider,{value:{isHeaderMenuActive:r,setHeaderMenuActive:i}},e)},yg=()=>(0,t.useContext)(bg);function wg({searchValue:e,setSearchValue:t}){const{columns:r,setFilteredColumns:i}=pg(),o=e=>{const t=e[0];let n={},o=0;var s;t.forEach((e=>{e in r&&(n[e]=r[e],o++)})),i(n),s=o,(0,a.reportInteraction)("grafana_logs_app_table_text_search_result_count",{resultCount:s})},s=function(e){return{searchWrap:(0,Zt.css)({padding:`${e.spacing(.4)} 0 ${e.spacing(.4)} ${e.spacing(.4)}`})}}((0,Yt.useTheme2)());return n().createElement(Yt.Field,{className:s.searchWrap},n().createElement(Yt.Input,{value:e,type:"text",placeholder:"Search fields by name",onChange:e=>{var n;const a=null===(n=e.currentTarget)||void 0===n?void 0:n.value;var s;t(a),a?(s=a,Nf(Object.keys(r),s,o)):i(void 0)}}))}function Sg(e,t){return Sg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sg(e,t)}function xg(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Sg(e,t)}function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Og.apply(this,arguments)}var _g=f(694),Cg=f(200);function Eg(e,n){var r=(0,t.useState)((function(){return{inputs:n,result:e()}}))[0],a=(0,t.useRef)(!0),i=(0,t.useRef)(r),o=a.current||Boolean(n&&i.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(n,i.current.inputs))?i.current:{inputs:n,result:e()};return(0,t.useEffect)((function(){a.current=!1,i.current=o}),[o]),o.result}var Pg=Eg,Dg=function(e,t){return Eg((function(){return e}),t)},kg=function(e){var t=e.top,n=e.right,r=e.bottom,a=e.left;return{top:t,right:n,bottom:r,left:a,width:n-a,height:r-t,x:a,y:t,center:{x:(n+a)/2,y:(r+t)/2}}},Tg=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},Rg=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},jg={top:0,right:0,bottom:0,left:0},Ig=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?jg:n,a=e.border,i=void 0===a?jg:a,o=e.padding,s=void 0===o?jg:o,l=kg(Tg(t,r)),c=kg(Rg(t,i)),u=kg(Rg(c,s));return{marginBox:l,borderBox:kg(t),paddingBox:c,contentBox:u,margin:r,border:i,padding:s}},Ag=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e,t){throw new Error("Invariant failed")}(),n},Lg=function(e,t){var n,r,a=e.borderBox,i=e.border,o=e.margin,s=e.padding,l=(r=t,{top:(n=a).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return Ig({borderBox:l,border:i,margin:o,padding:s})},Ng=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),Lg(e,t)},Fg=function(e,t){var n={top:Ag(t.marginTop),right:Ag(t.marginRight),bottom:Ag(t.marginBottom),left:Ag(t.marginLeft)},r={top:Ag(t.paddingTop),right:Ag(t.paddingRight),bottom:Ag(t.paddingBottom),left:Ag(t.paddingLeft)},a={top:Ag(t.borderTopWidth),right:Ag(t.borderRightWidth),bottom:Ag(t.borderBottomWidth),left:Ag(t.borderLeftWidth)};return Ig({borderBox:e,margin:n,padding:r,border:a})},Mg=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return Fg(t,n)},Bg=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Vg(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!((r=e[n])===(a=t[n])||Bg(r)&&Bg(a)))return!1;var r,a;return!0}const zg=function(e,t){var n;void 0===t&&(t=Vg);var r,a=[],i=!1;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return i&&n===this&&t(o,a)||(r=e.apply(this,o),i=!0,n=this,a=o),r}},Wg=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];t=a,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};var Hg=f(398),$g=f.n(Hg);function Ug(e,t){}function Gg(){}function qg(e,t,n){var r=t.map((function(t){var r,a,i=(r=n,a=t.options,Og({},r,{},a));return e.addEventListener(t.eventName,t.fn,i),function(){e.removeEventListener(t.eventName,t.fn,i)}}));return function(){r.forEach((function(e){e()}))}}Ug.bind(null,"warn"),Ug.bind(null,"error");var Qg=!0,Yg="Invariant failed";function Kg(e){this.message=e}function Xg(e,t){if(!e)throw new Kg(Qg?Yg:Yg+": "+(t||""))}Kg.prototype.toString=function(){return this.message};var Zg=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=Gg,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof Kg&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}xg(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=qg(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof Kg))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(n().Component),Jg=function(e){return e+1},em=function(e,t){var n=e.droppableId===t.droppableId,r=Jg(e.index),a=Jg(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+a+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+a+"\n  "},tm=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},nm=function(e){return"\n  The item has returned to its starting position\n  of "+Jg(e.index)+"\n"},rm=function(e){return"\n  You have lifted an item in position "+Jg(e.source.index)+"\n"},am=function(e){var t=e.destination;if(t)return em(e.source,t);var n=e.combine;return n?tm(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},im=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+nm(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+em(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+tm(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+nm(e.source)+"\n  "},om={x:0,y:0},sm=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},lm=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},cm=function(e,t){return e.x===t.x&&e.y===t.y},um=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},dm=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},pm=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},fm=function(e,t){return Math.min.apply(Math,t.map((function(t){return pm(e,t)})))},hm=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},gm=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},mm=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},bm=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=kg({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):kg(e)},vm=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,a=e.frame,i=function(e,t){return t?gm(e,t.scroll.diff.displacement):e}(t.marginBox,a),o=function(e,t,n){var r;return n&&n.increasedBy?Og({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(i,r,n);return{page:t,withPlaceholder:n,active:bm(o,a)}},ym=function(e,t){e.frame||Xg(!1);var n=e.frame,r=lm(t,n.scroll.initial),a=um(r),i=Og({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:a},max:n.scroll.max}});return Og({},e,{frame:i,subject:vm({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i})})};function wm(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function Sm(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function xm(e,t){if(e.find)return e.find(t);var n=Sm(e,t);return-1!==n?e[n]:void 0}function Om(e){return Array.prototype.slice.call(e)}var _m=zg((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),Cm=zg((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),Em=zg((function(e){return wm(e)})),Pm=zg((function(e){return wm(e)})),Dm=zg((function(e,t){var n=Pm(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}));return n}));function km(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function Tm(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var Rm=zg((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),jm=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Im={point:om,value:0},Am={invisible:{},visible:{},all:[]},Lm={displaced:Am,displacedBy:Im,at:null},Nm=function(e,t){return function(n){return e<=n&&n<=t}},Fm=function(e){var t=Nm(e.top,e.bottom),n=Nm(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var a=t(r.top)||t(r.bottom),i=n(r.left)||n(r.right);if(a&&i)return!0;var o=r.top<e.top&&r.bottom>e.bottom,s=r.left<e.left&&r.right>e.right;return!(!o||!s)||o&&i||s&&a}},Mm=function(e){var t=Nm(e.top,e.bottom),n=Nm(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},Bm={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Vm={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},zm=function(e){var t=e.target,n=e.destination,r=e.viewport,a=e.withDroppableDisplacement,i=e.isVisibleThroughFrameFn,o=a?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:om;return gm(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(o,n,i)&&function(e,t,n){return n(t)(e)}(o,r,i)},Wm=function(e){return zm(Og({},e,{isVisibleThroughFrameFn:Fm}))},Hm=function(e){return zm(Og({},e,{isVisibleThroughFrameFn:Mm}))},$m=function(e,t,n){if("boolean"==typeof n)return n;if(!t)return!0;var r=t.invisible,a=t.visible;if(r[e])return!1;var i=a[e];return!i||i.shouldAnimate};function Um(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,a=e.viewport,i=e.forceShouldAnimate,o=e.last;return t.reduce((function(e,t){var s=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return kg(Tg(n,r))}(t,r),l=t.descriptor.id;if(e.all.push(l),!Wm({target:s,destination:n,viewport:a,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var c={draggableId:l,shouldAnimate:$m(l,o,i)};return e.visible[l]=c,e}),{all:[],visible:{},invisible:{}})}function Gm(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,a=e.destination,i=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:Am,displacedBy:r,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:i}}}}function qm(e){var t=e.draggable,n=e.insideDestination,r=e.destination,a=e.viewport,i=e.displacedBy,o=e.last,s=e.index,l=e.forceShouldAnimate,c=jm(t,r);if(null==s)return Gm({insideDestination:n,inHomeList:c,displacedBy:i,destination:r});var u=xm(n,(function(e){return e.descriptor.index===s}));if(!u)return Gm({insideDestination:n,inHomeList:c,displacedBy:i,destination:r});var d=Rm(t,n),p=n.indexOf(u);return{displaced:Um({afterDragging:d.slice(p),destination:r,displacedBy:i,last:o,viewport:a.frame,forceShouldAnimate:l}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function Qm(e,t){return Boolean(t.effected[e])}var Ym=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},Km=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},Xm=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return dm(t.line,n.marginBox[t.end]+Ym(t,r),Km(t,n.marginBox,r))},Zm=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return dm(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),Km(t,n.marginBox,r))},Jm=function(e,t){var n=e.frame;return n?sm(t,n.scroll.diff.displacement):t},eb=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,a=e.draggables,i=e.afterCritical,o=n.page.borderBox.center,s=t.at;return r&&s?"REORDER"===s.type?function(e){var t=e.impact,n=e.draggable,r=e.draggables,a=e.droppable,i=e.afterCritical,o=Dm(a.descriptor.id,r),s=n.page,l=a.axis;if(!o.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return dm(t.line,n.contentBox[t.start]+Ym(t,r),Km(t,n.contentBox,r))}({axis:l,moveInto:a.page,isMoving:s});var c=t.displaced,u=t.displacedBy,d=c.all[0];if(d){var p=r[d];if(Qm(d,i))return Zm({axis:l,moveRelativeTo:p.page,isMoving:s});var f=Lg(p.page,u.point);return Zm({axis:l,moveRelativeTo:f,isMoving:s})}var h=o[o.length-1];if(h.descriptor.id===n.descriptor.id)return s.borderBox.center;if(Qm(h.descriptor.id,i)){var g=Lg(h.page,um(i.displacedBy.point));return Xm({axis:l,moveRelativeTo:g,isMoving:s})}return Xm({axis:l,moveRelativeTo:h.page,isMoving:s})}({impact:t,draggable:n,draggables:a,droppable:r,afterCritical:i}):function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,a=Tm(n);a||Xg(!1);var i=a.draggableId,o=r[i].page.borderBox.center,s=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,a=e.displacedBy,i=Boolean(t.visible[r]||t.invisible[r]);return Qm(r,n)?i?om:um(a.point):i?a.point:om}({displaced:n.displaced,afterCritical:t,combineWith:i,displacedBy:n.displacedBy});return sm(o,s)}({impact:t,draggables:a,afterCritical:i}):o}(e),n=e.droppable;return n?Jm(n,t):t},tb=function(e,t){var n=lm(t,e.scroll.initial),r=um(n);return{frame:kg({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function nb(e,t){return e.map((function(e){return t[e]}))}var rb=function(e){var t,n,r=e.pageBorderBoxCenter,a=e.draggable,i=(t=e.viewport,n=r,sm(t.scroll.diff.displacement,n)),o=lm(i,a.page.borderBox.center);return sm(a.client.borderBox.center,o)},ab=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,a=e.viewport,i=e.withDroppableDisplacement,o=e.onlyOnMainAxis,s=void 0!==o&&o,l=lm(r,t.page.borderBox.center),c={target:gm(t.page.borderBox,l),destination:n,withDroppableDisplacement:i,viewport:a};return s?function(e){return zm(Og({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=Nm(e.top,e.bottom),r=Nm(e.left,e.right);return function(e){return t===Bm?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(c):Hm(c)},ib=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,a=e.draggables,i=e.previousImpact,o=e.viewport,s=e.previousPageBorderBoxCenter,l=e.previousClientSelection,c=e.afterCritical;if(!r.isEnabled)return null;var u=Dm(r.descriptor.id,a),d=jm(n,r),p=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,a=e.insideDestination,i=e.previousImpact;if(!r.isCombineEnabled)return null;if(!km(i))return null;function o(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return Og({},i,{at:t})}var s=i.displaced.all,l=s.length?s[0]:null;if(t)return l?o(l):null;var c=Rm(n,a);if(!l)return c.length?o(c[c.length-1].descriptor.id):null;var u=Sm(c,(function(e){return e.descriptor.id===l}));-1===u&&Xg(!1);var d=u-1;return d<0?null:o(c[d].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:u,previousImpact:i})||function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,a=e.draggables,i=e.destination,o=e.insideDestination,s=e.previousImpact,l=e.viewport,c=e.afterCritical,u=s.at;if(u||Xg(!1),"REORDER"===u.type){var d=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,a=e.location;if(!r.length)return null;var i=a.index,o=t?i+1:i-1,s=r[0].descriptor.index,l=r[r.length-1].descriptor.index;return o<s||o>(n?l:l+1)?null:o}({isMovingForward:t,isInHomeList:n,location:u.destination,insideDestination:o});return null==d?null:qm({draggable:r,insideDestination:o,destination:i,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:d})}var p=function(e){var t=e.isMovingForward,n=e.draggables,r=e.combine,a=e.afterCritical;if(!e.destination.isCombineEnabled)return null;var i=r.draggableId,o=n[i].descriptor.index;return Qm(i,a)?t?o:o-1:t?o+1:o}({isMovingForward:t,destination:i,displaced:s.displaced,draggables:a,combine:u.combine,afterCritical:c});return null==p?null:qm({draggable:r,insideDestination:o,destination:i,viewport:l,last:s.displaced,displacedBy:s.displacedBy,index:p})}({isMovingForward:t,isInHomeList:d,draggable:n,draggables:a,destination:r,insideDestination:u,previousImpact:i,viewport:o,afterCritical:c});if(!p)return null;var f=eb({impact:p,draggable:n,droppable:r,draggables:a,afterCritical:c});if(ab({draggable:n,destination:r,newPageBorderBoxCenter:f,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:rb({pageBorderBoxCenter:f,draggable:n,viewport:o}),impact:p,scrollJumpRequest:null};var h=lm(f,s),g=function(e){var t=e.impact,n=e.viewport,r=e.destination,a=e.draggables,i=e.maxScrollChange,o=tb(n,sm(n.scroll.current,i)),s=r.frame?ym(r,sm(r.frame.scroll.current,i)):r,l=t.displaced,c=Um({afterDragging:nb(l.all,a),destination:r,displacedBy:t.displacedBy,viewport:o.frame,last:l,forceShouldAnimate:!1}),u=Um({afterDragging:nb(l.all,a),destination:s,displacedBy:t.displacedBy,viewport:n.frame,last:l,forceShouldAnimate:!1}),d={},p={},f=[l,c,u];return l.all.forEach((function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,f);t?p[e]=t:d[e]=!0})),Og({},t,{displaced:{all:l.all,invisible:d,visible:p}})}({impact:p,viewport:o,destination:r,draggables:a,maxScrollChange:h});return{clientSelection:l,impact:g,scrollJumpRequest:h}},ob=function(e){var t=e.subject.active;return t||Xg(!1),t},sb=function(e,t){var n=e.page.borderBox.center;return Qm(e.descriptor.id,t)?lm(n,t.displacedBy.point):n},lb=function(e,t){var n=e.page.borderBox;return Qm(e.descriptor.id,t)?gm(n,um(t.displacedBy.point)):n},cb=zg((function(e,t){var n=t[e.line];return{value:n,point:dm(e.line,n)}})),ub=function(e,t){return Og({},e,{scroll:Og({},e.scroll,{max:t})})},db=function(e,t,n){var r=e.frame;jm(t,e)&&Xg(!1),e.subject.withPlaceholder&&Xg(!1);var a=cb(e.axis,t.displaceBy).point,i=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return dm(r.line,t[r.line]);var a=e.subject.page.contentBox[r.size],i=Dm(e.descriptor.id,n).reduce((function(e,t){return e+t.client.marginBox[r.size]}),0)+t[r.line]-a;return i<=0?null:dm(r.line,i)}(e,a,n),o={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return Og({},e,{subject:vm({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame})});var s=i?sm(r.scroll.max,i):r.scroll.max,l=ub(r,s);return Og({},e,{subject:vm({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:l}),frame:l})},pb=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},fb=function(e){var t=e.state,n=e.type,r=function(e,t){var n=pb(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),a=Boolean(r),i=t.dimensions.droppables[t.critical.droppable.id],o=r||i,s=o.axis.direction,l="vertical"===s&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===s&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(l&&!a)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,u=t.dimensions.draggables[t.critical.draggable.id],d=t.current.page.borderBoxCenter,p=t.dimensions,f=p.draggables,h=p.droppables;return l?ib({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,destination:o,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,a=e.isOver,i=e.draggables,o=e.droppables,s=e.viewport,l=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,a=e.droppables,i=e.viewport,o=r.subject.active;if(!o)return null;var s=r.axis,l=Nm(o[s.start],o[s.end]),c=Em(a).filter((function(e){return e!==r})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return Fm(i.frame)(ob(e))})).filter((function(e){var n=ob(e);return t?o[s.crossAxisEnd]<n[s.crossAxisEnd]:n[s.crossAxisStart]<o[s.crossAxisStart]})).filter((function(e){var t=ob(e),n=Nm(t[s.start],t[s.end]);return l(t[s.start])||l(t[s.end])||n(o[s.start])||n(o[s.end])})).sort((function(e,n){var r=ob(e)[s.crossAxisStart],a=ob(n)[s.crossAxisStart];return t?r-a:a-r})).filter((function(e,t,n){return ob(e)[s.crossAxisStart]===ob(n[0])[s.crossAxisStart]}));if(!c.length)return null;if(1===c.length)return c[0];var u=c.filter((function(e){return Nm(ob(e)[s.start],ob(e)[s.end])(n[s.line])}));return 1===u.length?u[0]:u.length>1?u.sort((function(e,t){return ob(e)[s.start]-ob(t)[s.start]}))[0]:c.sort((function(e,t){var r=fm(n,mm(ob(e))),a=fm(n,mm(ob(t)));return r!==a?r-a:ob(e)[s.start]-ob(t)[s.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:a,droppables:o,viewport:s});if(!c)return null;var u=Dm(c.descriptor.id,i),d=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,a=e.afterCritical,i=e.insideDestination.filter((function(e){return Hm({target:lb(e,a),destination:r,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(e,n){var i=pm(t,Jm(r,sb(e,a))),o=pm(t,Jm(r,sb(n,a)));return i<o?-1:o<i?1:e.descriptor.index-n.descriptor.index}));return i[0]||null}({pageBorderBoxCenter:n,viewport:s,destination:c,insideDestination:u,afterCritical:l}),p=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,a=e.draggable,i=e.draggables,o=e.destination,s=e.viewport,l=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:Am,displacedBy:Im,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},u=eb({impact:c,draggable:a,droppable:o,draggables:i,afterCritical:l}),d=jm(a,o)?o:db(o,a,i);return ab({draggable:a,destination:d,newPageBorderBoxCenter:u,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var p,f=Boolean(t[o.axis.line]<=n.page.borderBox.center[o.axis.line]),h=(p=n.descriptor.index,n.descriptor.id===a.descriptor.id||f?p:p+1);return qm({draggable:a,insideDestination:r,destination:o,viewport:s,displacedBy:cb(o.axis,a.displaceBy),last:Am,index:h})}({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:i,moveRelativeTo:d,insideDestination:u,viewport:s,afterCritical:l});if(!p)return null;var f=eb({impact:p,draggable:r,droppable:c,draggables:i,afterCritical:l});return{clientSelection:rb({pageBorderBoxCenter:f,draggable:r,viewport:s}),impact:p,scrollJumpRequest:null}}({isMovingForward:c,previousPageBorderBoxCenter:d,draggable:u,isOver:o,draggables:f,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function hb(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function gb(e){var t=Nm(e.top,e.bottom),n=Nm(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}var mb=function(e,t){return kg(gm(e,t))};function bb(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var vb=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,a=e.droppables,i=e.previousImpact,o=e.viewport,s=e.afterCritical,l=mb(n.page.borderBox,t),c=function(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,a=Em(r).filter((function(e){if(!e.isEnabled)return!1;var n,r,a=e.subject.active;if(!a)return!1;if(r=a,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(gb(a)(t.center))return!0;var i=e.axis,o=a.center[i.crossAxisLine],s=t[i.crossAxisStart],l=t[i.crossAxisEnd],c=Nm(a[i.crossAxisStart],a[i.crossAxisEnd]),u=c(s),d=c(l);return!u&&!d||(u?s<o:l>o)}));return a.length?1===a.length?a[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.candidates,r=e.draggable.page.borderBox.center,a=n.map((function(e){var n=e.axis,a=dm(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:pm(r,a)}})).sort((function(e,t){return t.distance-e.distance}));return a[0]?a[0].id:null}({pageBorderBox:t,draggable:n,candidates:a}):null}({pageBorderBox:l,draggable:n,droppables:a});if(!c)return Lm;var u=a[c],d=Dm(u.descriptor.id,r),p=function(e,t){var n=e.frame;return n?mb(t,n.scroll.diff.value):t}(u,l);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,a=e.destination,i=e.insideDestination,o=e.afterCritical;if(!a.isCombineEnabled)return null;var s=a.axis,l=cb(a.axis,t.displaceBy),c=l.value,u=n[s.start],d=n[s.end],p=xm(Rm(t,i),(function(e){var t=e.descriptor.id,n=e.page.borderBox,a=n[s.size]/4,i=Qm(t,o),l=bb({displaced:r.displaced,id:t});return i?l?d>n[s.start]+a&&d<n[s.end]-a:u>n[s.start]-c+a&&u<n[s.end]-c-a:l?d>n[s.start]+c+a&&d<n[s.end]+c-a:u>n[s.start]+a&&u<n[s.end]-a}));return p?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:a.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:p,draggable:n,previousImpact:i,destination:u,insideDestination:d,afterCritical:s})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,a=e.insideDestination,i=e.last,o=e.viewport,s=e.afterCritical,l=r.axis,c=cb(r.axis,n.displaceBy),u=c.value,d=t[l.start],p=t[l.end],f=function(e){var t=e.draggable,n=e.closest;return n?e.inHomeList&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:xm(Rm(n,a),(function(e){var t=e.descriptor.id,n=e.page.borderBox.center[l.line],r=Qm(t,s),a=bb({displaced:i,id:t});return r?a?p<=n:d<n-u:a?p<=n+u:d<n})),inHomeList:jm(n,r)});return qm({draggable:n,insideDestination:a,destination:r,viewport:o,last:i,displacedBy:c,index:f})}({pageBorderBoxWithDroppableScroll:p,draggable:n,destination:u,insideDestination:d,last:i.displaced,viewport:o,afterCritical:s})},yb=function(e,t){var n;return Og({},e,((n={})[t.descriptor.id]=t,n))},wb=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,a=e.viewport,i=e.impact,o=e.scrollJumpRequest,s=a||t.viewport,l=r||t.dimensions,c=n||t.current.client.selection,u=lm(c,t.initial.client.selection),d={offset:u,selection:c,borderBoxCenter:sm(t.initial.client.borderBoxCenter,u)},p={selection:sm(d.selection,s.scroll.current),borderBoxCenter:sm(d.borderBoxCenter,s.scroll.current),offset:sm(d.offset,s.scroll.diff.value)},f={client:d,page:p};if("COLLECTING"===t.phase)return Og({phase:"COLLECTING"},t,{dimensions:l,viewport:s,current:f});var h=l.draggables[t.critical.draggable.id],g=i||vb({pageOffset:p.offset,draggable:h,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:s,afterCritical:t.afterCritical}),m=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,a=e.impact,i=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,a=pb(t),i=pb(n);if(!a)return r;if(a===i)return r;var o=r[a];if(!o.subject.withPlaceholder)return r;var s=function(e){var t=e.subject.withPlaceholder;t||Xg(!1);var n=e.frame;if(!n)return Og({},e,{subject:vm({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||Xg(!1);var a=ub(n,r);return Og({},e,{subject:vm({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null}),frame:a})}(o);return yb(r,s)}({previousImpact:e.previousImpact,impact:a,droppables:r}),o=pb(a);if(!o)return i;var s=r[o];if(jm(t,s))return i;if(s.subject.withPlaceholder)return i;var l=db(s,t,n);return yb(i,l)}({draggable:h,impact:g,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return Og({},t,{current:f,dimensions:{draggables:l.draggables,droppables:m},impact:g,viewport:s,scrollJumpRequest:o||null,forceShouldAnimate:!o&&null})},Sb=function(e){var t=e.impact,n=e.viewport,r=e.draggables,a=e.destination,i=e.forceShouldAnimate,o=t.displaced,s=function(e,t){return e.map((function(e){return t[e]}))}(o.all,r);return Og({},t,{displaced:Um({afterDragging:s,destination:a,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:i,last:o})})},xb=function(e){var t=e.impact,n=e.draggable,r=e.droppable,a=e.draggables,i=e.viewport,o=e.afterCritical,s=eb({impact:t,draggable:n,draggables:a,droppable:r,afterCritical:o});return rb({pageBorderBoxCenter:s,draggable:n,viewport:i})},Ob=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&Xg(!1);var a=t.impact,i=r||t.viewport,o=n||t.dimensions,s=o.draggables,l=o.droppables,c=s[t.critical.draggable.id],u=pb(a);u||Xg(!1);var d=l[u],p=Sb({impact:a,viewport:i,destination:d,draggables:s}),f=xb({impact:p,draggable:c,droppable:d,draggables:s,viewport:i,afterCritical:t.afterCritical});return wb({impact:p,clientSelection:f,state:t,dimensions:o,viewport:i})},_b=function(e){var t=e.draggable,n=e.home,r=e.draggables,a=e.viewport,i=cb(n.axis,t.displaceBy),o=Dm(n.descriptor.id,r),s=o.indexOf(t);-1===s&&Xg(!1);var l,c=o.slice(s+1),u=c.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),d={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:i,effected:u};return{impact:{displaced:Um({afterDragging:c,destination:n,displacedBy:i,last:null,viewport:a.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:d}},Cb=function(e){return"SNAP"===e.movementMode},Eb=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:yb(e.droppables,t)}}(e.dimensions,t);return!Cb(e)||n?wb({state:e,dimensions:r}):Ob({state:e,dimensions:r})};function Pb(e){return e.isDragging&&"SNAP"===e.movementMode?Og({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Db={phase:"IDLE",completed:null,shouldFlush:!1},kb=function(e,t){if(void 0===e&&(e=Db),"FLUSH"===t.type)return Og({},Db,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&Xg(!1);var n=t.payload,r=n.critical,a=n.clientSelection,i=n.viewport,o=n.dimensions,s=n.movementMode,l=o.draggables[r.draggable.id],c=o.droppables[r.droppable.id],u={selection:a,borderBoxCenter:l.client.borderBox.center,offset:om},d={client:u,page:{selection:sm(u.selection,i.scroll.initial),borderBoxCenter:sm(u.selection,i.scroll.initial),offset:sm(u.selection,i.scroll.diff.value)}},p=Em(o.droppables).every((function(e){return!e.isFixedOnPage})),f=_b({draggable:l,home:c,draggables:o.draggables,viewport:i}),h=f.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:s,dimensions:o,initial:d,current:d,isWindowScrollAllowed:p,impact:h,afterCritical:f.afterCritical,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&Xg(!1),Og({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&Xg(!1),function(e){var t=e.state,n=e.published,r=n.modified.map((function(e){var n=t.dimensions.droppables[e.droppableId];return ym(n,e.scroll)})),a=Og({},t.dimensions.droppables,{},_m(r)),i=Cm(function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,a=r.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,i=function(e){var t=e.frame;return t||Xg(!1),t}(n[t]),o=i.scroll.diff.value,s=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,a=Lg(t.client,n),i=Ng(a,r);return Og({},t,{placeholder:Og({},t.placeholder,{client:a}),client:a,page:i})}({draggable:e,offset:sm(a,o),initialWindowScroll:r.scroll.initial});return s}))}({additions:n.additions,updatedDroppables:a,viewport:t.viewport})),o=Og({},t.dimensions.draggables,{},i);n.removals.forEach((function(e){delete o[e]}));var s={droppables:a,draggables:o},l=pb(t.impact),c=l?s.droppables[l]:null,u=s.draggables[t.critical.draggable.id],d=s.droppables[t.critical.droppable.id],p=_b({draggable:u,home:d,draggables:o,viewport:t.viewport}),f=p.impact,h=p.afterCritical,g=c&&c.isCombineEnabled?t.impact:f,m=vb({pageOffset:t.current.page.offset,draggable:s.draggables[t.critical.draggable.id],draggables:s.draggables,droppables:s.droppables,previousImpact:g,viewport:t.viewport,afterCritical:h}),b=Og({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:m,onLiftImpact:f,dimensions:s,afterCritical:h,forceShouldAnimate:!1});return"COLLECTING"===t.phase?b:Og({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;hb(e)||Xg(!1);var g=t.payload.client;return cm(g,e.current.client.selection)?e:wb({state:e,clientSelection:g,impact:Cb(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return Pb(e);if("COLLECTING"===e.phase)return Pb(e);hb(e)||Xg(!1);var m=t.payload,b=m.id,v=m.newScroll,y=e.dimensions.droppables[b];if(!y)return e;var w=ym(y,v);return Eb(e,w,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;hb(e)||Xg(!1);var S=t.payload,x=S.id,O=S.isEnabled,_=e.dimensions.droppables[x];_||Xg(!1),_.isEnabled===O&&Xg(!1);var C=Og({},_,{isEnabled:O});return Eb(e,C,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;hb(e)||Xg(!1);var E=t.payload,P=E.id,D=E.isCombineEnabled,k=e.dimensions.droppables[P];k||Xg(!1),k.isCombineEnabled===D&&Xg(!1);var T=Og({},k,{isCombineEnabled:D});return Eb(e,T,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;hb(e)||Xg(!1),e.isWindowScrollAllowed||Xg(!1);var R=t.payload.newScroll;if(cm(e.viewport.scroll.current,R))return Pb(e);var j=tb(e.viewport,R);return Cb(e)?Ob({state:e,viewport:j}):wb({state:e,viewport:j})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!hb(e))return e;var I=t.payload.maxScroll;if(cm(I,e.viewport.scroll.max))return e;var A=Og({},e.viewport,{scroll:Og({},e.viewport.scroll,{max:I})});return Og({phase:"DRAGGING"},e,{viewport:A})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&Xg(!1);var L=fb({state:e,type:t.type});return L?wb({state:e,impact:L.impact,clientSelection:L.clientSelection,scrollJumpRequest:L.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var N=t.payload.reason;return"COLLECTING"!==e.phase&&Xg(!1),Og({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:N})}if("DROP_ANIMATE"===t.type){var F=t.payload,M=F.completed,B=F.dropDuration,V=F.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&Xg(!1),{phase:"DROP_ANIMATING",completed:M,dropDuration:B,newHomeClientOffset:V,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},Tb=function(e){return{type:"LIFT",payload:e}},Rb=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},jb=function(){return{type:"COLLECTION_STARTING",payload:null}},Ib=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},Ab=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},Lb=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},Nb=function(e){return{type:"MOVE",payload:e}},Fb=function(){return{type:"MOVE_UP",payload:null}},Mb=function(){return{type:"MOVE_DOWN",payload:null}},Bb=function(){return{type:"MOVE_RIGHT",payload:null}},Vb=function(){return{type:"MOVE_LEFT",payload:null}},zb=function(){return{type:"FLUSH",payload:null}},Wb=function(e){return{type:"DROP_COMPLETE",payload:e}},Hb=function(e){return{type:"DROP",payload:e}},$b="cubic-bezier(.2,1,.1,1)",Ub=0,Gb=.7,qb=.75,Qb="0.2s cubic-bezier(0.2, 0, 0, 1)",Yb={fluid:"opacity "+Qb,snap:"transform "+Qb+", opacity "+Qb,drop:function(e){var t=e+"s "+$b;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Qb,placeholder:"height "+Qb+", width "+Qb+", margin "+Qb},Kb=function(e){return cm(e,om)?null:"translate("+e.x+"px, "+e.y+"px)"},Xb=Kb,Zb=function(e,t){var n=Kb(e);return n?t?n+" scale("+qb+")":n:null},Jb=.33,ev=.55-Jb,tv=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var a=t(),i=r.payload.reason;if("COLLECTING"!==a.phase){if("IDLE"!==a.phase){"DROP_PENDING"===a.phase&&a.isWaiting&&Xg(!1),"DRAGGING"!==a.phase&&"DROP_PENDING"!==a.phase&&Xg(!1);var o=a.critical,s=a.dimensions,l=s.draggables[a.critical.draggable.id],c=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,a=e.home,i=e.viewport,o=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:Og({},r,{displaced:Am}),didDropInsideDroppable:!0}:{impact:Sb({draggables:t,impact:o,destination:a,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),u=c.impact,d=c.didDropInsideDroppable,p=d?km(u):null,f=d?Tm(u):null,h={index:o.draggable.index,droppableId:o.droppable.id},g={draggableId:l.descriptor.id,type:l.descriptor.type,source:h,reason:i,mode:a.movementMode,destination:p,combine:f},m=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,a=e.viewport,i=e.afterCritical,o=r.draggables,s=r.droppables,l=pb(t),c=l?s[l]:null,u=s[n.descriptor.droppableId],d=xb({impact:t,draggable:n,draggables:o,afterCritical:i,droppable:c||u,viewport:a});return lm(d,n.client.borderBox.center)}({impact:u,draggable:l,dimensions:s,viewport:a.viewport,afterCritical:a.afterCritical}),b={critical:a.critical,afterCritical:a.afterCritical,result:g,impact:u};if(!cm(a.current.client.offset,m)||Boolean(g.combine)){var v=function(e){var t=e.reason,n=pm(e.current,e.destination);if(n<=0)return Jb;if(n>=1500)return.55;var r=Jb+ev*(n/1500);return Number(("CANCEL"===t?.6*r:r).toFixed(2))}({current:a.current.client.offset,destination:m,reason:i});n({type:"DROP_ANIMATE",payload:{newHomeClientOffset:m,dropDuration:v,completed:b}})}else n(Wb({completed:b}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:i}))}else e(r)}}},nv=function(){return{x:window.pageXOffset,y:window.pageYOffset}};var rv=function(e){var t=function(e){var t=e.onWindowScroll,n=Wg((function(){t(nv())})),r=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(n),a=Gg;function i(){return a!==Gg}return{start:function(){i()&&Xg(!1),a=qg(window,[r])},stop:function(){i()||Xg(!1),n.cancel(),a(),a=Gg},isActive:i}}({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},av=function(e,t){t()},iv=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},ov=function(e,t,n,r){if(e){var a=function(e){var t=!1,n=!1,r=setTimeout((function(){n=!0})),a=function(a){t||n||(t=!0,e(a),clearTimeout(r))};return a.wasCalled=function(){return t},a}(n);e(t,{announce:a}),a.wasCalled()||n(r(t))}else n(r(t))},sv=function(e,t){var n=function(e,t){var n,r=(n=[],{add:function(e){var t=setTimeout((function(){return function(e){var t=Sm(n,(function(t){return t.timerId===e}));-1===t&&Xg(!1),n.splice(t,1)[0].callback()}(t)})),r={timerId:t,callback:e};n.push(r)},flush:function(){if(n.length){var e=[].concat(n);n.length=0,e.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}),a=null,i=function(n){a||Xg(!1),a=null,av(0,(function(){return ov(e().onDragEnd,n,t,im)}))};return{beforeCapture:function(t,n){a&&Xg(!1),av(0,(function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})}))},beforeStart:function(t,n){a&&Xg(!1),av(0,(function(){var r=e().onBeforeDragStart;r&&r(iv(t,n))}))},start:function(n,i){a&&Xg(!1);var o=iv(n,i);a={mode:i,lastCritical:n,lastLocation:o.source,lastCombine:null},r.add((function(){av(0,(function(){return ov(e().onDragStart,o,t,rm)}))}))},update:function(n,i){var o=km(i),s=Tm(i);a||Xg(!1);var l=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(n,a.lastCritical);l&&(a.lastCritical=n);var c,u,d=(u=o,!(null==(c=a.lastLocation)&&null==u||null!=c&&null!=u&&c.droppableId===u.droppableId&&c.index===u.index));d&&(a.lastLocation=o);var p=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(a.lastCombine,s);if(p&&(a.lastCombine=s),l||d||p){var f=Og({},iv(n,a.mode),{combine:s,destination:o});r.add((function(){av(0,(function(){return ov(e().onDragUpdate,f,t,am)}))}))}},flush:function(){a||Xg(!1),r.flush()},drop:i,abort:function(){if(a){var e=Og({},iv(a.lastCritical,a.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var a=r.payload.critical;return n.beforeStart(a,r.payload.movementMode),t(r),void n.start(a,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var i=r.payload.completed.result;return n.flush(),t(r),void n.drop(i)}if(t(r),"FLUSH"!==r.type){var o=e.getState();"DRAGGING"===o.phase&&n.update(o.critical,o.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},lv=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&Xg(!1),e.dispatch(Wb({completed:r.completed}))}else t(n)}}},cv=function(e){var t=null,n=null;return function(r){return function(a){if("FLUSH"!==a.type&&"DROP_COMPLETE"!==a.type&&"DROP_ANIMATION_FINISHED"!==a.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(a),"DROP_ANIMATE"===a.type){var i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((function(){n=null,t=qg(window,[i])}))}}}},uv=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(Hb({reason:r.reason})))}}}},dv=_g.compose,pv=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,a=e.styleMarshal,i=e.getResponders,o=e.announce,s=e.autoScroller;return(0,_g.createStore)(kb,dv((0,_g.applyMiddleware)((t=a,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(a){if("LIFT"===a.type){var i=a.payload,o=i.id,s=i.clientSelection,l=i.movementMode,c=n();"DROP_ANIMATING"===c.phase&&r(Wb({completed:c.completed})),"IDLE"!==n().phase&&Xg(!1),r(zb()),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:o,movementMode:l}});var u={draggableId:o,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},d=e.startPublishing(u),p=d.critical,f=d.dimensions,h=d.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:p,dimensions:f,clientSelection:s,movementMode:l,viewport:h}})}else t(a)}}}}(n),tv,lv,cv,uv,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var a=t.getState();return"DRAGGING"!==a.phase&&Xg(!1),void e.start(a)}n(r),e.scroll(t.getState())}}}}(s),rv,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var a=r.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),sv(i,o))))},fv=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,a=e.width,i=lm({x:n,y:t},{x:a,y:r});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},hv=function(){var e=document.documentElement;return e||Xg(!1),e},gv=function(){var e=hv();return fv({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})};function mv(e,t,n){return n.descriptor.id!==t.id&&n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode}var bv,vv,yv=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},a=null,i=function(){a||(n.collectionStarting(),a=requestAnimationFrame((function(){a=null;var e=r,i=e.additions,o=e.removals,s=e.modified,l=Object.keys(i).map((function(e){return t.draggable.getById(e).getDimension(om)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),c=Object.keys(s).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),u={additions:l,removals:Object.keys(o),modified:c};r={additions:{},removals:{},modified:{}},n.publish(u)})))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],i()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],i()},stop:function(){a&&(cancelAnimationFrame(a),a=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=function(t){n||Xg(!1);var a=n.critical.draggable;"ADDITION"===t.type&&mv(e,a,t.value)&&r.add(t.value),"REMOVAL"===t.type&&mv(e,a,t.value)&&r.remove(t.value)},i={updateDroppableIsEnabled:function(r,a){e.droppable.exists(r)||Xg(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:a})},updateDroppableIsCombineEnabled:function(r,a){n&&(e.droppable.exists(r)||Xg(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:a}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,a){n&&(e.droppable.exists(r)||Xg(!1),t.updateDroppableScroll({id:r,newScroll:a}))},startPublishing:function(t){n&&Xg(!1);var r=e.draggable.getById(t.draggableId),i=e.droppable.getById(r.descriptor.droppableId),o={draggable:r.descriptor,droppable:i.descriptor},s=e.subscribe(a);return n={critical:o,unsubscribe:s},function(e){var t,n,r,a,i,o,s,l=e.critical,c=e.scrollOptions,u=e.registry,d=(t=nv(),n=gv(),r=t.y,a=t.x,o=(i=hv()).clientWidth,s=i.clientHeight,{frame:kg({top:r,left:a,right:a+o,bottom:r+s}),scroll:{initial:t,current:t,max:n,diff:{value:om,displacement:om}}}),p=d.scroll.current,f=l.droppable,h=u.droppable.getAllByType(f.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(p,c)})),g=u.draggable.getAllByType(l.draggable.type).map((function(e){return e.getDimension(p)}));return{dimensions:{draggables:Cm(g),droppables:_m(h)},critical:l,viewport:d}}({critical:o,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),n.unsubscribe(),n=null}}};return i},wv=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason},Sv=function(e){window.scrollBy(e.x,e.y)},xv=zg((function(e){return Em(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),Ov=function(e){return Math.pow(e,2)},_v=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,a=n-t;return 0===a?0:(r-t)/a},Cv=360,Ev=1200,Pv=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,a=e.shouldUseTimeDampening,i=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return 28;if(e===t.startScrollingFrom)return 1;var n=_v({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=28*Ov(1-n);return Math.ceil(r)}(t,n);return 0===i?0:a?Math.max(function(e,t){var n=t,r=Ev,a=Date.now()-n;if(a>=Ev)return e;if(a<Cv)return 1;var i=_v({startOfRange:Cv,endOfRange:r,current:a}),o=e*Ov(i);return Math.ceil(o)}(i,r),1):i},Dv=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,a=e.axis,i=e.shouldUseTimeDampening,o=function(e,t){return{startScrollingFrom:.25*e[t.size],maxScrollValueAt:.05*e[t.size]}}(t,a);return n[a.end]<n[a.start]?Pv({distanceToEdge:n[a.end],thresholds:o,dragStartTime:r,shouldUseTimeDampening:i}):-1*Pv({distanceToEdge:n[a.start],thresholds:o,dragStartTime:r,shouldUseTimeDampening:i})},kv=hm((function(e){return 0===e?0:e})),Tv=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,a=e.center,i=e.shouldUseTimeDampening,o={top:a.y-n.top,right:n.right-a.x,bottom:n.bottom-a.y,left:a.x-n.left},s=Dv({container:n,distanceToEdges:o,dragStartTime:t,axis:Bm,shouldUseTimeDampening:i}),l=Dv({container:n,distanceToEdges:o,dragStartTime:t,axis:Vm,shouldUseTimeDampening:i}),c=kv({x:l,y:s});if(cm(c,om))return null;var u=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,a=n.height>t.height,i=n.width>t.width;return i||a?i&&a?null:{x:i?0:r.x,y:a?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return u?cm(u,om)?null:u:null},Rv=hm((function(e){return 0===e?0:e>0?1:-1})),jv=(bv=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,n=e.max,r=e.change,a=sm(t,r),i={x:bv(a.x,n.x),y:bv(a.y,n.y)};return cm(i,om)?null:i}),Iv=function(e){var t=e.max,n=e.current,r=e.change,a={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},i=Rv(r),o=jv({max:a,current:n,change:i});return!o||0!==i.x&&0===o.x||0!==i.y&&0===o.y},Av=function(e,t){return Iv({current:e.scroll.current,max:e.scroll.max,change:t})},Lv=function(e,t){var n=e.frame;return!!n&&Iv({current:n.scroll.current,max:n.scroll.max,change:t})},Nv=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,a=e.scrollWindow,i=e.scrollDroppable,o=t.current.page.borderBoxCenter,s=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,n=e.subject,r=e.center,a=e.shouldUseTimeDampening,i=Tv({dragStartTime:e.dragStartTime,container:t.frame,subject:n,center:r,shouldUseTimeDampening:a});return i&&Av(t,i)?i:null}({dragStartTime:n,viewport:t.viewport,subject:s,center:o,shouldUseTimeDampening:r});if(l)return void a(l)}var c=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var a=r[n];return a.frame?a:null}var i=function(e,t){var n=xm(xv(t),(function(t){return t.frame||Xg(!1),gb(t.frame.pageMarginBox)(e)}));return n}(t,r);return i}({center:o,destination:pb(t.impact),droppables:t.dimensions.droppables});if(c){var u=function(e){var t=e.droppable,n=e.subject,r=e.center,a=e.dragStartTime,i=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var s=Tv({dragStartTime:a,container:o.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:i});return s&&Lv(t,s)?s:null}({dragStartTime:n,droppable:c,subject:s,center:o,shouldUseTimeDampening:r});u&&i(c.descriptor.id,u)}},Fv=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow;return function(e){var a=e.scrollJumpRequest;if(a){var i=pb(e.impact);i||Xg(!1);var o=function(e,t){if(!Lv(e,t))return t;var r=function(e,t){var n=e.frame;return n&&Lv(e,t)?jv({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var a=lm(t,r);return n(e.descriptor.id,a),lm(t,a)}(e.dimensions.droppables[i],a);if(o){var s=e.viewport,l=function(e,t,n){if(!e)return n;if(!Av(t,n))return n;var a=function(e,t){if(!Av(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return jv({current:r,max:n,change:t})}(t,n);if(!a)return r(n),null;var i=lm(n,a);return r(i),lm(n,i)}(e.isWindowScrollAllowed,s,o);l&&function(e,n){var r=sm(e.current.client.selection,n);t({client:r})}(e,l)}}}},Mv=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,a=function(e){var t=e.scrollDroppable,n=Wg(e.scrollWindow),r=Wg(t),a=null,i=function(e){a||Xg(!1);var t=a,i=t.shouldUseTimeDampening,o=t.dragStartTime;Nv({state:e,scrollWindow:n,scrollDroppable:r,dragStartTime:o,shouldUseTimeDampening:i})};return{start:function(e){a&&Xg(!1);var t=Date.now(),n=!1,r=function(){n=!0};Nv({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),a={dragStartTime:t,shouldUseTimeDampening:n},n&&i(e)},stop:function(){a&&(n.cancel(),r.cancel(),a=null)},scroll:i}}({scrollWindow:n,scrollDroppable:t}),i=Fv({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&i(e):a.scroll(e))},start:a.start,stop:a.stop}},Bv="data-rbd",Vv={base:vv=Bv+"-drag-handle",draggableId:vv+"-draggable-id",contextId:vv+"-context-id"},zv=function(){var e=Bv+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Wv=function(){var e=Bv+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Hv={contextId:Bv+"-scroll-container-context-id"},$v=function(e,t){return e.map((function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""})).join(" ")},Uv=function(e){var t,n,r=function(e){return function(t){return"["+t+'="'+e+'"]'}}(e),a=(t="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:r(Vv.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:t,dragging:"pointer-events: none;",dropAnimating:t}}),i=[(n="\n      transition: "+Yb.outOfTheWay+";\n    ",{selector:r(zv.contextId),styles:{dragging:n,dropAnimating:n,userCancel:n}}),a,{selector:r(Wv.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:$v(i,"always"),resting:$v(i,"resting"),dragging:$v(i,"dragging"),dropAnimating:$v(i,"dropAnimating"),userCancel:$v(i,"userCancel")}},Gv="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?t.useLayoutEffect:t.useEffect,qv=function(){var e=document.querySelector("head");return e||Xg(!1),e},Qv=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t},Yv=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Kv(e){return e instanceof Yv(e).HTMLElement}function Xv(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach((function(t){return t(e)}))}function r(t){return e.draggables[t]||null}function a(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var a=t.descriptor.id,i=r(a);i&&t.uniqueId===i.uniqueId&&(delete e.draggables[a],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||Xg(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return wm(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=a(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=a(e);return t||Xg(!1),t},findById:a,exists:function(e){return Boolean(a(e))},getAllByType:function(t){return wm(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var Zv=n().createContext(null),Jv=function(){var e=document.body;return e||Xg(!1),e},ey={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},ty=function(e){return"rbd-announcement-"+e},ny=0,ry={separator:"::"};function ay(e,t){return void 0===t&&(t=ry),Pg((function(){return""+e+t.separator+ny++}),[t.separator,e])}var iy=n().createContext(null);function oy(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e})),n}var sy,ly,cy=((sy={})[13]=!0,sy[9]=!0,sy),uy=function(e){cy[e.keyCode]&&e.preventDefault()},dy=function(){var e="visibilitychange";return"undefined"==typeof document?e:xm([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}(),py={type:"IDLE"};function fy(){}var hy=((ly={})[34]=!0,ly[33]=!0,ly[36]=!0,ly[35]=!0,ly);var gy={type:"IDLE"},my={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function by(e,t){if(null==t)return!1;if(Boolean(my[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&by(e,t.parentElement)}function vy(e,t){var n=t.target;return!!Kv(n)&&by(e,n)}var yy=function(e){return kg(e.getBoundingClientRect()).center},wy=function(){var e="matches";return"undefined"==typeof document?e:xm([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function Sy(e,t){return null==e?null:e[wy](t)?e:Sy(e.parentElement,t)}function xy(e,t){return e.closest?e.closest(t):Sy(e,t)}function Oy(e){e.preventDefault()}function _y(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,!!r()&&t===n}function Cy(e){var t=e.lockAPI,n=e.store,r=e.registry,a=e.draggableId;if(t.isClaimed())return!1;var i=r.draggable.findById(a);return!!i&&!!i.options.isEnabled&&!!wv(n.getState(),a)}var Ey=[function(e){var n=(0,t.useRef)(py),r=(0,t.useRef)(Gg),a=Pg((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var n=e.findClosestDraggableId(t);if(n){var a=e.tryGetLock(n,s,{sourceEvent:t});if(a){t.preventDefault();var i={x:t.clientX,y:t.clientY};r.current(),u(a,i)}}}}}}),[e]),i=Pg((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}}),[e]),o=Dg((function(){r.current=qg(window,[i,a],{passive:!1,capture:!0})}),[i,a]),s=Dg((function(){"IDLE"!==n.current.type&&(n.current=py,r.current(),o())}),[o]),l=Dg((function(){var e=n.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[s]),c=Dg((function(){var e=function(e){var t=e.cancel,n=e.completed,r=e.getPhase,a=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,i=e.clientY;if(0===t){var o={x:n,y:i},s=r();if("DRAGGING"===s.type)return e.preventDefault(),void s.actions.move(o);if("PENDING"!==s.type&&Xg(!1),l=s.point,c=o,Math.abs(c.x-l.x)>=5||Math.abs(c.y-l.y)>=5){var l,c;e.preventDefault();var u=s.actions.fluidLift(o);a({type:"DRAGGING",actions:u})}}}},{eventName:"mouseup",fn:function(e){var a=r();"DRAGGING"===a.type?(e.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void uy(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&Xg(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:dy,fn:t}]}({cancel:l,completed:s,getPhase:function(){return n.current},setPhase:function(e){n.current=e}});r.current=qg(window,e,{capture:!0,passive:!1})}),[l,s]),u=Dg((function(e,t){"IDLE"!==n.current.type&&Xg(!1),n.current={type:"PENDING",point:t,actions:e},c()}),[c]);Gv((function(){return o(),function(){r.current()}}),[o])},function(e){var n=(0,t.useRef)(fy),r=Pg((function(){return{eventName:"keydown",fn:function(t){if(!t.defaultPrevented&&32===t.keyCode){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,l,{sourceEvent:t});if(i){t.preventDefault();var o=!0,s=i.snapLift();n.current(),n.current=qg(window,function(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(hy[r.keyCode]?r.preventDefault():uy(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:dy,fn:n}]}(s,l),{capture:!0,passive:!1})}}}function l(){o||Xg(!1),o=!1,n.current(),a()}}}}),[e]),a=Dg((function(){n.current=qg(window,[r],{passive:!1,capture:!0})}),[r]);Gv((function(){return a(),function(){n.current()}}),[a])},function(e){var n=(0,t.useRef)(gy),r=(0,t.useRef)(Gg),a=Dg((function(){return n.current}),[]),i=Dg((function(e){n.current=e}),[]),o=Pg((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var a=e.tryGetLock(n,l,{sourceEvent:t});if(a){var i=t.touches[0],o={x:i.clientX,y:i.clientY};r.current(),p(a,o)}}}}}}),[e]),s=Dg((function(){r.current=qg(window,[o],{capture:!0,passive:!1})}),[o]),l=Dg((function(){var e=n.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),i(gy),r.current(),s())}),[s,i]),c=Dg((function(){var e=n.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),u=Dg((function(){var e={capture:!0,passive:!1},t={cancel:c,completed:l,getPhase:a},n=qg(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var a=e.touches[0],i={x:a.clientX,y:a.clientY};e.preventDefault(),n.actions.move(i)}else t()}},{eventName:"touchend",fn:function(e){var a=r();"DRAGGING"===a.type?(e.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&Xg(!1);var a=e.touches[0];if(a&&a.force>=.15){var i=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return i?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();i&&t()}}},{eventName:dy,fn:t}]}(t),e),i=qg(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:dy,fn:t}]}(t),e);r.current=function(){n(),i()}}),[c,a,l]),d=Dg((function(){var e=a();"PENDING"!==e.type&&Xg(!1);var t=e.actions.fluidLift(e.point);i({type:"DRAGGING",actions:t,hasMoved:!1})}),[a,i]),p=Dg((function(e,t){"IDLE"!==a().type&&Xg(!1);var n=setTimeout(d,120);i({type:"PENDING",point:t,actions:e,longPressTimerId:n}),u()}),[u,a,i,d]);Gv((function(){return s(),function(){r.current();var e=a();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),i(gy))}}),[a,s,i]),Gv((function(){return qg(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function Py(e){var n=e.contextId,r=e.store,a=e.registry,i=e.customSensors,o=e.enableDefaultSensors,s=[].concat(o?Ey:[],i||[]),l=(0,t.useState)((function(){return function(){var e=null;function t(){e||Xg(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&Xg(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],c=Dg((function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()}),[l]);Gv((function(){var e=r.getState();return r.subscribe((function(){var t=r.getState();c(e,t),e=t}))}),[l,r,c]),Gv((function(){return l.tryAbandon}),[l.tryAbandon]);for(var u=Dg((function(e){return Cy({lockAPI:l,registry:a,store:r,draggableId:e})}),[l,a,r]),d=Dg((function(e,t,i){return function(e){var t=e.lockAPI,n=e.contextId,r=e.store,a=e.registry,i=e.draggableId,o=e.forceSensorStop,s=e.sourceEvent;if(!Cy({lockAPI:t,store:r,registry:a,draggableId:i}))return null;var l=a.draggable.getById(i),c=function(e,t){var n="["+zv.contextId+'="'+e+'"]',r=xm(Om(document.querySelectorAll(n)),(function(e){return e.getAttribute(zv.id)===t}));return r&&Kv(r)?r:null}(n,l.descriptor.id);if(!c)return null;if(s&&!l.options.canDragInteractiveElements&&vy(c,s))return null;var u=t.claim(o||Gg),d="PRE_DRAG";function p(){return l.options.shouldRespectForcePress}function f(){return t.isActive(u)}var h=function(e,t){_y({expected:e,phase:d,isLockActive:f,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function g(e){function n(){t.release(),d="COMPLETED"}function a(t,a){if(void 0===a&&(a={shouldBlockNextClick:!1}),e.cleanup(),a.shouldBlockNextClick){var i=qg(window,[{eventName:"click",fn:Oy,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(i)}n(),r.dispatch(Hb({reason:t}))}return"PRE_DRAG"!==d&&(n(),"PRE_DRAG"!==d&&Xg(!1)),r.dispatch(Tb(e.liftActionArgs)),d="DRAGGING",Og({isActive:function(){return _y({expected:"DRAGGING",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,drop:function(e){return a("DROP",e)},cancel:function(e){return a("CANCEL",e)}},e.actions)}return{isActive:function(){return _y({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!1})},shouldRespectForcePress:p,fluidLift:function(e){var t=Wg((function(e){h((function(){return Nb({client:e})}))}));return Og({},g({liftActionArgs:{id:i,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return h(Fb)},moveRight:function(){return h(Bb)},moveDown:function(){return h(Mb)},moveLeft:function(){return h(Vb)}};return g({liftActionArgs:{id:i,clientSelection:yy(c),movementMode:"SNAP"},cleanup:Gg,actions:e})},abort:function(){_y({expected:"PRE_DRAG",phase:d,isLockActive:f,shouldWarn:!0})&&t.release()}}}({lockAPI:l,registry:a,contextId:n,store:r,draggableId:e,forceSensorStop:t,sourceEvent:i&&i.sourceEvent?i.sourceEvent:null})}),[n,l,a,r]),p=Dg((function(e){return function(e,t){var n=function(e,t){var n,r=t.target;if(!((n=r)instanceof Yv(n).Element))return null;var a=function(e){return"["+Vv.contextId+'="'+e+'"]'}(e),i=xy(r,a);return i&&Kv(i)?i:null}(e,t);return n?n.getAttribute(Vv.draggableId):null}(n,e)}),[n]),f=Dg((function(e){var t=a.draggable.findById(e);return t?t.options:null}),[a.draggable]),h=Dg((function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==r.getState().phase&&r.dispatch(zb()))}),[l,r]),g=Dg(l.isClaimed,[l]),m=Pg((function(){return{canGetLock:u,tryGetLock:d,findClosestDraggableId:p,findOptionsForDraggable:f,tryReleaseLock:h,isLockClaimed:g}}),[u,d,p,f,h,g]),b=0;b<s.length;b++)s[b](m)}var Dy=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function ky(e){return e.current||Xg(!1),e.current}function Ty(e){var r=e.contextId,a=e.setCallbacks,i=e.sensors,o=e.nonce,s=e.dragHandleUsageInstructions,l=(0,t.useRef)(null),c=oy(e),u=Dg((function(){return Dy(c.current)}),[c]),d=function(e){var n=Pg((function(){return ty(e)}),[e]),r=(0,t.useRef)(null);return(0,t.useEffect)((function(){var e=document.createElement("div");return r.current=e,e.id=n,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),Og(e.style,ey),Jv().appendChild(e),function(){setTimeout((function(){var t=Jv();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)}))}}),[n]),Dg((function(e){var t=r.current;t&&(t.textContent=e)}),[])}(r),p=function(e){var n=e.contextId,r=e.text,a=ay("hidden-text",{separator:"-"}),i=Pg((function(){return function(e){return"rbd-hidden-text-"+e.contextId+"-"+e.uniqueId}({contextId:n,uniqueId:a})}),[a,n]);return(0,t.useEffect)((function(){var e=document.createElement("div");return e.id=i,e.textContent=r,e.style.display="none",Jv().appendChild(e),function(){var t=Jv();t.contains(e)&&t.removeChild(e)}}),[i,r]),i}({contextId:r,text:s}),f=function(e,n){var r=Pg((function(){return Uv(e)}),[e]),a=(0,t.useRef)(null),i=(0,t.useRef)(null),o=Dg(zg((function(e){var t=i.current;t||Xg(!1),t.textContent=e})),[]),s=Dg((function(e){var t=a.current;t||Xg(!1),t.textContent=e}),[]);Gv((function(){(a.current||i.current)&&Xg(!1);var t=Qv(n),l=Qv(n);return a.current=t,i.current=l,t.setAttribute(Bv+"-always",e),l.setAttribute(Bv+"-dynamic",e),qv().appendChild(t),qv().appendChild(l),s(r.always),o(r.resting),function(){var e=function(e){var t=e.current;t||Xg(!1),qv().removeChild(t),e.current=null};e(a),e(i)}}),[n,s,o,r.always,r.resting,e]);var l=Dg((function(){return o(r.dragging)}),[o,r.dragging]),c=Dg((function(e){o("DROP"!==e?r.userCancel:r.dropAnimating)}),[o,r.dropAnimating,r.userCancel]),u=Dg((function(){i.current&&o(r.resting)}),[o,r.resting]);return Pg((function(){return{dragging:l,dropping:c,resting:u}}),[l,c,u])}(r,o),h=Dg((function(e){ky(l).dispatch(e)}),[]),g=Pg((function(){return(0,_g.bindActionCreators)({publishWhileDragging:Rb,updateDroppableScroll:Ib,updateDroppableIsEnabled:Ab,updateDroppableIsCombineEnabled:Lb,collectionStarting:jb},h)}),[h]),m=function(){var e=Pg(Xv,[]);return(0,t.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),b=Pg((function(){return yv(m,g)}),[m,g]),v=Pg((function(){return Mv(Og({scrollWindow:Sv,scrollDroppable:b.scrollDroppable},(0,_g.bindActionCreators)({move:Nb},h)))}),[b.scrollDroppable,h]),y=function(e){var n=(0,t.useRef)({}),r=(0,t.useRef)(null),a=(0,t.useRef)(null),i=(0,t.useRef)(!1),o=Dg((function(e,t){var r={id:e,focus:t};return n.current[e]=r,function(){var t=n.current;t[e]!==r&&delete t[e]}}),[]),s=Dg((function(t){var n=function(e,t){var n="["+Vv.contextId+'="'+e+'"]',r=Om(document.querySelectorAll(n));if(!r.length)return null;var a=xm(r,(function(e){return e.getAttribute(Vv.draggableId)===t}));return a&&Kv(a)?a:null}(e,t);n&&n!==document.activeElement&&n.focus()}),[e]),l=Dg((function(e,t){r.current===e&&(r.current=t)}),[]),c=Dg((function(){a.current||i.current&&(a.current=requestAnimationFrame((function(){a.current=null;var e=r.current;e&&s(e)})))}),[s]),u=Dg((function(e){r.current=null;var t=document.activeElement;t&&t.getAttribute(Vv.draggableId)===e&&(r.current=e)}),[]);return Gv((function(){return i.current=!0,function(){i.current=!1;var e=a.current;e&&cancelAnimationFrame(e)}}),[]),Pg((function(){return{register:o,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}}),[o,u,c,l])}(r),w=Pg((function(){return pv({announce:d,autoScroller:v,dimensionMarshal:b,focusMarshal:y,getResponders:u,styleMarshal:f})}),[d,v,b,y,u,f]);l.current=w;var S=Dg((function(){var e=ky(l);"IDLE"!==e.getState().phase&&e.dispatch(zb())}),[]),x=Dg((function(){var e=ky(l).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);a(Pg((function(){return{isDragging:x,tryAbort:S}}),[x,S]));var O=Dg((function(e){return wv(ky(l).getState(),e)}),[]),_=Dg((function(){return hb(ky(l).getState())}),[]),C=Pg((function(){return{marshal:b,focus:y,contextId:r,canLift:O,isMovementAllowed:_,dragHandleUsageInstructionsId:p,registry:m}}),[r,b,p,y,O,_,m]);return Py({contextId:r,store:w,registry:m,customSensors:i,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,t.useEffect)((function(){return S}),[S]),n().createElement(iy.Provider,{value:C},n().createElement(Cg.Provider,{context:Zv,store:w},e.children))}var Ry=0;function jy(e){var t=Pg((function(){return""+Ry++}),[]),r=e.dragHandleUsageInstructions||"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n";return n().createElement(Zg,null,(function(a){return n().createElement(Ty,{nonce:e.nonce,contextId:t,setCallbacks:a,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var Iy=function(e){return function(t){return e===t}},Ay=Iy("scroll"),Ly=Iy("auto"),Ny=(Iy("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),Fy=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Ny(n,Ay)||Ny(n,Ly)}(t)?t:e(t.parentElement)},My=function(e){return{x:e.scrollLeft,y:e.scrollTop}},By=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},Vy={passive:!1},zy={passive:!0},Wy=function(e){return e.shouldPublishImmediately?Vy:zy};function Hy(e){var n=(0,t.useContext)(e);return n||Xg(!1),n}var $y=function(e){return e&&e.env.closestScrollable||null};function Uy(){}var Gy={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},qy=n().memo((function(e){var r=(0,t.useRef)(null),a=Dg((function(){r.current&&(clearTimeout(r.current),r.current=null)}),[]),i=e.animate,o=e.onTransitionEnd,s=e.onClose,l=e.contextId,c=(0,t.useState)("open"===e.animate),u=c[0],d=c[1];(0,t.useEffect)((function(){return u?"open"!==i?(a(),d(!1),Uy):r.current?Uy:(r.current=setTimeout((function(){r.current=null,d(!1)})),a):Uy}),[i,u,a]);var p=Dg((function(e){"height"===e.propertyName&&(o(),"close"===i&&s())}),[i,s,o]),f=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,a=function(e){var t=e.placeholder;return e.isAnimatingOpenOnMount||"close"===e.animate?Gy:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?Yb.placeholder:null}}({isAnimatingOpenOnMount:u,animate:e.animate,placeholder:e.placeholder});return n().createElement(e.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":l,onTransitionEnd:p,ref:e.innerRef})})),Qy=n().createContext(null),Yy=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return xg(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(n().PureComponent),Ky=5e3,Xy=4500,Zy=function(e,t){return t?Yb.drop(t.duration):e?Yb.snap:Yb.fluid},Jy=function(e,t){return e?t?Ub:Gb:null};function ew(e){e.preventDefault()}var tw=function(e,t){return e===t},nw=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function rw(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var aw={mapped:{type:"SECONDARY",offset:om,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:rw(null)}},iw={dropAnimationFinished:function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}}},ow=(0,Cg.connect)((function(){var e,t,n,r=(e=zg((function(e,t){return{x:e,y:t}})),t=zg((function(e,t,n,r,a){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(a),dropAnimation:a,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}})),n=zg((function(e,n,r,a,i,o,s){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:i,combineWith:o,mode:n,offset:e,dimension:r,forceShouldAnimate:s,snapshot:t(n,a,i,o,null)}}})),function(r,a){if(r.isDragging){if(r.critical.draggable.id!==a.draggableId)return null;var i=r.current.client.offset,o=r.dimensions.draggables[a.draggableId],s=pb(r.impact),l=(u=r.impact).at&&"COMBINE"===u.at.type?u.at.combine.draggableId:null,c=r.forceShouldAnimate;return n(e(i.x,i.y),r.movementMode,o,a.isClone,s,l,c)}var u;if("DROP_ANIMATING"===r.phase){var d=r.completed;if(d.result.draggableId!==a.draggableId)return null;var p=a.isClone,f=r.dimensions.draggables[a.draggableId],h=d.result,g=h.mode,m=nw(h),b=function(e){return e.combine?e.combine.draggableId:null}(h),v={duration:r.dropDuration,curve:$b,moveTo:r.newHomeClientOffset,opacity:b?Ub:null,scale:b?qb:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:f,dropping:v,draggingOver:m,combineWith:b,mode:g,forceShouldAnimate:null,snapshot:t(g,p,m,b,v)}}}return null}),a=function(){var e=zg((function(e,t){return{x:e,y:t}})),t=zg(rw),n=zg((function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}})),r=function(e){return e?n(om,e,!0):null},a=function(t,a,i,o){var s=i.displaced.visible[t],l=Boolean(o.inVirtualList&&o.effected[t]),c=Tm(i),u=c&&c.draggableId===t?a:null;if(!s){if(!l)return r(u);if(i.displaced.invisible[t])return null;var d=um(o.displacedBy.point),p=e(d.x,d.y);return n(p,u,!0)}if(l)return r(u);var f=i.displacedBy.point,h=e(f.x,f.y);return n(h,u,s.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:a(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:a(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(e,t){return r(e,t)||a(e,t)||aw}}),iw,null,{context:Zv,pure:!0,areStatePropsEqual:tw})((function(e){var n=(0,t.useRef)(null),r=Dg((function(e){n.current=e}),[]),a=Dg((function(){return n.current}),[]),i=Hy(iy),o=i.contextId,s=i.dragHandleUsageInstructionsId,l=i.registry,c=Hy(Qy),u=c.type,d=c.droppableId,p=Pg((function(){return{id:e.draggableId,index:e.index,type:u,droppableId:d}}),[e.draggableId,e.index,u,d]),f=e.children,h=e.draggableId,g=e.isEnabled,m=e.shouldRespectForcePress,b=e.canDragInteractiveElements,v=e.isClone,y=e.mapped,w=e.dropAnimationFinished;v||function(e){var n=ay("draggable"),r=e.descriptor,a=e.registry,i=e.getDraggableRef,o=e.canDragInteractiveElements,s=e.shouldRespectForcePress,l=e.isEnabled,c=Pg((function(){return{canDragInteractiveElements:o,shouldRespectForcePress:s,isEnabled:l}}),[o,l,s]),u=Dg((function(e){var t=i();return t||Xg(!1),function(e,t,n){void 0===n&&(n=om);var r=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=Fg(a,r),o=Ng(i,n);return{descriptor:e,placeholder:{client:i,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:i.marginBox.width,y:i.marginBox.height},client:i,page:o}}(r,t,e)}),[r,i]),d=Pg((function(){return{uniqueId:n,descriptor:r,options:c,getDimension:u}}),[r,u,c,n]),p=(0,t.useRef)(d),f=(0,t.useRef)(!0);Gv((function(){return a.draggable.register(p.current),function(){return a.draggable.unregister(p.current)}}),[a.draggable]),Gv((function(){if(f.current)f.current=!1;else{var e=p.current;p.current=d,a.draggable.update(d,e)}}),[d,a.draggable])}(Pg((function(){return{descriptor:p,registry:l,getDraggableRef:a,canDragInteractiveElements:b,shouldRespectForcePress:m,isEnabled:g}}),[p,l,a,b,m,g]));var S=Pg((function(){return g?{tabIndex:0,role:"button","aria-describedby":s,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:ew}:null}),[o,s,h,g]),x=Dg((function(e){"DRAGGING"===y.type&&y.dropping&&"transform"===e.propertyName&&w()}),[w,y]),O=Pg((function(){var e=function(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,a=e.dropping,i=Boolean(r),o=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),s=Boolean(a),l=s?Zb(n,i):Xb(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:Zy(o,a),transform:l,opacity:Jy(i,s),zIndex:s?Xy:Ky,pointerEvents:"none"}}(e):{transform:Xb((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}(y),t="DRAGGING"===y.type&&y.dropping?x:null;return{innerRef:r,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:S}}),[o,S,h,y,x,r]),_=Pg((function(){return{draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}}),[p.droppableId,p.id,p.index,p.type]);return f(O,y.snapshot,_)}));function sw(e){return Hy(Qy).isUsingCloneFor!==e.draggableId||e.isClone?n().createElement(ow,e):null}function lw(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,r=Boolean(e.disableInteractiveElementBlocking),a=Boolean(e.shouldRespectForcePress);return n().createElement(sw,Og({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:a}))}var cw=function(e,t){return e===t.droppable.type},uw=function(e,t){return t.draggables[e.draggable.id]},dw={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||Xg(!1),document.body}},pw=(0,Cg.connect)((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=Og({},e,{shouldAnimatePlaceholder:!1}),n=zg((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),r=zg((function(r,a,i,o,s,l){var c=s.descriptor.id;if(s.descriptor.droppableId===r){var u=l?{render:l,dragging:n(s.descriptor)}:null,d={isDraggingOver:i,draggingOverWith:i?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:d,useClone:u}}if(!a)return t;if(!o)return e;var p={isDraggingOver:i,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}}));return function(n,a){var i=a.droppableId,o=a.type,s=!a.isDropDisabled,l=a.renderClone;if(n.isDragging){var c=n.critical;if(!cw(o,c))return t;var u=uw(c,n.dimensions),d=pb(n.impact)===i;return r(i,s,d,d,u,l)}if("DROP_ANIMATING"===n.phase){var p=n.completed;if(!cw(o,p.critical))return t;var f=uw(p.critical,n.dimensions);return r(i,s,nw(p.result)===i,pb(p.impact)===i,f,l)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var h=n.completed;if(!cw(o,h.critical))return t;var g=pb(h.impact)===i,m=Boolean(h.impact.at&&"COMBINE"===h.impact.at.type),b=h.critical.droppable.id===i;return g?m?e:t:b?e:t}return t}}),{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:Zv,pure:!0,areStatePropsEqual:tw})((function(e){var r=(0,t.useContext)(iy);r||Xg(!1);var a=r.contextId,i=r.isMovementAllowed,o=(0,t.useRef)(null),s=(0,t.useRef)(null),l=e.children,c=e.droppableId,u=e.type,d=e.mode,p=e.direction,f=e.ignoreContainerClipping,h=e.isDropDisabled,g=e.isCombineEnabled,m=e.snapshot,b=e.useClone,v=e.updateViewportMaxScroll,y=e.getContainerForClone,w=Dg((function(){return o.current}),[]),S=Dg((function(e){o.current=e}),[]),x=(Dg((function(){return s.current}),[]),Dg((function(e){s.current=e}),[])),O=Dg((function(){i()&&v({maxScroll:gv()})}),[i,v]);!function(e){var n=(0,t.useRef)(null),r=Hy(iy),a=ay("droppable"),i=r.registry,o=r.marshal,s=oy(e),l=Pg((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),c=(0,t.useRef)(l),u=Pg((function(){return zg((function(e,t){n.current||Xg(!1);var r={x:e,y:t};o.updateDroppableScroll(l.id,r)}))}),[l.id,o]),d=Dg((function(){var e=n.current;return e&&e.env.closestScrollable?My(e.env.closestScrollable):om}),[]),p=Dg((function(){var e=d();u(e.x,e.y)}),[d,u]),f=Pg((function(){return Wg(p)}),[p]),h=Dg((function(){var e=n.current,t=$y(e);e&&t||Xg(!1),e.scrollOptions.shouldPublishImmediately?p():f()}),[f,p]),g=Dg((function(e,t){n.current&&Xg(!1);var a=s.current,i=a.getDroppableRef();i||Xg(!1);var o=function(e){return{closestScrollable:Fy(e),isFixedOnPage:By(e)}}(i),c={ref:i,descriptor:l,env:o,scrollOptions:t};n.current=c;var u=function(e){var t=e.ref,n=e.descriptor,r=e.env,a=e.windowScroll,i=e.direction,o=e.isDropDisabled,s=e.isCombineEnabled,l=e.shouldClipSubject,c=r.closestScrollable,u=function(e,t){var n=Mg(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,i=r+t.scrollHeight,o=a+t.scrollWidth,s=Tg({top:r,right:o,bottom:i,left:a},n.border);return Ig({borderBox:s,margin:n.margin,border:n.border,padding:n.padding})}(t,c),d=Ng(u,a),p=function(){if(!c)return null;var e=Mg(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:Ng(e,a),scroll:My(c),scrollSize:t,shouldClipSubject:l}}(),f=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,a=e.isFixedOnPage,i=e.direction,o=e.client,s=e.page,l=e.closest,c=function(){if(!l)return null;var e=l.scrollSize,t=l.client,n=fv({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:n,diff:{value:om,displacement:om}}}}(),u="vertical"===i?Bm:Vm;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:a,axis:u,isEnabled:n,client:o,page:s,frame:c,subject:vm({page:s,withPlaceholder:null,axis:u,frame:c})}}({descriptor:n,isEnabled:!o,isCombineEnabled:s,isFixedOnPage:r.isFixedOnPage,direction:i,client:u,page:d,closest:p});return f}({ref:i,descriptor:l,env:o,windowScroll:e,direction:a.direction,isDropDisabled:a.isDropDisabled,isCombineEnabled:a.isCombineEnabled,shouldClipSubject:!a.ignoreContainerClipping}),d=o.closestScrollable;return d&&(d.setAttribute(Hv.contextId,r.contextId),d.addEventListener("scroll",h,Wy(c.scrollOptions))),u}),[r.contextId,l,h,s]),m=Dg((function(){var e=n.current,t=$y(e);return e&&t||Xg(!1),My(t)}),[]),b=Dg((function(){var e=n.current;e||Xg(!1);var t=$y(e);n.current=null,t&&(f.cancel(),t.removeAttribute(Hv.contextId),t.removeEventListener("scroll",h,Wy(e.scrollOptions)))}),[h,f]),v=Dg((function(e){var t=n.current;t||Xg(!1);var r=$y(t);r||Xg(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x}),[]),y=Pg((function(){return{getDimensionAndWatchScroll:g,getScrollWhileDragging:m,dragStopped:b,scroll:v}}),[b,g,m,v]),w=Pg((function(){return{uniqueId:a,descriptor:l,callbacks:y}}),[y,l,a]);Gv((function(){return c.current=w.descriptor,i.droppable.register(w),function(){n.current&&b(),i.droppable.unregister(w)}}),[y,l,b,w,o,i.droppable]),Gv((function(){n.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)}),[e.isDropDisabled,o]),Gv((function(){n.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,o])}({droppableId:c,type:u,mode:d,direction:p,isDropDisabled:h,isCombineEnabled:g,ignoreContainerClipping:f,getDroppableRef:w});var _=n().createElement(Yy,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,r=e.data,i=e.animate;return n().createElement(qy,{placeholder:r,onClose:t,innerRef:x,animate:i,contextId:a,onTransitionEnd:O})})),C=Pg((function(){return{innerRef:S,placeholder:_,droppableProps:{"data-rbd-droppable-id":c,"data-rbd-droppable-context-id":a}}}),[a,c,_,S]),E=b?b.dragging.draggableId:null,P=Pg((function(){return{droppableId:c,type:u,isUsingCloneFor:E}}),[c,E,u]);return n().createElement(Qy.Provider,{value:P},l(C,m),function(){if(!b)return null;var e=b.dragging,t=b.render,r=n().createElement(sw,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(n,r){return t(n,r,e)}));return $g().createPortal(r,y())}())}));pw.defaultProps=dw,f(486),Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function fw(){const e=function(e){return{empty:(0,Zt.css)({marginBottom:e.spacing(2),marginLeft:e.spacing(1.75),fontSize:e.typography.fontSize})}}((0,Yt.useTheme2)());return n().createElement("div",{className:e.empty},"No fields")}function hw(e){const t=function(e){return{dragIcon:(0,Zt.css)({cursor:"drag",marginLeft:e.spacing(1),opacity:.4}),labelCount:(0,Zt.css)({marginLeft:e.spacing(.5),marginRight:e.spacing(.5),appearance:"none",background:"none",border:"none",fontSize:e.typography.pxToRem(11),opacity:.6,display:"flex",flexDirection:"column",alignItems:"self-end"}),contentWrap:(0,Zt.css)({display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"}),checkboxLabel:(0,Zt.css)({"> span":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block",maxWidth:"100%"}})}}((0,Yt.useTheme2)());var r,a,i,o,s;return e.labels[e.label]?n().createElement(n().Fragment,null,n().createElement("div",{className:t.contentWrap},n().createElement(Yt.Checkbox,{className:t.checkboxLabel,label:e.label,onChange:e.onChange,checked:null!==(s=null===(r=e.labels[e.label])||void 0===r?void 0:r.active)&&void 0!==s&&s}),e.showCount&&n().createElement("div",{className:t.labelCount},n().createElement("div",null,null===(a=e.labels[e.label])||void 0===a?void 0:a.percentOfLinesWithLabel,"%"),n().createElement("div",null,null===(i=e.labels[e.label])||void 0===i?void 0:i.cardinality," ",1===(null===(o=e.labels[e.label])||void 0===o?void 0:o.cardinality)?"value":"values"))),e.draggable&&n().createElement(Yt.Icon,{"aria-label":"Drag and drop icon",title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:t.dragIcon})):null}function gw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){gw(e,t,n[t])}))}return e}function bw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const vw=r=>{const{reorderColumn:a,labels:i,valueFilter:o,toggleColumn:s}=r,l=(0,t.useContext)(e.ThemeContext),{columns:c}=pg(),u=function(e){return{wrap:(0,Zt.css)({marginTop:e.spacing(1),marginBottom:e.spacing(1),display:"flex",background:e.colors.background.primary}),dragging:(0,Zt.css)({background:e.colors.background.secondary}),columnWrapper:(0,Zt.css)({marginBottom:e.spacing(1.5),paddingLeft:e.spacing(.5)})}}(l),d=Object.keys(i).filter((e=>o(e))),p=e=>{const t=i[e];if(t)return`${e} appears in ${null==t?void 0:t.percentOfLinesWithLabel}% of log lines`};return d.length?n().createElement(jy,{onDragEnd:e=>{e.destination&&a(c,e.source.index,e.destination.index)}},n().createElement(pw,{droppableId:"order-fields",direction:"vertical"},(e=>n().createElement("div",bw(mw({className:u.columnWrapper},e.droppableProps),{ref:e.innerRef}),d.sort(function(e){return(t,n)=>{const r=e[t],a=e[n];return null!=r.index&&null!=a.index?r.index-a.index:0}}(i)).map(((e,t)=>n().createElement(lw,{draggableId:e,key:e,index:t},((t,r)=>n().createElement("div",bw(mw({className:(0,Zt.cx)(u.wrap,r.isDragging?u.dragging:void 0),ref:t.innerRef},t.draggableProps,t.dragHandleProps),{title:p(e)}),n().createElement(hw,{label:e,onChange:()=>s(e),labels:i,draggable:!0})))))),e.placeholder)))):n().createElement(fw,null)},yw=new Intl.Collator(void 0,{sensitivity:"base"}),ww=e=>{const{labels:t,valueFilter:r,toggleColumn:a}=e,i=function(e){return{wrap:(0,Zt.css)({marginTop:e.spacing(.25),marginBottom:e.spacing(.25),display:"flex",background:e.colors.background.primary,borderBottom:`1px solid ${e.colors.background.canvas}`}),dragging:(0,Zt.css)({background:e.colors.background.secondary}),columnWrapper:(0,Zt.css)({marginBottom:e.spacing(1.5),paddingLeft:e.spacing(.5)})}}((0,Yt.useTheme2)()),o=Object.keys(t).filter((e=>r(e)));return o.length?n().createElement("div",{className:i.columnWrapper},o.sort(function(e){return(t,n)=>{const r=e[t],a=e[n];return null!=r&&null!=a?Number("TIME_FIELD"===a.type)-Number("TIME_FIELD"===r.type)||Number("BODY_FIELD"===a.type)-Number("BODY_FIELD"===r.type)||yw.compare(t,n):0}}(t)).map((e=>{var r;return n().createElement("div",{key:e,className:i.wrap,title:`${e} appears in ${null===(r=t[e])||void 0===r?void 0:r.percentOfLinesWithLabel}% of log lines`},n().createElement(hw,{showCount:!0,label:e,onChange:()=>a(e),labels:t}))}))):n().createElement(fw,null)},Sw=e=>{const t=function(e){return{sidebarWrap:(0,Zt.css)({overflowY:"scroll",height:"calc(100% - 50px)","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"}),columnHeaderButton:(0,Zt.css)({appearance:"none",background:"none",border:"none",fontSize:e.typography.pxToRem(11)}),columnHeader:(0,Zt.css)({display:"flex",justifyContent:"space-between",fontSize:e.typography.h6.fontSize,background:e.colors.background.secondary,position:"sticky",top:0,left:0,paddingTop:e.spacing(.75),paddingRight:e.spacing(.75),paddingBottom:e.spacing(.75),paddingLeft:e.spacing(1.5),zIndex:3,marginBottom:e.spacing(2)})}}((0,Yt.useTheme2)());var r,a;return n().createElement("div",{className:t.sidebarWrap},n().createElement(n().Fragment,null,n().createElement("div",{className:t.columnHeader},"Selected fields",n().createElement("button",{onClick:e.clear,className:t.columnHeaderButton},"Reset")),n().createElement(vw,{reorderColumn:e.reorderColumn,toggleColumn:e.toggleColumn,labels:null!==(r=e.filteredColumnsWithMeta)&&void 0!==r?r:e.columnsWithMeta,valueFilter:t=>{var n,r;return null!==(r=null===(n=e.columnsWithMeta[t])||void 0===n?void 0:n.active)&&void 0!==r&&r},id:"selected-fields"}),n().createElement("div",{className:t.columnHeader},"Fields"),n().createElement(ww,{toggleColumn:e.toggleColumn,labels:null!==(a=e.filteredColumnsWithMeta)&&void 0!==a?a:e.columnsWithMeta,valueFilter:t=>{var n;return!(null===(n=e.columnsWithMeta[t])||void 0===n?void 0:n.active)}})))};function xw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ow(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xw(e,t,n[t])}))}return e}function _w(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function Cw(e){return(t,n,r)=>{if(n===r)return;const a=Ow({},t),i=Object.keys(a).filter((e=>a[e].active)).map((e=>{var t;return{fieldName:e,index:null!==(t=a[e].index)&&void 0!==t?t:0}})).sort(((e,t)=>e.index-t.index)),[o]=i.splice(n,1);i.splice(r,0,o),i.filter((e=>void 0!==e)).forEach(((e,t)=>{a[e.fieldName].index=t})),e(a)}}function Ew(){const{columns:e,setColumns:r,setVisible:i,filteredColumns:o,setFilteredColumns:s}=pg(),[l,c]=(0,t.useState)(""),u=Cw(r);return n().createElement(Yt.ClickOutsideWrapper,{onClick:()=>{i(!1),s(e),c("")},useCapture:!0},n().createElement(wg,{searchValue:l,setSearchValue:c}),n().createElement(Sw,{toggleColumn:t=>{if(!e||!(t in e))return void console.warn("failed to get column",e);const n=Object.keys(e).filter((t=>e[t].active)).length,i=!e[t].active||void 0;let l;if(l=_w(Ow({},e),i?{[t]:_w(Ow({},e[t]),{active:i,index:n})}:{[t]:_w(Ow({},e[t]),{active:!1,index:void 0})}),function(t){if(e){var n,r;const i=!(null===(n=e[t])||void 0===n?void 0:n.active),o=null===(r=Object.keys(e).filter((t=>{var n;return null===(n=e[t])||void 0===n?void 0:n.active})))||void 0===r?void 0:r.length,s={columnAction:i?"add":"remove",columnCount:i?o+1:o-1};(0,a.reportInteraction)("grafana_logs_app_table_column_filter_clicked",s)}}(t),r(l),o){var u;const e=!(null===(u=o[t])||void 0===u?void 0:u.active);let r;r=_w(Ow({},o),e?{[t]:_w(Ow({},o[t]),{active:e,index:n})}:{[t]:_w(Ow({},o[t]),{active:!1,index:void 0})}),s(r),c("")}},filteredColumnsWithMeta:o,columnsWithMeta:e,clear:()=>{const t=Ow({},e);let n=0;Object.keys(t).forEach((e=>{const r="BODY_FIELD"===t[e].type||"TIME_FIELD"===t[e].type;t[e].active=r,t[e].index=r?n++:void 0})),r(t),s(t),c("")},reorderColumn:u}))}const Pw=e=>n().createElement(Dw,{onMouseOut:e.onMouseOut,onMouseIn:e.onMouseIn,onClick:e.onClick,field:e.field,rowIndex:e.rowIndex},e.children),Dw=e=>{var t;const r=(0,Yt.useTheme2)(),a=mg(),i=((e,t,n)=>({active:(0,Zt.css)({height:"calc(100% + 36px)",zIndex:e.zIndex.tooltip,background:"transparent"}),wrap:(0,Zt.css)({position:"absolute",overflowX:"hidden",whiteSpace:"nowrap",width:"100%",height:"100%",left:0,top:0,margin:"auto",background:"transparent"})}))(r,0,null===(t=a.cellIndex)||void 0===t||t.numberOfMenuItems);return n().createElement("div",{onMouseLeave:e.onMouseOut,onMouseEnter:e.onMouseIn,onClick:e.onClick,className:a.cellIndex.index===e.rowIndex&&a.cellIndex.fieldName===e.field.name?(0,Zt.cx)(i.wrap,i.active):i.wrap},e.children)},kw={logsFrame:null,addFilter:e=>{},timeRange:void 0,selectedLine:void 0},Tw=(0,t.createContext)(kw),Rw=({children:e,logsFrame:t,addFilter:r,selectedLine:a,timeRange:i})=>n().createElement(Tw.Provider,{value:{logsFrame:t,addFilter:r,selectedLine:a,timeRange:i}},e),jw=()=>(0,t.useContext)(Tw),Iw=e=>{const t=((e,t)=>({menu:(0,Zt.css)({position:"relative",paddingRight:"5px",display:"flex",minWidth:"60px",justifyContent:"flex-start"}),menuItemsWrap:(0,Zt.css)({boxShadow:e.shadows.z3,display:"flex",background:e.colors.background.secondary,padding:"5px 0",marginLeft:"column"===t?"5px":void 0}),menuItem:(0,Zt.css)({overflow:"auto",textOverflow:"ellipsis",cursor:"pointer",paddingLeft:"5px",paddingRight:"5px",display:"flex",alignItems:"center"})}))((0,Yt.useTheme2)(),e.pillType),{addFilter:r}=jw();return n().createElement("span",{className:t.menu},n().createElement("span",{className:t.menuItemsWrap},"derived"!==e.fieldType&&n().createElement(n().Fragment,null,n().createElement("div",{className:t.menuItem,onClick:()=>{r({key:e.label,value:e.value,operator:Mp.Equal})}},n().createElement(Yt.Icon,{title:"Add to search",size:"md",name:"plus-circle"})),n().createElement("div",{className:t.menuItem,onClick:()=>{r({key:e.label,value:e.value,operator:Mp.NotEqual})}},n().createElement(Yt.Icon,{title:"Exclude from search",size:"md",name:"minus-circle"}))),e.showColumn&&n().createElement("div",{title:"Add column",onClick:e.showColumn,className:t.menuItem},n().createElement("svg",{width:"18",height:"16",viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.38725 1.33301H13.3872C13.5641 1.33301 13.7336 1.40325 13.8587 1.52827C13.9837 1.65329 14.0539 1.82286 14.0539 1.99967V2.33333C14.0539 2.70152 13.7554 3 13.3872 3H13.0542C12.87 3 12.7206 2.85062 12.7206 2.66634H8.05391V13.333H12.7206C12.7206 13.1491 12.8697 13 13.0536 13H13.3872C13.7554 13 14.0539 13.2985 14.0539 13.6667V13.9997C14.0539 14.1765 13.9837 14.3461 13.8587 14.4711C13.7336 14.5961 13.5641 14.6663 13.3872 14.6663H1.38725C1.21044 14.6663 1.04087 14.5961 0.915843 14.4711C0.790819 14.3461 0.720581 14.1765 0.720581 13.9997V1.99967C0.720581 1.82286 0.790819 1.65329 0.915843 1.52827C1.04087 1.40325 1.21044 1.33301 1.38725 1.33301ZM2.05391 13.333H6.72058V2.66634H2.05391V13.333Z",fill:"#CCCCDC",fillOpacity:"1"}),n().createElement("path",{d:"M13.8538 7.19999H16.2538C16.466 7.19999 16.6695 7.28429 16.8195 7.4343C16.9696 7.58432 17.0538 7.78783 17.0538 7.99999C17.0538 8.21214 16.9696 8.41566 16.8195 8.56567C16.6695 8.71569 16.466 8.79999 16.2538 8.79999H13.8538V11.2C13.8538 11.4121 13.7696 11.6156 13.6195 11.7657C13.4695 11.9157 13.266 12 13.0538 12C12.8416 12 12.6382 11.9157 12.4881 11.7657C12.3381 11.6156 12.2538 11.4121 12.2538 11.2V8.79999H9.85384C9.64165 8.79999 9.43819 8.71569 9.28815 8.56567C9.13811 8.41566 9.05383 8.21214 9.05383 7.99999C9.05383 7.78783 9.13811 7.58432 9.28815 7.4343C9.43819 7.28429 9.64165 7.19999 9.85384 7.19999H12.2538V4.8C12.2538 4.58784 12.3381 4.38433 12.4881 4.23431C12.6382 4.0843 12.8416 4 13.0538 4C13.266 4 13.4695 4.0843 13.6195 4.23431C13.7696 4.38433 13.8538 4.58784 13.8538 4.8V7.19999Z",fill:"#CCCCDC",fillOpacity:"1"}))),e.links&&e.links.map((e=>{var r;return n().createElement("div",{className:t.menuItem,onClick:()=>{window.open(e.href,"_blank")},key:e.href},n().createElement(Yt.Icon,{title:null!==(r=e.title)&&void 0!==r?r:"Link",key:e.href,size:"md",name:"link"}))}))))},Aw="detected_level",Lw=t=>{const{label:r,value:a}=t,i=(0,Yt.useTheme2)(),{cellIndex:o}=mg();let s;if(r===Aw){const e=iS().options;"string"==typeof a&&a in e&&(s=e[a].color)}const l=o.index===t.rowIndex&&t.field.name===o.fieldName,c=((e,t)=>({activePillWrap:(0,Zt.css)({}),pillWrap:(0,Zt.css)({width:"100%"}),pill:(0,Zt.css)({border:`1px solid ${e.colors.border.weak}`,"&:hover":{border:`1px solid ${e.colors.border.strong}`},marginRight:"5px",marginTop:"4px",marginLeft:"5px",padding:"2px 5px",position:"relative",display:"inline-flex",flexDirection:"row-reverse",backgroundColor:"transparent",paddingLeft:t?`${e.spacing(.75)}`:"2px","&:before":{content:'""',position:"absolute",left:0,top:0,height:"100%",width:`${e.spacing(.25)}`,backgroundColor:t}}),menu:(0,Zt.css)({width:"100%"}),menuItem:(0,Zt.css)({overflow:"auto",textOverflow:"ellipsis"}),menuItemText:(0,Zt.css)({width:"65px",display:"inline-block"})}))(i,s);return n().createElement("div",{className:(0,Zt.cx)(c.pillWrap,l?c.activePillWrap:void 0)},!!a&&n().createElement(n().Fragment,null,n().createElement("span",{className:c.pill},n().createElement(n().Fragment,null,a)),l&&"string"==typeof a&&t.field.type!==e.FieldType.time&&n().createElement(Iw,{label:t.label,value:a,pillType:"column"})))};var Nw;function Fw(e){const r=((e,t)=>({clipboardButton:(0,Zt.css)({padding:0,height:"100%",lineHeight:"1",width:"20px"}),inspectButton:(0,Zt.css)({display:"inline-flex",verticalAlign:"middle",margin:0,overflow:"hidden",borderRadius:"5px"}),iconWrapper:(0,Zt.css)({height:"35px",position:"sticky",left:0,display:"flex",background:e.colors.background.secondary,padding:`0 ${e.spacing(.5)}`,zIndex:1,boxShadow:e.shadows.z2}),inspect:(0,Zt.css)({padding:"5px 3px","&:hover":{color:e.colors.text.link,cursor:"pointer"}})}))((0,Yt.useTheme2)()),{logsFrame:a}=jw(),i=null==a?void 0:a.bodyField.values[e.rowIndex],[o,s]=(0,t.useState)(!1);return n().createElement(n().Fragment,null,n().createElement("div",{className:r.iconWrapper},n().createElement("div",{className:r.inspect},n().createElement(Yt.IconButton,{"data-testid":Lp,className:r.inspectButton,tooltip:"View log line",variant:"secondary","aria-label":"View log line",tooltipPlacement:"top",size:"md",name:"eye",onClick:()=>s(!0),tabIndex:0}))),n().createElement(n().Fragment,null,o&&n().createElement(Yt.Modal,{onDismiss:()=>s(!1),isOpen:!0,title:"Inspect value"},n().createElement("pre",null,i),n().createElement(Yt.Modal.ButtonRow,null,n().createElement(Yt.ClipboardButton,{icon:"copy",getText:()=>e.value},"Copy to Clipboard")))))}!function(e){e.SelectedLine="selectedLine",e.From="from",e.To="to"}(Nw||(Nw={}));const Mw=t=>{var r;let a=t.value;const i=t.field,o=i.display(a),s=((t,n)=>({flexWrap:(0,Zt.css)({display:"flex",alignItems:"flex-start",flexDirection:n===e.FieldType.number?"row-reverse":"row",textAlign:n===e.FieldType.number?"right":"left"}),content:(0,Zt.css)({position:"relative",overflow:"hidden",display:"flex",height:"100%"}),linkWrapper:(0,Zt.css)({color:t.colors.text.link,marginTop:"7px",marginLeft:"7px","&:hover":{textDecoration:"underline"}})}))((0,Yt.useTheme2)(),t.field.type),{setVisible:l}=pg(),{cellIndex:c,setActiveCellIndex:u}=mg(),d={index:t.rowIndex},p=Boolean(null===(r=(0,Yt.getCellLinks)(t.field,d))||void 0===r?void 0:r.length);return null===a?n().createElement(n().Fragment,null):(a=n().isValidElement(t.value)?t.value:"object"==typeof a?JSON.stringify(t.value):(0,e.formattedValueToString)(o),n().createElement(Pw,{onClick:()=>t.rowIndex===c.index&&t.field.name===c.fieldName?u({index:null}):u({index:t.rowIndex,fieldName:t.field.name,numberOfMenuItems:3}),field:t.field,rowIndex:t.rowIndex},n().createElement("div",{className:s.content},0===t.fieldIndex&&n().createElement(Fw,{value:a,rowIndex:t.rowIndex}),n().createElement("div",{className:s.flexWrap}),!p&&((e,r)=>n().createElement(Lw,{field:t.field,rowIndex:t.rowIndex,showColumns:()=>l(!0),label:r,value:e}))(a,i.name),p&&i.getLinks&&n().createElement(Yt.DataLinksContextMenu,{links:()=>{var e;return null!==(e=(0,Yt.getCellLinks)(i,d))&&void 0!==e?e:[]}},(e=>e.openMenu?n().createElement("div",{className:s.linkWrapper,onClick:e.openMenu},n().createElement(n().Fragment,null,a)):n().createElement("div",{className:s.linkWrapper},n().createElement(n().Fragment,null,a)))))))};function Bw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vw(e){const t=(0,Yt.useTheme2)();let r;if(e.label===Aw){const t=iS().options;e.value in t&&(r=t[e.value].color)}const a=((e,t)=>({pill:(0,Zt.css)({flex:"0 1 auto",marginLeft:e.spacing(.5),marginRight:e.spacing(.5),padding:`${e.spacing(.25)} ${e.spacing(.25)}`,position:"relative",display:"inline-flex",flexDirection:"column",marginTop:e.spacing(.5)}),activePill:(0,Zt.css)({}),valueWrap:(0,Zt.css)({border:`1px solid ${e.colors.background.secondary}`,boxShadow:`-2px 2px 5px 0px ${e.colors.background.secondary}`,backgroundColor:"transparent",cursor:"pointer",position:"relative",paddingRight:`${e.spacing(.5)}`,paddingLeft:t?`${e.spacing(.75)}`:`${e.spacing(.5)}`,"&:before":{content:'""',position:"absolute",left:0,top:0,height:"100%",width:`${e.spacing(.25)}`,backgroundColor:t},"&:hover":{border:`1px solid ${e.colors.border.strong}`}})}))(t,r);return n().createElement("span",{className:(0,Zt.cx)(a.pill,e.menuActive?a.activePill:void 0),onClick:e.onClick},n().createElement("span",{className:a.valueWrap},e.label,"=",e.value),e.menuActive&&n().createElement(Iw,{pillType:"logPill",fieldType:e.fieldType,links:e.links,label:e.label,value:e.value,showColumn:e.onClickAdd}))}const zw=r=>{const{label:i}=r,{cellIndex:o,setActiveCellIndex:s}=mg(),{columns:l,setColumns:c}=pg(),u=r.value,d=(0,a.getTemplateSrv)(),p=(0,t.useMemo)((()=>d.replace.bind(d)),[d]),f=r.field;if(!f||(null==f?void 0:f.type)===e.FieldType.other)return null;const h={index:r.rowIndex};r.originalField&&r.isDerivedField&&r.originalFrame&&(r.originalField.getLinks=(0,e.getLinksSupplier)(r.originalFrame,r.originalField,{},p));const g=r.originalField&&(0,Yt.getCellLinks)(r.originalField,h);return n().createElement(Vw,{onClick:()=>r.rowIndex===o.index&&f.name===o.fieldName&&i===o.subFieldName?s({index:null}):s({index:r.rowIndex,fieldName:f.name,subFieldName:i,numberOfMenuItems:r.isDerivedField?2:3}),menuActive:o.index===r.rowIndex&&o.fieldName===f.name&&o.subFieldName===i,fieldType:r.isDerivedField?"derived":void 0,label:i,value:u,onClickAdd:()=>(e=>{const t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Bw(e,t,n[t])}))}return e}({},l),n=Object.keys(l).filter((e=>l[e].active)).length;t[e].active?(t[e].active=!1,t[e].index=void 0):(t[e].active=!0,t[e].index=n),c(t)})(i),links:g})},Ww=e=>{var t,n;null==e||null===(n=e.current)||void 0===n||n.scrollTo({left:null===(t=e.current)||void 0===t?void 0:t.scrollLeft})};function Hw({scrollerRef:e}){const t=(e=>({scroller:Zt.css`
    position: absolute;
    right: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 20px;
    top: 32px;
    margin-top: -24px;
    // For some reason clicking on this button causes text to be selected in the following row
    user-select: none;
  `,scrollLeft:Zt.css`
    cursor: pointer;
    background: ${e.colors.background.primary};

    &:hover {
      background: ${e.colors.background.secondary};
    }
  `,scrollRight:Zt.css`
    cursor: pointer;
    background: ${e.colors.background.primary};

    &:hover {
      background: ${e.colors.background.secondary};
    }
  `}))((0,Yt.useTheme2)());return n().createElement("div",{className:t.scroller},n().createElement("span",{onPointerDown:()=>{var t,n;null==(t=e)||null===(n=t.current)||void 0===n||n.scrollTo({top:0,left:0,behavior:"smooth"})},onPointerUp:()=>Ww(e),className:t.scrollLeft},n().createElement(Yt.Icon,{name:"arrow-left"})),n().createElement("span",{onPointerDown:()=>{var t,n;null==(t=e)||null===(n=t.current)||void 0===n||n.scrollTo({top:0,left:t.current.scrollWidth,behavior:"smooth"})},onPointerUp:()=>Ww(e),className:t.scrollRight},n().createElement(Yt.Icon,{name:"arrow-right"})))}function $w(e){const t=(0,Yt.useTheme2)(),r=Uw(t);return n().createElement("div",{className:r.rawLogLine},n().createElement(n().Fragment,null,e.value))}const Uw=(e,t)=>({rawLogLine:(0,Zt.css)({fontFamily:e.typography.fontFamilyMonospace,height:"35px",lineHeight:"35px",paddingRight:e.spacing(1.5),paddingLeft:e.spacing(1),fontSize:e.typography.bodySmall.fontSize})}),Gw=r=>{let a=r.value;const i=r.field,o=i.display(a),s=(0,Yt.useTheme2)(),l=qw(s),{columns:c,setVisible:u,bodyState:d}=pg(),{logsFrame:p}=jw(),[f,h]=(0,t.useState)(!1),g=(0,t.useRef)(null);a=n().isValidElement(r.value)?r.value:"object"==typeof a?JSON.stringify(r.value):(0,e.formattedValueToString)(o);const m=(t=>Object.keys(c).filter((e=>e!==ig(p))).sort(((e,t)=>e===Aw?-1:t===Aw?1:"LINK_FIELD"===c[e].type?-1:"LINK_FIELD"===c[t].type?1:c[e].cardinality>c[t].cardinality?-1:1)).filter((e=>!c[e].active&&c[e].cardinality>1)).map((a=>{var o;const s=t[a],l=null==p||null===(o=p.raw)||void 0===o?void 0:o.fields.find((e=>e.name===a)),d=null==i?void 0:i.values[r.rowIndex],f=!s&&!!d;if(s)return n().createElement(zw,{originalFrame:void 0,field:i,columns:c,rowIndex:r.rowIndex,frame:r.frame,showColumns:()=>u(!0),key:a,label:a,isDerivedField:!1,value:s});if(f&&(null==l?void 0:l.name)){const t=null==l?void 0:l.values[r.rowIndex];if((null==l?void 0:l.type)===e.FieldType.string&&t)return n().createElement(zw,{originalFrame:null==p?void 0:p.raw,originalField:l,field:i,value:t,columns:c,rowIndex:r.rowIndex,frame:r.frame,showColumns:()=>u(!0),key:l.name,label:l.name,isDerivedField:!0})}return null})).filter((e=>e)))(r.labels),b=d===lg.auto,v=m.length>0;return n().createElement(Pw,{onMouseIn:()=>{h(!0)},onMouseOut:()=>{h(!1)},rowIndex:r.rowIndex,field:r.field},n().createElement(fg.ScrollSyncPane,{innerRef:g,group:"horizontal"},n().createElement("div",{className:l.content},0===r.fieldIndex&&n().createElement(Fw,{rowIndex:r.rowIndex,value:a}),b&&v&&n().createElement(n().Fragment,null,m),d===lg.labels&&v&&n().createElement(n().Fragment,null,m),d===lg.labels&&!v&&n().createElement($w,{value:a}),b&&!v&&n().createElement($w,{value:a}),d===lg.text&&n().createElement($w,{value:a}),f&&n().createElement(Hw,{scrollerRef:g}))))},qw=e=>({content:Zt.css`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    padding-right: 30px;
    display: flex;
    align-items: flex-start;
    height: 100%;
    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:after {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      // Fade out text in last 10px to background color to add affordance to horiziontal scroll
      background: linear-gradient(to right, transparent calc(100% - 10px), ${e.colors.background.primary});
    }
  `}),Qw=e=>{const{setHeaderMenuActive:r,isHeaderMenuActive:a}=yg(),{logsFrame:i}=jw(),o=(0,t.useRef)(null),s=((e,t,n)=>({tableHeaderMenu:(0,Zt.css)({label:"tableHeaderMenu",width:"100%",minWidth:"250px",height:"100%",maxHeight:"400px",backgroundColor:e.colors.background.primary,border:`1px solid ${e.colors.border.weak}`,padding:e.spacing(2),margin:e.spacing(1,0),boxShadow:e.shadows.z3,borderRadius:e.shape.radius.default}),button:(0,Zt.css)({appearance:"none",right:"5px",background:"none",border:"none",padding:0}),wrapper:(0,Zt.css)({display:"flex",marginLeft:t?"30px":"6px",width:n?"calc(100% + 6px)":"100%",borderRight:`1px solid ${e.colors.border.weak}`,marginRight:"-6px"}),defaultContentWrapper:(0,Zt.css)({borderLeft:t?`1px solid ${e.colors.border.weak}`:"none",marginLeft:t?"-6px":0,paddingLeft:t?"12px":0,display:"flex"})}))((0,Yt.useTheme2)(),0===e.fieldIndex,e.field.name===ig(i));return n().createElement("span",{className:s.wrapper},n().createElement("span",{className:s.defaultContentWrapper},e.defaultContent),n().createElement("button",{className:s.button,ref:o,onClick:e=>{r(!a)}},n().createElement(Yt.Icon,{title:"Show menu",name:"ellipsis-v"})),o.current&&n().createElement(Yt.Popover,{show:a,content:n().createElement(Yt.ClickOutsideWrapper,{onClick:()=>r(!1),useCapture:!0},n().createElement("div",{className:s.tableHeaderMenu},e.children)),referenceElement:o.current}))};function Yw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kw(e){const{setHeaderMenuActive:r}=yg(),{columns:a,setColumns:i,bodyState:o,setBodyState:s}=pg(),{logsFrame:l}=jw(),c=Xw(),u=(0,t.useCallback)((e=>{const t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Yw(e,t,n[t])}))}return e}({},a);Object.keys(t).filter((n=>{const r=t[n].index,a=t[e.name].index;return t[n].active&&a&&r&&r>a})).map((e=>t[e])).forEach((e=>{void 0!==e.index&&e.index--})),t[e.name].active=!1,t[e.name].index=void 0,i(t)}),[a,i]),d=e.headerProps.field.name===ig(l);return n().createElement(Qw,e.headerProps,n().createElement("div",{className:c.linkWrap},n().createElement("a",{className:c.link,onClick:()=>{e.openColumnManagementDrawer(),r(!1)}},n().createElement(Yt.Icon,{className:c.icon,name:"columns",size:"md"}),"Manage columns")),n().createElement("div",{className:c.linkWrap},n().createElement("a",{className:c.link,onClick:()=>u(e.headerProps.field)},n().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16",width:"17",height:"16",className:"css-q2u0ig-Icon"},n().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.73446 1.33301H12.2345C12.3892 1.33301 12.5375 1.40325 12.6469 1.52827C12.7563 1.65329 12.8178 1.82286 12.8178 1.99967V4.74967C12.8178 5.07184 12.5566 5.33301 12.2345 5.33301C11.9123 5.33301 11.6511 5.07184 11.6511 4.74967V2.66634H7.56779V13.333H11.6511V10.9163C11.6511 10.5942 11.9123 10.333 12.2345 10.333C12.5566 10.333 12.8178 10.5942 12.8178 10.9163V13.9997C12.8178 14.1765 12.7563 14.3461 12.6469 14.4711C12.5375 14.5961 12.3892 14.6663 12.2345 14.6663H1.73446C1.57975 14.6663 1.43137 14.5961 1.32198 14.4711C1.21258 14.3461 1.15112 14.1765 1.15112 13.9997V1.99967C1.15112 1.82286 1.21258 1.65329 1.32198 1.52827C1.43137 1.40325 1.57975 1.33301 1.73446 1.33301ZM2.31779 13.333H6.40112V2.66634H2.31779V13.333Z",fill:"#CCCCDC",fillOpacity:"1"}),n().createElement("path",{d:"M15.9893 10.6315C15.9498 10.7263 15.8919 10.8123 15.819 10.8846C15.7467 10.9575 15.6607 11.0154 15.5659 11.0549C15.4712 11.0943 15.3695 11.1147 15.2668 11.1147C15.1641 11.1147 15.0625 11.0943 14.9677 11.0549C14.8729 11.0154 14.7869 10.9575 14.7146 10.8846L12.9335 9.09573L11.1524 10.8846C11.0801 10.9575 10.9941 11.0154 10.8993 11.0549C10.8045 11.0943 10.7028 11.1147 10.6002 11.1147C10.4975 11.1147 10.3958 11.0943 10.301 11.0549C10.2063 11.0154 10.1202 10.9575 10.0479 10.8846C9.97504 10.8123 9.91717 10.7263 9.87769 10.6315C9.8382 10.5367 9.81787 10.4351 9.81787 10.3324C9.81787 10.2297 9.8382 10.1281 9.87769 10.0333C9.91717 9.9385 9.97504 9.85248 10.0479 9.78017L11.8368 7.99906L10.0479 6.21795C9.90148 6.07149 9.8192 5.87285 9.8192 5.66573C9.8192 5.4586 9.90148 5.25996 10.0479 5.1135C10.1944 4.96705 10.393 4.88477 10.6002 4.88477C10.8073 4.88477 11.0059 4.96705 11.1524 5.1135L12.9335 6.90239L14.7146 5.1135C14.8611 4.96705 15.0597 4.88477 15.2668 4.88477C15.4739 4.88477 15.6726 4.96705 15.819 5.1135C15.9655 5.25996 16.0478 5.4586 16.0478 5.66573C16.0478 5.87285 15.9655 6.07149 15.819 6.21795L14.0302 7.99906L15.819 9.78017C15.8919 9.85248 15.9498 9.9385 15.9893 10.0333C16.0288 10.1281 16.0491 10.2297 16.0491 10.3324C16.0491 10.4351 16.0288 10.5367 15.9893 10.6315Z",fill:"#CCCCDC",fillOpacity:"1"})),"Remove column")),e.slideLeft&&n().createElement("div",{className:c.linkWrap},n().createElement("a",{className:c.link,onClick:()=>{var t;return null===(t=e.slideLeft)||void 0===t?void 0:t.call(e,a)}},n().createElement(Yt.Icon,{className:(0,Zt.cx)(c.icon,c.reverse),name:"arrow-from-right",size:"md"}),"Move left")),e.slideRight&&n().createElement("div",{className:c.linkWrap},n().createElement("a",{className:c.link,onClick:()=>{var t;return null===(t=e.slideRight)||void 0===t?void 0:t.call(e,a)}},n().createElement(Yt.Icon,{className:c.icon,name:"arrow-from-right",size:"md"}),"Move right")),d&&n().createElement("div",{className:c.linkWrap},n().createElement("a",{className:c.link,onClick:()=>{o===lg.text?s(lg.labels):s(lg.text)}},o===lg.text?n().createElement(Yt.Icon,{className:c.icon,name:"brackets-curly",size:"md"}):n().createElement(Yt.Icon,{className:c.icon,name:"text-fields",size:"md"}),o===lg.text?"Show labels":"Show log text")))}const Xw=()=>({reverse:(0,Zt.css)({transform:"scaleX(-1)"}),link:(0,Zt.css)({paddingTop:"5px",paddingBottom:"5px"}),icon:(0,Zt.css)({marginRight:"10px"}),linkWrap:(0,Zt.css)({})});function Zw(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Jw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Jw(e,t,n[t])}))}return e}function tS(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function nS(e){return n().createElement(Yt.Table,{initialSortBy:[{displayName:ag(e.logsFrame),desc:!0}],initialRowIndex:e.selectedLine,cellHeight:re.Sm,data:e.data,height:e.height,width:e.width,footerOptions:{show:!0,reducer:["count"],countRows:!0}})}const rS=r=>{const{height:i,timeZone:o,logsFrame:s,width:l,labels:c}=r,u=(0,Yt.useTheme2)(),d={section:(0,Zt.css)({position:"relative"}),tableWrap:(0,Zt.css)({".cellActions":{display:"none !important"}})},[p,f]=(0,t.useState)(void 0),{columns:h,visible:g,setVisible:b,setFilteredColumns:v,setColumns:y}=pg(),{selectedLine:w}=jw(),S=Cw(y),x=(0,a.getTemplateSrv)(),O=(0,t.useMemo)((()=>x.replace.bind(x)),[x]),_=(0,t.useCallback)((t=>{if(!t.length)return t;const[r]=(0,e.applyFieldOverrides)({data:[t],timeZone:o,theme:u,replaceVariables:O,fieldConfig:{defaults:{custom:{}},overrides:[]}});for(const[i,o]of r.fields.entries()){var a;o.type=o.type===e.FieldType.string?null!==(a=aS(o))&&void 0!==a?a:e.FieldType.string:o.type,o.config=tS(eS({},o.config),{custom:eS({inspect:!0,filterable:!0,headerComponent:e=>n().createElement(vg,null,n().createElement(Kw,{headerProps:tS(eS({},e),{fieldIndex:i}),openColumnManagementDrawer:()=>b(!0),slideLeft:0!==i?e=>S(e,i,i-1):void 0,slideRight:i!==t.fields.length-1?e=>S(e,i,i+1):void 0})),width:sS(o,i,h,l,r.fields.length,s),cellOptions:oS(o,i,c,s)},o.config.custom),filterable:!0})}return r}),[o,u,c,l,O,b]);if((0,t.useEffect)((()=>{const t=function(){var t,n=(t=function*(){const t=(n=s.raw).fields.filter((t=>{var r,a,i;const o="json.RawMessage"===(null===(r=t.typeInfo)||void 0===r?void 0:r.frame)&&"labels"===t.name&&(null==n||null===(a=n.meta)||void 0===a?void 0:a.type)!==e.DataFrameType.LogLines,s="labels"===t.name&&t.type===e.FieldType.other&&(null==n||null===(i=n.meta)||void 0===i?void 0:i.type)===e.DataFrameType.LogLines;return o||s})).flatMap((e=>[{id:"extractFields",options:{format:"json",keepTime:!1,replace:!1,source:e.name}}]));var n;let r=function(e){let t={};return Object.keys(e).filter((t=>e[t].active)).forEach((n=>{const r=e[n].index;void 0!==r&&(t[n]=r)})),t}(h);const a=function(e){let t={};for(const n in e)t[n]=!0;return Object.keys(e).length>0?{id:"organize",options:{indexByName:e,includeByName:t}}:null}(r);if(a)t.push(a);else{const e={time:s.timeField,body:s.bodyField,extraFields:s.extraFields};e&&void 0!==e.body&&void 0!==e.time&&t.push(function(e){return{id:"organize",options:{indexByName:{[e.time.name]:0,[e.body.name]:1},includeByName:{[e.body.name]:!0,[e.time.name]:!0}}}}(e))}if(t.length>0){const n=yield(0,m.lastValueFrom)((0,e.transformDataFrame)(t,[s.raw])),r=_(n[0]);f(r)}else f(_(s.raw))},function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(e){Zw(i,r,a,o,s,"next",e)}function s(e){Zw(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();t()}),[s.raw,s.bodyField,s.timeField,s.extraFields,_,h]),!p)return n().createElement(n().Fragment,null);const C=s.raw.fields.find((e=>e.name===function(e){var t,n;return null!==(n=null==e||null===(t=e.idField)||void 0===t?void 0:t.name)&&void 0!==n?n:"id"}(s))),E=null==C?void 0:C.values.findIndex((e=>e===(null==w?void 0:w.id)));return n().createElement("div",{"data-testid":Ap,className:d.section},g&&n().createElement(Yt.Drawer,{size:"sm",onClose:()=>{b(!1),v(h)}},n().createElement(Ew,null)),n().createElement("div",{className:d.tableWrap},n().createElement(gg,null,n().createElement(fg.ScrollSync,{horizontal:!0,vertical:!1,proportional:!1},n().createElement(nS,{logsFrame:s,selectedLine:null!=E?E:null==w?void 0:w.row,data:p,height:i,width:l})))))};function aS(t){if(t.name){const n=t.name.toLowerCase();if("date"===n||"time"===n)return e.FieldType.time}for(let e=0;e<t.values.length;e++){const n=t.values[e];if(null!=n)return hS(n)}}const iS=()=>({options:{critical:{color:"#705da0",index:0},crit:{color:"#705da0",index:1},error:{color:"#e24d42",index:2},err:{color:"#e24d42",index:3},eror:{color:"#e24d42",index:4},warning:{color:"#FF9900",index:5},warn:{color:"#FF9900",index:6},info:{color:"#7eb26d",index:7},debug:{color:"#1f78c1",index:8},trace:{color:"#6ed0e0",index:9}},type:e.MappingType.ValueToText});function oS(e,t,r,a){return e.name===ig(a)?{cellComponent:e=>n().createElement(Gw,tS(eS({},e),{fieldIndex:t,labels:r[e.rowIndex]})),type:Yt.TableCellDisplayMode.Custom}:{cellComponent:e=>n().createElement(Mw,tS(eS({},e),{fieldIndex:t})),type:Yt.TableCellDisplayMode.Custom}}function sS(t,n,r,a,i,o){var s,l;const c=i<=2?a:Math.min(a/2),u=0===n?30:0;if(t.type===e.FieldType.time)return 200+u;const d=r[t.name];if(void 0===d)return;var p;const f=Math.max(null!==(p=d.maxLength)&&void 0!==p?p:0,t.name.length);return d.maxLength?Math.min(Math.max(6.5*f+95+u,90+u),c):t.name!==ig(o)?Math.min(Math.max(6.5*(null!==(h=null===(l=t.values)||void 0===l||null===(s=l[0])||void 0===s?void 0:s.length)&&void 0!==h?h:80)+95+u,90+u),c):void 0;var h}"undefined"!=typeof document&&t.useLayoutEffect,Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),new Map,new Set(["id"]),new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),new Set(["href","target","rel","download","ping","referrerPolicy"]);let lS=new Map,cS=new Set;function uS(){if("undefined"==typeof window)return;function e(e){return"propertyName"in e}let t=n=>{if(!e(n)||!n.target)return;let r=lS.get(n.target);if(r&&(r.delete(n.propertyName),0===r.size&&(n.target.removeEventListener("transitioncancel",t),lS.delete(n.target)),0===lS.size)){for(let e of cS)e();cS.clear()}};document.body.addEventListener("transitionrun",(n=>{if(!e(n)||!n.target)return;let r=lS.get(n.target);r||(r=new Set,lS.set(n.target,r),n.target.addEventListener("transitioncancel",t,{once:!0})),r.add(n.propertyName)})),document.body.addEventListener("transitionend",t)}"undefined"!=typeof document&&("loading"!==document.readyState?uS():document.addEventListener("DOMContentLoaded",uS)),"undefined"!=typeof document&&window.visualViewport,new Map;const dS=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/,pS=r=>{const{logsFrame:a}=jw(),[i,o]=(0,t.useState)({width:0,height:0});!function(e){const{ref:n,onResize:r}=e;(0,t.useEffect)((()=>{let e=null==n?void 0:n.current;if(e){if(void 0===window.ResizeObserver)return window.addEventListener("resize",r,!1),()=>{window.removeEventListener("resize",r,!1)};{const t=new window.ResizeObserver((e=>{e.length&&r()}));return t.observe(e),()=>{e&&t.unobserve(e)}}}}),[r,n])}({ref:r.panelWrap,onResize:()=>{const e=r.panelWrap.current;e&&(i.width===e.clientWidth&&i.height===e.clientHeight||o({width:e.clientWidth,height:e.clientHeight}))}});const s={section:(0,Zt.css)({position:"relative"})},l=(0,e.getTimeZone)(),c=(0,t.useCallback)((e=>{const t=r.urlColumns;return(null==t?void 0:t.length)&&Object.values(t).forEach(((t,n)=>{e[t]&&(e[t].active=!0,e[t].index=n)})),e}),[r.urlColumns]);if(!a||!a.raw.length)return null;var u;const d=null!==(u=a.getLogFrameLabelsAsLabels())&&void 0!==u?u:[],p=a?a.raw.length:0;let f=function(e,t){let n={};const r=new Map,a=function(e){const t=new Map;return e.forEach((e=>{Object.keys(e).forEach((n=>{if(t.has(n)){const r=t.get(n),a=null==r?void 0:r.valueSet,i=null==r?void 0:r.maxLength;a&&!(null==a?void 0:a.has(e[n]))&&(null==a||a.add(e[n]),i&&e[n].length>i&&t.set(n,{maxLength:e[n].length,valueSet:a}))}else t.set(n,{maxLength:e[n].length,valueSet:new Set([e[n]])})}))})),t}(t),i=e?e.length:0;return(null==t?void 0:t.length)&&i&&(t.forEach((e=>{Object.keys(e).forEach((e=>{var t;const n=a.get(e);var i;const o=null!==(i=null==n||null===(t=n.valueSet)||void 0===t?void 0:t.size)&&void 0!==i?i:0;if(r.has(e)){const t=r.get(e);t&&((null==t?void 0:t.active)?r.set(e,{percentOfLinesWithLabel:t.percentOfLinesWithLabel+1,active:!0,index:t.index,cardinality:o,maxLength:null==n?void 0:n.maxLength}):r.set(e,{percentOfLinesWithLabel:t.percentOfLinesWithLabel+1,active:!1,index:void 0,cardinality:o,maxLength:null==n?void 0:n.maxLength}))}else r.set(e,{percentOfLinesWithLabel:1,active:!1,index:void 0,cardinality:o,maxLength:null==n?void 0:n.maxLength})}))})),n=Object.fromEntries(r),Object.keys(n).forEach((e=>{n[e].percentOfLinesWithLabel=fS(n[e].percentOfLinesWithLabel,i)}))),n}(a.raw,d);const h={time:a.timeField,body:a.bodyField,extraFields:a.extraFields};if(h){!function(e,t,n){e.forEach((e=>{var r,a;if(!e)return;const i=null===(r=t[e.name])||void 0===r?void 0:r.active,o=null===(a=t[e.name])||void 0===a?void 0:a.index;t[e.name]=i&&void 0!==o?{percentOfLinesWithLabel:fS(e.values.filter((e=>null!=e)).length,n),active:!0,index:o,cardinality:n}:{percentOfLinesWithLabel:fS(e.values.filter((e=>null!=e)).length,n),active:!1,index:void 0,cardinality:n}}))}([h.time,h.body,...h.extraFields],f,p),f=c(f);const e=Object.keys(f).filter((e=>f[e].active));!function(e,t,n){var r,a,i,o,s,l,c,u,d,p;0===e.length&&((null===(i=t.body)||void 0===i?void 0:i.name)&&(n[null===(s=t.body)||void 0===s?void 0:s.name].active=!0,n[null===(l=t.body)||void 0===l?void 0:l.name].index=1),(null===(o=t.time)||void 0===o?void 0:o.name)&&(n[null===(c=t.time)||void 0===c?void 0:c.name].active=!0,n[null===(u=t.time)||void 0===u?void 0:u.name].index=0));(null===(r=t.time)||void 0===r?void 0:r.name)&&(null===(a=t.body)||void 0===a?void 0:a.name)&&(n[null===(d=t.body)||void 0===d?void 0:d.name].type="BODY_FIELD",n[null===(p=t.time)||void 0===p?void 0:p.name].type="TIME_FIELD");t.extraFields.length&&t.extraFields.forEach((e=>{var t;(null===(t=e.config.links)||void 0===t?void 0:t.length)&&(n[e.name].type="LINK_FIELD")}))}(e,h,f)}return n().createElement("section",{className:s.section},n().createElement(ug,{logsFrame:a,initialColumns:f,setUrlColumns:r.setUrlColumns},n().createElement(rS,{logsFrame:a,timeZone:l,height:i.height-50,width:i.width-25,labels:d})))},fS=(e,t)=>Math.ceil(100*e/t);function hS(t){let n=(0,e.guessFieldTypeFromValue)(t);return"string"===n&&dS.test(t)&&(n=e.FieldType.time),n}const gS=({dataFrame:t,setUrlColumns:r,urlColumns:a,addFilter:i,selectedLine:o,timeRange:s,panelWrap:l})=>{if(!t)return null;const c=(null===(d=(u=t).meta)||void 0===d?void 0:d.type)===e.DataFrameType.LogLines?function(t){const n=new e.FieldCache(t),r=eg(n,tg,e.FieldType.time),a=eg(n,ng,e.FieldType.string);if(void 0===r||void 0===a)return null;var i;const o=null!==(i=eg(n,"severity",e.FieldType.string))&&void 0!==i?i:null;var s;const l=null!==(s=eg(n,"id",e.FieldType.string))&&void 0!==s?s:null;var c;const u=null!==(c=eg(n,"labels",e.FieldType.other))&&void 0!==c?c:null,d=null===u?null:u.values,p=n.fields.filter(((e,t)=>t!==r.index&&t!==a.index&&t!==(null==o?void 0:o.index)&&t!==(null==l?void 0:l.index)&&t!==(null==u?void 0:u.index)));return{raw:t,timeField:r,bodyField:a,severityField:o,idField:l,getLogFrameLabels:()=>d,timeNanosecondField:null,getLogFrameLabelsAsLabels:()=>null!==d?d.map(rg):null,getLabelFieldName:()=>null!==u?u.name:null,extraFields:p}}(u):function(t){const n=new e.FieldCache(t),r=n.getFirstFieldOfType(e.FieldType.time),a=n.getFirstFieldOfType(e.FieldType.string);if(void 0===r||void 0===a)return null;var i;const o=null!==(i=n.getFieldByName("tsNs"))&&void 0!==i?i:null;var s;const l=null!==(s=n.getFieldByName("level"))&&void 0!==s?s:null;var c;const u=null!==(c=n.getFieldByName("id"))&&void 0!==c?c:null,[d,p]=function(t,n,r){const a=t.getFieldByName("labels");if(void 0!==a&&a.type===e.FieldType.other){const e=a.values.map(rg);return[a,()=>e]}return[null,()=>function(e,t){const n=e.labels;if(void 0!==n){const e=new Array(t);return e.fill(n),e}return null}(n,r.length)]}(n,a,t),f=n.fields.filter(((e,t)=>t!==r.index&&t!==a.index&&t!==(null==o?void 0:o.index)&&t!==(null==l?void 0:l.index)&&t!==(null==u?void 0:u.index)&&t!==(null==d?void 0:d.index)));return{timeField:r,bodyField:a,timeNanosecondField:o,severityField:l,idField:u,getLogFrameLabels:p,getLogFrameLabelsAsLabels:p,getLabelFieldName:()=>{var e;return null!==(e=null==d?void 0:d.name)&&void 0!==e?e:null},extraFields:f,raw:t}}(u);var u,d;return c?n().createElement(Rw,{addFilter:i,selectedLine:o,timeRange:s,logsFrame:c},n().createElement(pS,{setUrlColumns:r,urlColumns:a,panelWrap:l})):null};function mS(e){return n().createElement("div",{className:bS.visualisationType},n().createElement(Yt.RadioButtonGroup,{className:bS.visualisationTypeRadio,options:[{label:"Logs",value:"logs",description:"Show results in logs visualisation"},{label:"Table",value:"table",description:"Show results in table visualisation"}],size:"sm",value:e.vizType,onChange:e.onChange}))}const bS={visualisationType:(0,Zt.css)({display:"flex",flex:"1",justifyContent:"space-between",marginTop:"8px"}),visualisationTypeRadio:(0,Zt.css)({margin:"0 0 0 8px"})};class vS extends H{}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vS,"Component",(({model:e})=>{const r=pt.getAncestor(e,ES),{selectedLine:a,urlColumns:i,visualizationType:o}=r.useState(),{data:s}=pt.getData(e).useState(),l=pt.getTimeRange(e),{value:c}=l.useState(),u=(0,t.useRef)(null),d=yS();return n().createElement("div",{className:d.panelWrapper,ref:u},n().createElement(Yt.PanelChrome,{loadingState:null==s?void 0:s.state,title:"Logs",actions:n().createElement(mS,{vizType:o,onChange:r.setVisualizationType})},(null==s?void 0:s.series[0])&&n().createElement(gS,{panelWrap:u,addFilter:e=>{!function(e,t,n){const r="="===e.operator?"include":"exclude";zp(e.key,e.value,r,t,void 0)}(e,r)},timeRange:c,selectedLine:a,urlColumns:null!=i?i:[],setUrlColumns:e=>{JSON.stringify(e)!==JSON.stringify(r.state.urlColumns)&&r.setState({urlColumns:e})},dataFrame:null==s?void 0:s.series[0]})))}));const yS=()=>({panelWrapper:(0,Zt.css)({height:"100%"})});class wS extends H{onActivate(){this.state.panel||this.setState({panel:this.getVizPanel()})}getVizPanel(){return yd().setTitle("Log volume").setOption("legend",{showLegend:!0,calcs:["sum"],displayMode:Yt.LegendDisplayMode.List}).setUnit("short").setData(Qp(ef(`sum by (${Id}) (count_over_time(${Td} | drop __error__ [$__auto]))`,{legendFormat:`{{${Id}}}`}))).setCustomFieldConfig("stacking",{mode:Yt.StackingMode.Normal}).setCustomFieldConfig("fillOpacity",100).setCustomFieldConfig("lineWidth",0).setCustomFieldConfig("pointSize",0).setCustomFieldConfig("drawStyle",Yt.DrawStyle.Bars).setOverrides(Gp).build()}constructor(e){super(e),this.addActivationHandler(this.onActivate.bind(this))}}function SS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wS,"Component",(({model:e})=>{const{panel:t}=e.useState();if(t)return n().createElement(t.Component,{model:t})}));class xS extends H{constructor(e){var t,n;super((t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){SS(e,t,n[t])}))}return e}({},e),n=null!=(n={wrapLines:Boolean(ap("wrapLines"))})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t)),SS(this,"handleWrapLinesChange",(e=>{const t=e.target.checked;this.setState({wrapLines:t}),function(e,t){let n=t.toString();"boolean"!=typeof t||t||(n=""),localStorage.setItem(`${rp}.wrapLines`,n)}(0,t);const n=pt.getAncestor(this,ES);n&&n.updateLogsPanel()}))}}SS(xS,"Component",(function({model:e}){const{wrapLines:t}=e.useState();return n().createElement(Yt.InlineField,{label:"Wrap lines",transparent:!0,htmlFor:"wrap-lines-switch"},n().createElement(Yt.InlineSwitch,{value:t,onChange:e.handleWrapLinesChange,className:OS.horizontalInlineSwitch,transparent:!0,id:"wrap-lines-switch"}))}));const OS={input:(0,Zt.css)({width:"100%"}),field:(0,Zt.css)({label:"field",marginBottom:0}),horizontalInlineSwitch:(0,Zt.css)({padding:"0 4px 0 0"})};function _S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const CS="grafana.explore.logs.visualisationType";class ES extends H{getUrlState(){var e;const t=null!==(e=this.state.urlColumns)&&void 0!==e?e:[],n=this.state.selectedLine,r=this.state.visualizationType;return{urlColumns:JSON.stringify(t),selectedLine:JSON.stringify(n),visualizationType:JSON.stringify(r)}}updateFromUrl(e){const t={};if("string"==typeof e.urlColumns){const n=JSON.parse(e.urlColumns);n!==this.state.urlColumns&&(t.urlColumns=n)}if("string"==typeof e.selectedLine){const n=JSON.parse(e.selectedLine);n!==this.state.selectedLine&&(t.selectedLine=n)}if("string"==typeof e.visualizationType){const n=JSON.parse(e.visualizationType);n!==this.state.visualizationType&&(t.visualizationType=n)}(t.urlColumns||t.selectedLine||t.visualizationType)&&this.setState(t)}onActivate(){const e=new URLSearchParams(a.locationService.getLocation().search);this.setStateFromUrl(e),this.state.panel||this.updateLogsPanel(),this.subscribeToState(((e,t)=>{e.visualizationType!==t.visualizationType&&this.updateLogsPanel()}))}setStateFromUrl(e){const t={},n=e.get("selectedLine"),r=e.get("urlColumns"),a=e.get("visualizationType");n&&(t.selectedLine=JSON.parse(n)),r&&(t.urlColumns=JSON.parse(r)),a&&(t.visualizationType=JSON.parse(a)),Object.keys(t).length&&this.setState(t)}handleLabelFilter(e,t,n,r){if("service_name"===e)return;const a=n?function(e,t,n=0){var r;const a=null===(r=t.fields.find((e=>"labelTypes"===e.name)))||void 0===r?void 0:r.values[n];if(!a)return null;switch(a[e]){case"I":return"I";case"S":return"S";case"P":return"P";default:return null}}(e,n):Zp.Parsed,i=a===Zp.Indexed?Sd:xd;zp(e,t,r,this,i),ip(sp,lp.service_details.logs_detail_filter_applied,{filterType:i,key:e,action:r})}getLogsPanel(){const e=this.state.visualizationType;return new Zc({height:"calc(100vh - 220px)",body:vd().setTitle("Logs").setOption("showTime",!0).setOption("onClickFilterLabel",this.handleLabelFilterClick).setOption("onClickFilterOutLabel",this.handleLabelFilterOutClick).setOption("isFilterLabelActive",this.handleIsFilterLabelActive).setOption("onClickFilterString",this.handleFilterStringClick).setOption("wrapLogMessage",Boolean(ap("wrapLines"))).setOption("showLogContextToggle",!0).setHeaderActions(n().createElement(mS,{vizType:e,onChange:this.setVisualizationType})).build()})}getVizPanel(){return this.lineFilterScene=new Zh,new Xc({direction:"column",children:"logs"===this.state.visualizationType?[new Xc({children:[new Zc({body:this.lineFilterScene,xSizing:"fill"}),new xS]}),this.getLogsPanel()]:[new Zc({body:this.lineFilterScene,xSizing:"fill"}),new Zc({height:"calc(100vh - 220px)",body:new vS({})})]})}constructor(e){var t,n,r;super((n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_S(e,t,n[t])}))}return e}({},e),r=null!=(r={visualizationType:null!==(t=localStorage.getItem(CS))&&void 0!==t?t:"logs"})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})),n)),_S(this,"_urlSync",new fe(this,{keys:["urlColumns","selectedLine","visualizationType"]})),_S(this,"lineFilterScene",void 0),_S(this,"handleLabelFilterClick",((e,t,n)=>{this.handleLabelFilter(e,t,n,"toggle")})),_S(this,"handleLabelFilterOutClick",((e,t,n)=>{this.handleLabelFilter(e,t,n,"exclude")})),_S(this,"handleIsFilterLabelActive",((e,t)=>{const n=hp(Sd,this),r=hp(xd,this);return n&&n.state.filters.findIndex((n=>"="===n.operator&&n.key===e&&n.value===t))>=0||r&&r.state.filters.findIndex((n=>"="===n.operator&&n.key===e&&n.value===t))>=0})),_S(this,"handleFilterStringClick",(e=>{this.lineFilterScene&&(this.lineFilterScene.updateFilter(e),ip(sp,lp.service_details.logs_popover_line_filter,{selectionLength:e.length}))})),_S(this,"updateLogsPanel",(()=>{this.setState({panel:this.getVizPanel()})})),_S(this,"setVisualizationType",(e=>{this.setState({visualizationType:e}),ip(sp,lp.service_details.logs_visualization_toggle,{visualisationType:e}),localStorage.setItem(CS,e)})),this.addActivationHandler(this.onActivate.bind(this))}}_S(ES,"Component",(({model:e})=>{const{panel:t}=e.useState();if(t)return n().createElement("div",{className:PS.panelWrapper},n().createElement(t.Component,{model:t}))}));const PS={panelWrapper:(0,Zt.css)({".show-on-hover":{display:"none"},'section > div[class$="panel-content"]':(0,Zt.css)({contain:"none",overflow:"auto"})})};function DS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kS(e,t){var n;const r=pt.lookupVariable(Sd,t);r instanceof sr&&(ip(op,lp.service_selection.service_selected,{service:e}),r.setState({filters:[...r.state.filters.filter((e=>e.key!==NS)),{key:NS,operator:Mp.Equal,value:e}],hide:wp.hideLabel}),function(e,t){if(!e||"string"!=typeof e)return;const n=Jd(e);let r=[];try{r=JSON.parse(localStorage.getItem(n)||"[]")}catch(e){console.error("Error parsing favorite services from local storage",e)}Array.isArray(r)||(r=[]);const a=r.filter((e=>e!==t));a.unshift(t),localStorage.setItem(n,JSON.stringify(a))}(null===(n=pt.lookupVariable(Ed,t))||void 0===n?void 0:n.getValue(),e),Yd(Hd.logs(e)))}class TS extends H{constructor(...e){super(...e),DS(this,"onClick",(()=>{pt.lookupVariable(Sd,this)instanceof sr&&this.state.service&&kS(this.state.service,this)}))}}DS(TS,"Component",(({model:e})=>n().createElement(Yt.Button,{variant:"secondary",size:"sm",onClick:e.onClick},"Select")));const RS=()=>n().createElement(ah,null,n().createElement("p",null,"Log volume has not been configured."),n().createElement("p",null,n().createElement(Yt.TextLink,{href:"https://grafana.com/docs/loki/latest/reference/api/#query-log-volume",external:!0},"Instructions to enable volume in the Loki config:")),n().createElement(Yt.Text,{textAlignment:"left"},n().createElement("pre",null,n().createElement("code",null,"limits_config:",n().createElement("br",null),"volume_enabled: true")))),jS=()=>n().createElement(ah,null,n().createElement("p",null,"No service matched your search."));function IS(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function AS(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){IS(i,r,a,o,s,"next",e)}function s(e){IS(i,r,a,o,s,"throw",e)}o(void 0)}))}}function LS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const NS="service_name";class FS extends H{onActivate(){const e=pt.lookupVariable(Sd,this);e instanceof sr&&e.state.filters.length>0&&e.setState({filters:[]}),this.state.searchServicesString&&this.setState({searchServicesString:""}),this.getServicesByVolume(),this.subscribeToState(((e,t)=>{if(e.servicesByVolume!==t.servicesByVolume){var n,r;const t=null===(r=pt.lookupVariable(Ed,this))||void 0===r||null===(n=r.getValue())||void 0===n?void 0:n.toString();let a=[];t&&e.servicesByVolume&&(a=MS(e.servicesByVolume,t,this.state.searchServicesString)),this.setState({servicesToQuery:a})}if(e.searchServicesString!==t.searchServicesString){var a,i;const t=null===(i=pt.lookupVariable(Ed,this))||void 0===i||null===(a=i.getValue())||void 0===a?void 0:a.toString();let n=[];t&&this.state.servicesByVolume&&(n=MS(this.state.servicesByVolume,t,e.searchServicesString)),this.setState({servicesToQuery:n}),this.getServicesByVolume(e.searchServicesString)}e.servicesToQuery!==t.servicesToQuery&&this.updateBody()})),pt.getTimeRange(this).subscribeToState(((e,t)=>{(function(e,t){return e.to.diff(e.from,"days")>1!=t.to.diff(t.from,"days")>1||(!!(e.to.diff(e.from,"hours")<6&&BS(e,t,"minutes",30))||(!!(e.to.diff(e.from,"days")<1&&BS(e,t,"hours",1))||!!(e.to.diff(e.from,"days")>1&&BS(e,t,"days",1))))})(e.value,t.value)&&this.getServicesByVolume()}))}getServicesByVolume(e){var t=this;return AS((function*(){const n=pt.getTimeRange(t).state.value;t.setState({isServicesByVolumeLoading:!0});const r=yield pp(t);if(r)try{const a=e?`(?i).*${(0,ee.escapeRegExp)(e)}.*`:".+",i=yield r.getResource("index/volume",{query:`{${NS}=~\`${a}\`}`,from:n.from.utc().toISOString(),to:n.to.utc().toISOString(),limit:1e3},{headers:{"X-Query-Tags":`Source=${Bd}`}}),o={};i.data.result.forEach((e=>{const t=e.metric[NS],n=Number(e.value[1]);o[t]=n}));const s=Object.entries(o).sort(((e,t)=>t[1]-e[1])).map((([e])=>e));t.setState({volumeApiError:!1,servicesByVolume:s,isServicesByVolumeLoading:!1})}catch(e){var i;console.log("Failed to fetch top services:",e);const n=!(0,a.isFetchError)(e)||!(null===(i=e.data.message)||void 0===i?void 0:i.includes("parse error"));t.setState({volumeApiError:n,servicesByVolume:[],isServicesByVolumeLoading:!1})}}))()}updateBody(){if(this.state.servicesToQuery&&0!==this.state.servicesToQuery.length){const e=[],t=pt.getTimeRange(this).state.value;for(const n of this.state.servicesToQuery)e.push(this.buildServiceLayout(n,t),this.buildServiceLogsLayout(n));this.state.body.setState({children:[new iu({children:e,isLazy:!0,templateColumns:"repeat(auto-fit, minmax(500px, 1fr) minmax(300px, 70vw))",autoRows:"200px",md:{templateColumns:"1fr",rowGap:1,columnGap:1}})]})}else this.state.body.setState({children:[]})}updateServiceLogs(e){var t;if(!this.state.body)return void this.updateBody();const n=null===(t=this.state.servicesToQuery)||void 0===t?void 0:t.indexOf(e);void 0===n||n<0||this.state.body.forEachChild((t=>{if(t instanceof iu){let r=[...t.state.children];r.splice(2*n+1,1,this.buildServiceLogsLayout(e)),t.setState({children:r})}}))}buildServiceLayout(t,n){let r;n.to.diff(n.from,"hours")>=4&&n.to.diff(n.from,"hours")<=26&&(r="2h");const a=yd().setTitle(t).setData(Qp(ef(`sum by (${Id}) (count_over_time({${NS}=\`${t}\`} | drop __error__ [$__auto]))`,{legendFormat:`{{${Id}}}`,splitDuration:r,refId:`ts-${t}`}))).setCustomFieldConfig("stacking",{mode:Yt.StackingMode.Normal}).setCustomFieldConfig("fillOpacity",100).setCustomFieldConfig("lineWidth",0).setCustomFieldConfig("pointSize",0).setCustomFieldConfig("drawStyle",Yt.DrawStyle.Bars).setUnit("short").setOverrides(Gp).setOption("legend",{showLegend:!0,calcs:["sum"],placement:"right",displayMode:Yt.LegendDisplayMode.Table}).setHeaderActions(new TS({service:t})).build();return a.setState({extendPanelContext:(e,n)=>this.extendTimeSeriesLegendBus(t,n,a)}),new ou({$behaviors:[new Yr({key:"serviceCrosshairSync",sync:e.DashboardCursorSync.Crosshair})],body:a})}constructor(t){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){LS(e,t,n[t])}))}return e}({body:new iu({children:[]}),isServicesByVolumeLoading:!1,servicesByVolume:void 0,searchServicesString:"",servicesToQuery:void 0,serviceLevel:new Map},t));var n=this;LS(this,"_variableDependency",new wt(this,{variableNames:[Ed],onReferencedVariableValueChanged:function(){var e=AS((function*(e){const{name:t}=e.state;t===Ed&&n.getServicesByVolume()}));return function(t){return e.apply(this,arguments)}}()})),LS(this,"extendTimeSeriesLegendBus",((e,t,n)=>{const r=t.onToggleSeriesVisibility;t.onToggleSeriesVisibility=(t,a)=>{var i,o,s;null==r||r(t,a);const l=(null!==(s=null===(o=n.state.$data)||void 0===o||null===(i=o.state.data)||void 0===i?void 0:i.series)&&void 0!==s?s:[]).map((e=>{var t;return null!==(t=sf(e))&&void 0!==t?t:"logs"})),c=function(e,t,n,r){if(n===Yt.SeriesVisibilityChangeMode.ToggleSelection){const n=null!=t?t:[];return 1===n.length&&n.includes(e)?n.filter((t=>t!==e)):[e]}let a=(null==t?void 0:t.length)?t:r;return a.includes(e)?a.filter((t=>t!==e)):[...a,e]}(t,this.state.serviceLevel.get(e),a,l);this.state.serviceLevel.set(e,c),this.updateServiceLogs(e)}})),LS(this,"getLevelFilterForService",(e=>{let t=this.state.serviceLevel.get(e)||[];return 0===t.length?"":` | ${t.map((e=>("logs"===e&&(e=""),`detected_level=\`${e}\``))).join(" or ")} `})),LS(this,"buildServiceLogsLayout",(t=>{const n=this.getLevelFilterForService(t);return new ou({$behaviors:[new Yr({sync:e.DashboardCursorSync.Off})],body:vd().setHoverHeader(!0).setData(Qp(ef(`{${NS}=\`${t}\`}${n}`,{maxLines:100,refId:`logs-${t}`}))).setOption("showTime",!0).setOption("enableLogDetails",!1).build()})})),LS(this,"onSearchServicesChange",(0,ee.debounce)((e=>{this.setState({searchServicesString:e}),ip(op,lp.service_selection.search_services_changed,{searchQuery:e})}),500)),this.addActivationHandler(this.onActivate.bind(this))}}function MS(e,t,n){if(!(null==e?void 0:e.length))return[];const r=e.filter((e=>e.toLowerCase().includes(n.toLowerCase()))),a=function(e){if(!e||"string"!=typeof e)return[];const t=Jd(e);let n=[];try{n=JSON.parse(localStorage.getItem(t)||"[]")}catch(e){console.error("Error parsing favorite services from local storage",e)}return Array.isArray(n)||(n=[]),n}(t).filter((e=>e.toLowerCase().includes(n.toLowerCase())&&r.includes(e)));return Array.from(new Set([...a,...r]))}function BS(e,t,n,r){const a=e.to.diff(t.to,n)>r||e.to.diff(t.to,n)<-r,i=e.from.diff(t.from,n)>r||e.from.diff(t.from,n)<-r;return a||i}function VS(e){return{container:(0,Zt.css)({display:"flex",flexDirection:"column",flexGrow:1,position:"relative"}),headingWrapper:(0,Zt.css)({marginTop:e.spacing(1)}),loadingText:(0,Zt.css)({margin:0}),header:(0,Zt.css)({position:"absolute",right:0,top:"4px",zIndex:2}),bodyWrapper:(0,Zt.css)({flexGrow:1,display:"flex",flexDirection:"column"}),body:(0,Zt.css)({overflowY:"scroll",flexGrow:1,display:"flex",flexDirection:"column"}),searchField:(0,Zt.css)({marginTop:e.spacing(1)})}}function zS(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function WS(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){zS(i,r,a,o,s,"next",e)}function s(e){zS(i,r,a,o,s,"throw",e)}o(void 0)}))}}function HS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){HS(e,t,n[t])}))}return e}LS(FS,"Component",(({model:e})=>{const r=(0,Yt.useStyles2)(VS),{isServicesByVolumeLoading:a,servicesByVolume:i,servicesToQuery:o,body:s,volumeApiError:l}=e.useState(),[c,u]=(0,t.useState)("");var d,p;return n().createElement("div",{className:r.container},n().createElement("div",{className:r.bodyWrapper},n().createElement("div",null,a&&n().createElement(Yt.LoadingPlaceholder,{text:"Loading services",className:r.loadingText}),!a&&n().createElement(n().Fragment,null,"Showing ",null!==(d=null==o?void 0:o.length)&&void 0!==d?d:0," services")),n().createElement(Yt.Field,{className:r.searchField},n().createElement(pf,{isLoading:a,value:c,onChange:t=>{u(null!=t?t:""),e.onSearchServicesChange(null!=t?t:"")},selectOption:t=>{kS(t,e)},label:"Service",options:null!==(p=null==o?void 0:o.map((e=>({value:e,label:e}))))&&void 0!==p?p:[]})),!a&&l&&n().createElement(RS,null),!a&&!l&&!(null==i?void 0:i.length)&&n().createElement(jS,null),!a&&o&&o.length>0&&n().createElement("div",{className:r.body},n().createElement(s.Component,{model:s}))))}));class US extends H{getFiltersVariable(){const e=pt.lookupVariable(Sd,this);if(!(e instanceof sr))throw new Error("Filters variable not found");return e}setEmptyFiltersRedirection(){const e=this.getFiltersVariable();0!==e.state.filters.length?e.subscribeToState((e=>{0===e.filters.length&&this.redirectToStart(),e.filters.some((e=>e.key===NS))||this.redirectToStart()})):this.redirectToStart()}redirectToStart(){Qd()}getMetadata(){const e=Nd().getServiceSceneState();e&&this.setState($S({},e))}onActivate(){this.getMetadata(),this.setBreakdownView(Kd()),this.setEmptyFiltersRedirection();const e=[];var t;return this.state.$data&&e.push(null===(t=this.state.$data)||void 0===t?void 0:t.subscribeToState((()=>{this.updateFields()}))),this.updateLabels(),this.updatePatterns(),e.push(pt.getTimeRange(this).subscribeToState((()=>{this.updateLabels(),this.updatePatterns()}))),()=>e.forEach((e=>e.unsubscribe()))}onReferencedVariableValueChanged(e){e.state.name!==Ed?0!==this.getFiltersVariable().state.filters.length&&Promise.all([this.updatePatterns(),this.updateLabels()]).finally((()=>{e.state.name!==Od&&Yd(zd.logs,this.state)})).catch((e=>{console.error("Failed to update",e)})):this.redirectToStart()}getLogsFormatVariable(){const e=pt.lookupVariable(Dd,this);if(!(e instanceof ns))throw new Error("Logs format variable not found");return e}updateFields(){var t,n;const r=this.getLogsFormatVariable(),a=["__time","timestamp","time","datetime","date","timestamp_ms","timestamp_us","ts","traceID","trace","spanID","span","referer","user_identifier"],i=pt.getData(this).state;if((null===(t=i.data)||void 0===t?void 0:t.state)===e.LoadingState.Done){var o;const e=null===(o=i.data)||void 0===o?void 0:o.series[0];if(e){const t=function(e){var t;const n={type:"logfmt",fields:[]},r=e.fields.find((e=>"labelTypes"===e.name));n.fields=Object.keys((null==r?void 0:r.values.reduce(((e,t)=>(Object.entries(t).filter((([e,t])=>"P"===t)).forEach((([t])=>e[t]=!0)),e)),{}))||{});const a=e.fields.find((e=>"Line"===e.name));return n.type="{"===(null==a||null===(t=a.values[0])||void 0===t?void 0:t[0])?"json":"logfmt",n}(e),n=t.fields.filter((e=>!a.includes(e))).sort(((e,t)=>e.localeCompare(t)));JSON.stringify(n)!==JSON.stringify(this.state.fields)&&this.setState({fields:n,loading:!1});const i=t.type?` | ${t.type}`:"";r.getValue()!==i&&r.changeValueTo(i)}else this.setState({fields:[],loading:!1})}else(null===(n=i.data)||void 0===n?void 0:n.state)===e.LoadingState.Error&&this.setState({fields:[],loading:!1})}updatePatterns(){var e=this;return WS((function*(){const t=yield pp(e);if(!t)return;const n=pt.getTimeRange(e).state.value,r=pt.lookupVariable(Sd,e),a=pt.lookupVariable(xd,e),i=[jd,Id],{data:o}=yield t.getResource("patterns",{query:nf([...r.state.filters,...a.state.filters.filter((t=>{var n;return(null===(n=e.state.labels)||void 0===n?void 0:n.includes(t.key))&&!i.includes(t.key)}))]),start:n.from.utc().toISOString(),end:n.to.utc().toISOString()},{headers:{"X-Query-Tags":`Source=${Bd}`}});e.setState({patterns:o})}))()}updateLabels(){var e=this;return WS((function*(){const t=yield pp(e);if(!t)return;const n=pt.getTimeRange(e).state.value,r=pt.lookupVariable(Sd,e),{detectedLabels:a}=yield t.getResource("detected_labels",{query:r.state.filterExpression,start:n.from.utc().toISOString(),end:n.to.utc().toISOString()},{headers:{"X-Query-Tags":`Source=${Bd}`}});if(!a||!Array.isArray(a))return;const i=a.sort(((e,t)=>Bp(e,t))).map((e=>e.label));i.includes(Id)||i.unshift(Id),JSON.stringify(i)!==JSON.stringify(e.state.labels)&&e.setState({labels:i})}))()}setBreakdownView(e){const{body:t}=this.state,n=GS.find((t=>t.value===e));n?t.setState({children:[...t.state.children.slice(0,1),n.getScene((e=>{"fields"===n.value&&this.setState({fieldsCount:e.length})}))]}):console.error("not setting breakdown view")}constructor(e){var t;super($S({body:null!==(t=e.body)&&void 0!==t?t:new Xc({direction:"column",children:[new Zc({ySizing:"content",body:new qS({})})]}),$data:Qp(ef(Td)),loading:!0},e)),HS(this,"_variableDependency",new wt(this,{variableNames:[Ed,Sd,xd,Od],onReferencedVariableValueChanged:this.onReferencedVariableValueChanged.bind(this)})),this.addActivationHandler(this.onActivate.bind(this))}}HS(US,"Component",(({model:e})=>{const{body:t}=e.useState();return n().createElement(t.Component,{model:t})}));const GS=[{displayName:"Logs",value:zd.logs,getScene:()=>new Xc({direction:"column",children:[new Zc({minHeight:200,body:new wS({})}),new Zc({minHeight:"470px",height:"calc(100vh - 500px)",body:new ES({})})]}),testId:Cp},{displayName:"Labels",value:zd.labels,getScene:()=>new Xc({children:[new Zc({body:new Df({})})]}),testId:Pp},{displayName:"Fields",value:zd.fields,getScene:e=>new Xc({children:[new Zc({body:new ph({changeFields:e})})]}),testId:Ep},{displayName:"Patterns",value:zd.patterns,getScene:()=>new Xc({children:[new Zc({body:new Qh({})})]}),testId:_p}];class qS extends H{}function QS(e){return{actions:(0,Zt.css)({[e.breakpoints.up(e.breakpoints.values.md)]:{position:"absolute",right:0,zIndex:2}})}}HS(qS,"Component",(({model:e})=>{const t=(0,Yt.useStyles2)(QS),r=up(e),a=Kd(),i=(e,t)=>{switch(e.value){case"fields":var n,r,a;return null!==(a=t.fieldsCount)&&void 0!==a?a:(null!==(r=null===(n=t.fields)||void 0===n?void 0:n.filter((e=>e!==jd)))&&void 0!==r?r:[]).length;case"patterns":var i;return null===(i=t.patterns)||void 0===i?void 0:i.length;case"labels":var o,s;return(null!==(s=null===(o=t.labels)||void 0===o?void 0:o.filter((e=>e!==jd)))&&void 0!==s?s:[]).length;default:return}},o=pt.getAncestor(e,US).useState(),{loading:s}=o,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(o,["loading"]);return n().createElement(Yt.Box,{paddingY:0},n().createElement("div",{className:t.actions},n().createElement(Yt.Stack,{gap:1},n().createElement(Kh,{exploration:r}))),n().createElement(Yt.TabsBar,null,GS.map(((t,r)=>n().createElement(Yt.Tab,{"data-testid":t.testId,key:r,label:t.displayName,active:a===t.value,counter:s?void 0:i(t,l),icon:s?"spinner":void 0,onChangeTab:()=>{if(t.value!==a&&(ip(sp,lp.service_details.action_view_changed,{newActionView:t.value,previousActionView:a}),t.value)){const n=pt.getAncestor(e,US),r=n.getFiltersVariable().state.filters.find((e=>e.key===NS));(null==r?void 0:r.value)?Yd(t.value,n.state):Qd()}}})))))}));const YS=({onRemove:e,pattern:r,size:a="lg"})=>{const i=(0,Yt.useStyles2)(ZS),[o,s]=(0,t.useState)(!1);return n().createElement("div",{className:i.pattern,onClick:()=>s(!o),onMouseLeave:()=>s(!1)},n().createElement(Yt.Tag,{title:r,key:r,name:o?r:XS(r,a),className:i.tag}),n().createElement(Yt.Button,{"aria-label":"Remove pattern","data-testid":Dp,variant:"secondary",size:"sm",className:i.removeButton,onClick:e},n().createElement(Yt.Icon,{name:"times"})))},KS={sm:50,lg:Math.round(window.innerWidth/8)};function XS(e,t){const n=e.length;if(n<KS[t])return e;const r=Math.round(.4*KS[t]);return`${e.substring(0,r)}  ${e.substring(n-r)}`}const ZS=e=>({pattern:(0,Zt.css)({display:"flex",fontFamily:"monospace",gap:e.spacing(.25),cursor:"pointer",overflow:"hidden"}),tag:(0,Zt.css)({borderTopRightRadius:0,borderBottomRightRadius:0,backgroundColor:e.colors.secondary.main,border:`solid 1px ${e.colors.secondary.border}`,color:e.colors.secondary.text,boxSizing:"border-box",padding:e.spacing(.25,.75),overflow:"hidden",textOverflow:"ellipsis"}),removeButton:(0,Zt.css)({paddingLeft:2.5,paddingRight:2.5})}),JS=({patterns:e,onRemove:t})=>{const r=(0,Yt.useStyles2)(ex);if(!e||0===e.length)return null;const a=e.filter((e=>"include"===e.type)),i=e.filter((e=>"include"!==e.type)),o=n=>{t(e.filter((e=>e!==n))),ip(sp,lp.service_details.pattern_removed,{includePatternsLength:a.length-("include"===(null==n?void 0:n.type)?1:0),excludePatternsLength:i.length-("include"!==(null==n?void 0:n.type)?1:0),type:n.type})};return n().createElement("div",null,a.length>0&&n().createElement("div",{className:r.patternsContainer},n().createElement(Yt.Text,{variant:"bodySmall",weight:"bold","data-testid":jp},"Included pattern",e.length>1?"s":""),n().createElement("div",{className:r.patterns},a.map((e=>n().createElement(YS,{key:e.pattern,pattern:e.pattern,size:"lg",onRemove:()=>o(e)}))))),i.length>0&&n().createElement("div",{className:r.patternsContainer},n().createElement(Yt.Text,{variant:"bodySmall",weight:"bold","data-testid":Ip},"Excluded pattern",i.length>1?"s":"",":"),n().createElement("div",{className:r.patterns},i.map((e=>n().createElement(YS,{key:e.pattern,pattern:e.pattern,size:i.length>1?"sm":"lg",onRemove:()=>o(e)}))))))};function ex(e){return{patternsContainer:(0,Zt.css)({paddingBottom:e.spacing(1),overflow:"hidden"}),patterns:(0,Zt.css)({display:"flex",gap:e.spacing(1),alignItems:"center",flexWrap:"wrap"})}}const tx=()=>{const e=(0,Yt.useStyles2)(nx);return n().createElement("div",{className:e.wrapper},n().createElement("a",{href:"https://forms.gle/1sYWCTPvD72T1dPH9",className:e.feedback,title:"Share your thoughts about Logs in Grafana.",target:"_blank",rel:"noreferrer noopener"},n().createElement(Yt.Icon,{name:"comment-alt-message"})," Give feedback"),n().createElement("a",{href:"https://forms.gle/1sYWCTPvD72T1dPH9",className:e.feedback,title:"Share your thoughts about Logs in Grafana.",target:"_blank",rel:"noreferrer noopener"},n().createElement(Yt.Badge,{text:"Preview",color:"blue",icon:"rocket"})))},nx=e=>({wrapper:(0,Zt.css)({display:"flex",whiteSpace:"nowrap"}),feedback:(0,Zt.css)({alignSelf:"center",margin:"6px 6px 6px 0",color:e.colors.text.secondary,fontSize:e.typography.bodySmall.fontSize,"&:hover":{color:e.colors.text.link}})});function rx(e){return n().createElement(n().Fragment,null,n().createElement(Yt.Alert,{severity:"info",title:"Welcome to Explore Logs (public preview) - we're in active development so please expect things to change.",onRemove:e.onRemove},n().createElement("div",null,"Check out our"," ",n().createElement("a",{className:"external-link",target:"_blank",href:"https://grafana.com/docs/grafana-cloud/visualizations/simplified-exploration/logs/",rel:"noreferrer"},"Get started doc"),", or see"," ",n().createElement("a",{className:"external-link",target:"_blank",href:"https://github.com/grafana/explore-logs/releases",rel:"noreferrer"},"recent changes"),".",n().createElement("br",null),"Help us shape the future of the app."," ",n().createElement("a",{className:"external-link",target:"_blank",href:"https://forms.gle/1sYWCTPvD72T1dPH9",rel:"noreferrer"},"Send us feedback")," ","or engage with us on"," ",n().createElement("a",{className:"external-link",target:"_blank",href:"https://github.com/grafana/explore-logs/?tab=readme-ov-file#explore-logs",rel:"noreferrer"},"GitHub"),".")))}function ax(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ix=`${Bd}.interceptBannerStorageKey`;class ox extends H{dismiss(){this.setState({interceptDismissed:!0}),localStorage.setItem(ix,"true")}constructor(e){var t,n;super((t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ax(e,t,n[t])}))}return e}({},e),n=null!=(n={interceptDismissed:!!localStorage.getItem(ix)})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t))}}function sx(e){return{bodyContainer:(0,Zt.css)({flexGrow:1,display:"flex",minHeight:"100%",flexDirection:"column"}),container:(0,Zt.css)({flexGrow:1,display:"flex",gap:e.spacing(1),minHeight:"100%",flexDirection:"column",padding:e.spacing(2),maxWidth:"100vw"}),body:(0,Zt.css)({flexGrow:1,display:"flex",flexDirection:"column",gap:e.spacing(1)}),controlsContainer:(0,Zt.css)({display:"flex",gap:e.spacing(2),justifyContent:"space-between",alignItems:"flex-start"}),filters:(0,Zt.css)({display:"flex",gap:e.spacing(2),width:"calc(100% - 450)",flexWrap:"wrap",alignItems:"flex-end",'& + div[data-testid="data-testid Dashboard template variables submenu Label Filters"]:empty':{visibility:"hidden"},"&:first-child":{"& > div":{"& > div":{flexWrap:"wrap","& > div":{maxWidth:"380px","& > div":{flex:"1 0 auto","&:nth-child(3)":{flex:"0 1 auto"}}}}}},'[data-testid="AdHocFilter-service_name"]':{'div[class*="input-wrapper"]:first-child':{display:"none"},'div[class*="input-wrapper"]:nth-child(2)':{marginLeft:0}},'div >[title="Add filter"]':{border:0,display:"none",width:0,padding:0,margin:0}}),controls:(0,Zt.css)({display:"flex",paddingTop:e.spacing(3),gap:e.spacing(1)}),rotateIcon:(0,Zt.css)({svg:{transform:"rotate(180deg)"}})}}function lx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ax(ox,"Component",(({model:e})=>{if(!e.parent)return null;const{controls:t,contentScene:r,patterns:a}=e.parent.useState(),{interceptDismissed:i}=e.useState();if(!r)return null;const o=(0,Yt.useStyles2)(sx);return n().createElement("div",{className:o.bodyContainer},!i&&n().createElement(rx,{onRemove:()=>{e.dismiss()}}),n().createElement("div",{className:o.container},t&&n().createElement("div",{className:o.controlsContainer},n().createElement("div",{className:o.filters},t.map((e=>e instanceof Ho?n().createElement(e.Component,{key:e.state.key,model:e}):null))),n().createElement("div",{className:o.controls},n().createElement(tx,null),t.map((e=>e instanceof Ho==0?n().createElement(e.Component,{key:e.state.key,model:e}):null)))),n().createElement(JS,{patterns:a,onRemove:t=>{var n;return null===(n=e.parent)||void 0===n?void 0:n.setState({patterns:t})}}),n().createElement("div",{className:o.body},r&&n().createElement(r.Component,{model:r}))))}));class cx extends H{onActivate(){const e={};this.state.contentScene||(e.contentScene=Kd()===zd.explore?new FS({}):new US({})),this.setState(e);const t=pt.lookupVariable(Od,this);t instanceof ns&&this.updatePatterns(this.state,t);const n=pt.lookupVariable(xd,this);return n instanceof sr&&this.syncFieldsWithUrl(n),this._subs.add(this.subscribeToState((e=>{const t=pt.lookupVariable(Od,this);t instanceof ns&&this.updatePatterns(e,t)}))),()=>{ll().cleanUp(this)}}syncFieldsWithUrl(e){const t=a.locationService.getLocation();null===new URLSearchParams(t.search).get("var-fields")&&e.setState({filters:[]})}updatePatterns(e,t){var n;const r=function(e){const t=e.filter((e=>"exclude"===e.type)).map((e=>`!> \`${e.pattern}\``)).join(" ").trim(),n=e.filter((e=>"include"===e.type));let r="";return n.length>0&&(r=1===n.length?`|> \`${n[0].pattern}\``:`|>  ${n.map((e=>`\`${e.pattern}\``)).join(" or ")}`),`${t} ${r}`.trim()}(null!==(n=e.patterns)&&void 0!==n?n:[]);t.changeValueTo(r)}getUrlState(){return{patterns:JSON.stringify(this.state.patterns)}}updateFromUrl(e){const t={};e.patterns&&"string"==typeof e.patterns&&(t.patterns=JSON.parse(e.patterns)),this.setState(t)}constructor(e){var t,n,r,a,i,o,s;super((o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){lx(e,t,n[t])}))}return e}({$timeRange:null!==(t=e.$timeRange)&&void 0!==t?t:new xe({}),$variables:null!==(r=e.$variables)&&void 0!==r?r:ux(null!==(n=null!==(i=localStorage.getItem(Zd))&&void 0!==i?i:void 0)&&void 0!==n?n:"grafanacloud-logs",e.initialFilters),controls:null!==(a=e.controls)&&void 0!==a?a:[new Ho({layout:"vertical"}),new Kc,new wc({}),new Rc({})],patterns:[]},e),s=null!=(s={body:new ox({})})?s:{},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(s)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(s,e))})),o)),lx(this,"_urlSync",new fe(this,{keys:["patterns"]})),this.addActivationHandler(this.onActivate.bind(this))}}function ux(t,n){const r=[Mp.Equal,Mp.NotEqual].map((e=>({label:e,value:e}))),a=new sr({name:Sd,datasource:Rd,layout:"vertical",label:"Service",filters:null!=n?n:[],expressionBuilder:nf,hide:e.VariableHide.hideLabel,key:"adhoc_service_filter"});a._getOperators=function(){return r};const i=new sr({name:xd,label:"Filters",applyMode:"manual",layout:"vertical",getTagKeysProvider:()=>Promise.resolve({replace:!0,values:[]}),getTagValuesProvider:()=>Promise.resolve({replace:!0,values:[]}),expressionBuilder:rf,hide:e.VariableHide.hideLabel});i._getOperators=()=>r;const o=new ls({name:Ed,label:"Data source",value:t,pluginId:"loki"});return o.subscribeToState((e=>{const t=`${e.value}`;var n;e.value&&(n=t,localStorage.setItem(Zd,n))})),new Qo({variables:[o,a,i,new ns({name:Od,value:"",hide:e.VariableHide.hideVariable}),new ns({name:kd,value:"",hide:e.VariableHide.hideVariable}),new ns({name:Dd,value:"",hide:e.VariableHide.hideVariable})]})}function dx(){return new cl({body:new cx({$timeRange:new xe({from:"now-15m",to:"now"})})})}function px(){return new Nu({title:"",url:Vd,getScene:()=>new cl({body:new Xc({direction:"column",children:[]})}),hideFromBreadcrumbs:!0,routePath:"*",$behaviors:[()=>{Qd()}]})}function fx(t,n,r){const{service:a}=function(e){return{service:e.params.service}}(t);return new Nu({title:hx(r),layout:e.PageLayoutType.Custom,url:Hd[r](a),preserveUrlKeys:qd,getParentPage:()=>n,getScene:()=>dx()})}function hx(e){return e.charAt(0).toUpperCase()+e.slice(1)}lx(cx,"Component",(({model:e})=>{const{body:t}=e.useState();return t?n().createElement(t.Component,{model:t}):n().createElement(Yt.LoadingPlaceholder,{text:"Loading..."})}));const gx=()=>new yu({pages:[new Nu({title:"Logs",url:Ud(zd.explore),layout:e.PageLayoutType.Custom,preserveUrlKeys:Gd,routePath:Ud(zd.explore),getScene:()=>dx(),drilldowns:[{routePath:$d.logs,getPage:(e,t)=>fx(e,t,zd.logs),defaultRoute:!0},{routePath:$d.labels,getPage:(e,t)=>fx(e,t,zd.labels)},{routePath:$d.patterns,getPage:(e,t)=>fx(e,t,zd.patterns)},{routePath:$d.fields,getPage:(e,t)=>fx(e,t,zd.fields)},{routePath:"*",getPage:()=>px()}]}),px()]});function mx(){const[e,i]=n().useState(!1);Ad||(Ad=new Ld);const o=function(e){const t=wu.get(e);if(t)return t;const n=e();return wu.set(e,n),n}(gx);(0,t.useEffect)((()=>{e||(ll().initSync(o),i(!0))}),[o,e]);const s=a.config.bootData.user.permissions;return(null==s?void 0:s["grafana-lokiexplore-app:read"])||(null==s?void 0:s["datasources:explore"])?e?n().createElement(o.Component,{model:o}):null:n().createElement(r.Redirect,{to:"/"})}const bx=n().createContext(null);class vx extends n().PureComponent{render(){return n().createElement(bx.Provider,{value:this.props},n().createElement(mx,null))}}(0,of.Ay)().then((()=>console.debug("Grafana ML initialized")));const yx=(new e.AppPlugin).setRootPage(vx)})(),h})()));
//# sourceMappingURL=module.js.map